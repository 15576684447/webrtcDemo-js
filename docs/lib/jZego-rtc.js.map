{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./sdk/common/zego.entity.ts","webpack:///./sdk/common/client-util.ts","webpack:///./sdk/common/zego.extern.ts","webpack:///./sdk/common/clientBase/liveHandler.ts","webpack:///./sdk/common/clientBase/messageHandler.ts","webpack:///./sdk/common/clientBase/heartBeatHandler.ts","webpack:///./sdk/common/clientBase/streamHandler.ts","webpack:///./sdk/common/clientBase/stateCenter.ts","webpack:///./sdk/common/clientBase/roomHandler.ts","webpack:///./sdk/common/clientBase/socketCenter.ts","webpack:///./sdk/common/clientBase/common.ts","webpack:///./sdk/common/clientBase/index.ts","webpack:///./sdk/common/ZegoStreamCenter.ts","webpack:///./sdk/webrtc/zego.play.web.ts","webpack:///./sdk/common/zego.signal.ts","webpack:///(webpack)/buildin/global.js","webpack:///./sdk/webrtc/adapter.js","webpack:///./sdk/webrtc/zego.publish.ts","webpack:///./sdk/webrtc/zego.preview.ts","webpack:///./sdk/common/zego.datareport.ts","webpack:///./sdk/webrtc/zego.streamCenter.web.ts","webpack:///./sdk/common/zego.logger.ts","webpack:///./sdk/webrtc/zego.logger.webrtc.ts","webpack:///./sdk/webrtc/zego.client.web.ts"],"names":["root","factory","exports","module","define","amd","a","i","self","this","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","ENUM_LOG_LEVEL","ENUM_REMOTE_TYPE","PROTO_VERSION","ListNode","id","data","_id","next","prev","_data","hasNext","hasPrev","LinkedList","start","end","_idCounter","_numNodes","insertBefore","toInsertBefore","newNode","addLast","add","getFirst","getLast","size","getFromFirst","index","count","temp","remove","node","removeFirst","removeLast","removeAll","each","iterator","find","found","result","map","results","push","unshift","pop","shift","sdkErrorList","SUCCESS","code","msg","PARAM","HEARTBEAT_TIMEOUT","LOGIN_TIMEOUT","SEND_MSG_TIMEOUT","RESET_QUEUE","LOGIN_DISCONNECT","KICK_OUT","UNKNOWN","FREQ_LIMITED","ENUM_SIGNAL_STATE","ENUM_RESOLUTION_TYPE","LOW","width","height","frameRate","bitRate","MEDIUM","HIGH","ENUM_RETRY_STATE","didNotStart","retrying","finished","ENUM_PUBLISH_STATE","waitingSessionRsp","waitingOffserRsp","waitingServerAnswer","waitingServerICE","connecting","publishing","stop","ENUM_PLAY_STATE","playing","ENUM_CONNECT_STATE","disconnect","connected","MAX_TRY_CONNECT_COUNT","SEND_MSG_RESET","MAX_TRY_HEARTBEAT_COUNT","ENUM_PUBLISH_STREAM_STATE","waiting_url","tryPublish","update_info","ENUM_STREAM_SUB_CMD","liveNone","liveBegin","liveEnd","liveUpdate","ENUM_STREAM_UPDATE_TYPE","added","deleted","ENUM_RUN_STATE","ENUM_PUBLISH_STATE_UPDATE","error","retry","ENUM_PLAY_STATE_UPDATE","MAX_TRY_LOGIN_COUNT","TRY_LOGIN_INTERVAL","MINIUM_HEARTBEAT_INTERVAL","ENUM_STREAM_UPDATE_CMD","updated","SERVER_ERROR_CODE","MIXSTREAM_ERROR_CODE","QUALITYLEVEL","ENUM_SIGNAL_SUB_CMD","none","joinLiveRequest","joinLiveResult","joinLiveInvite","joinLiveStop","ENUM_PUSH_SIGNAL_SUB_CMD","pushJoinLiveRequest","pushJoinLiveResult","pushJoinLiveInvite","pushJoinLiveStop","ENUM_PLAY_SOURCE_TYPE","auto","ultra","ENUM_DISPATCH_TYPE","cdn","ClientUtil","checkConfigParam","option","logger","appid","server","idName","checkLoginParam","roomid","token","registerCallback","fName","callbackList","sf","ef","success","actionErrorCallback","actionSuccessCallback","getServerError","serverErrorList","1","1001","1002","1003","1004","1005","1006","1007","1008","1009","2002","1000000000","err","isKeepTryLogin","mergeStreamList","oldStreamList","newStreamList","callbackResult","debug","flag","addStreamList","delStreamList","updateStreamList","length","anchor_id_name","j","stream_id","extra_info","k","checkCustomCommandParam","param","generateRandumNumber","maxNum","parseInt","Math","random","isSupportWebrtc","e","window","navigator","isSupportH264","sucCall","errCall","RTCPeerConnection","createOffer","offerToReceiveAudio","offerToReceiveVideo","then","desc","sdp","hasH264","split","some","item","startsWith","indexOf","seq","playErrorList","DISPATCH_ERROR","DISPATCH_TIMEOUT","TOKEN_ERROR","SEND_SESSION_TIMEOUT","CREATE_SESSION_ERROR","CREATE_OFFER_ERROR","SERVER_MEDIA_DESC_TIMEOUT","SET_REMOTE_DESC_ERROR","CREATE_ANSWER_ERROR","SET_LOCAL_DESC_ERROR","SEND_MEDIA_DESC_TIMEOUT","SEND_CANDIDATE_ERROR","SEND_CANDIDATE_TIMEOUT","SERVER_CANDIDATE_TIMEOUT","SERVER_CANDIDATE_ERROR","MEDIA_CONNECTION_FAILED","MEDIA_CONNECTION_CLOSED","SESSION_CLOSED","WEBSOCKET_ERROR","publishErrorList","SERVER_MEDIA_DESC_ERROR","getSeq","zego_entity_1","LiveHandler","stateCenter","socketCenter","requestJoinLive","destIdName","resultCallback","requestId","getRequestId","signalCmd","getSignalCmdContent","undefined","joinLiveCallbackMap","sendSignalCmd","inviteJoinLive","endJoinLive","respondJoinLive","respondResult","dest_id_name","joinLiveRequestMap","info","cmd","signalMsg","isLogin","bodyData","sub_cmd","signal_msg","sendMessage","handlePushSignalMsg","JSON","parse","body","handlePushJoinLiveRequestMsg","handlePushJoinLiveResultMsg","handlePushJoinLiveInviteMsg","handlePushJoinLiveStopMsg","warn","request_id","from_userid","onRecvJoinLiveRequest","from_username","room_id","onRecvInviteJoinLiveRequest","result_callback","onRecvEndJoinLiveCommand","client_util_1","MessageHandler","sendCustomCommand","dstMembers","customContent","_this","customContent_send","nickName","custom_content","custom_msg","stringify","registerRouter","handleSendCustomMsgRsp","sendCustomMessage","sendData","sendDataNode","sendDataMap","header","err_code","sendDataList","handlePushCustomMsg","submsg","custommsg","onRecvCustomCommand","from_idname","sendRoomMsg","msg_category","msg_type","msg_content","timestamp","Date","sendRoomMsgTime","SendRoomMsgInterval","handleSendRoomMsgRsp","msg_id","onRecvRoomMsg","chat_data","server_msg_id","ret_msg_id","sendReliableMessage","type","transSeqMap","trans_type","trans_data","sendBigRoomMessage","category","content","timeWindow","bigimTimeWindow","offset","serverTimeOffset","serverTime","getTime","clientId","cmdSeq","toString","bigImCallbackMap","bigmsg_client_id","sendBigRoomMessageInternal","handleBigImMsgRsp","currentIndex","floor","bigImLastTimeIndex","bigImMessageList","oneData","setBigImTimer","handlePushMergeMsg","messages","handlePushBigRooMsg","msg_body","bodyString","messageBody","roomId","pushData","msg_data","message","id_name","nick_name","messageId","bigmsg_id","time","send_time","onRecvBigRoomMessage","messageList","msgs","bigim_time_window","msgId","residue","interval","bigImTimer","setTimeout","onBigImTimer","serverTimestamp","requestList","splice","callbackInfo","clearTimeout","sendRelayMessage","datiTimeWindow","realyMessageList","setRelayTimer","sendRelayMessageInternal","relay_type","relay_data","relayTimer","onRelayTimer","relayInfo","handlePushTransMsg","trans_seq","trans_user_idname","onRecvReliableMessage","HeartBeatHandler","resetHeartbeat","heartbeatTimer","tryHeartbeatCount","hbLogout","heartbeatInterval","handleHeartbeatRsp","reserve","streamid","hearbeat_interval","dati_time_window","ReliableMessageHandler","fetchStreamList","server_user_seq","userSeq","userStateUpdate","fetchUserList","publishStreamList","state","updateStreamInfo","online_count","onUpdateOnlineCount","trans_seqs","oldSeq","fetchReliableMessage","localSeq","trans_local_seq","handleFetchTransRsp","stream_seq","streamSeq","streamQuerying","handleFetchStreamListRsp","stream_extra_info","userCount","resetCheckMessage","sendDataCheckTimer","checkSendMessageList","sendCommandList","sendCommandMap","head","checkMessageListTimeout","messageMap","checkCount","timeoutMsgCount","dropMsgCount","sendDataTimeout","sendDataDropTimeout","sendDataCheckOnceCount","startCheckMessageTimeout","sendDataCheckInterval","StreamHandler","setCDNInfo","streamInfo","streamItem","onStreamUpdated","streamList","onStreamExtraInfoUpdated","handleStreamStart","lastRunState","handleStreamUpdateRsp","handlePushStreamUpdateMsg","login","handleFullUpdateStream","stream_info","callbackStreamList","makeCallbackStreamList","onPublishStateUpdate","streamId","stream_msg","serverStreamSeq","serverStreamList","stream_cmd","handleAddedStreamList","handleDeletedStreamList","handleUpdatedStreamList","stream_gid","anchor_nick_name","urls_flv","urls_rtmp","urls_hls","updateMixStream","mixStreamConfig","successCallback","errorCallback","outputStreamId","outputUrl","req_body","live_channel","version","userData","mixInput","totalStreamId","testEnvironment","rect","layer","top","left","bottom","right","mixOutput","outputBitrate","outputFps","outputWidth","outputHeight","outputAudioConfig","outputAudioBitrate","outputAudioChannels","outputBgColor","outputBgImage","channel","rspBody","prefix","play","mixPlayInfo","stream_alias","slice","rtmp_url","hls_url","hdl_url","nonExistsStreamId","non_exist_streams","stopMixStream","updateStreamExtraInfo","extraInfo","zego_extern_1","StateCenter","configOK","roomCreateFlag","runState","logout","userQuerying","userTempList","streamUrlMap","cmdCallback","bigIMmessageList","tryLoginCount","tryLoginTimer","to_userid","RoomHandler","setRunState","newRunState","resetTryLogin","resetBigRoomInfo","resetRoom","resetRoomCallBack","sessionid","handleLogoutRsp","closeSocket","userid","setSessionInfo","onDisconnect","loginSuccessCallBack","onGetTotalUserList","userList","role","trylogin","tryLogin","loginBodyData","room_name","user_state_flag","room_create_flag","isDisConnect","createSocket","handleLoginRsp","closeHandler","openHandler","handleLoginFail","handleLoginSuccess","user_id","session_id","config_info","setRemoteLogLevel","log_level","log_url","openLogServer","ret_timestamp","parseFloat","responseHandler","setUserStateUpdate","update","fetchUserListWithPage","userIndex","handleFetchUserListRsp","user_index","sort_type","concat","user_baseinfos","ret_user_index","server_user_index","user_list","user_info","handlePushUserStateUpdateMsg","user_actions","user_list_seq","action","Action","IdName","NickName","Role","loginTime","LoginTime","onUserStateUpdate","SocketCenter","responseRouters","push_kickout","handlePushKickout","push_custommsg","push_im_chat","handlePushRoomMsg","push_userlist_update","push_merge_message","trans","handleTransRsp","push_trans","handleBizChannelRspCallback","rsp_body","callBack","getSocket","getHeader","Protocol","cmdData","cmdDataNode","websocket","send","dataBuffer","readyState","onclose","onerror","close","hander","onopen","errorHandler","checkResponse","onmessage","handleSendCommandMsgRsp","handleRelayRspCallback","handleBigImRspCallback","relay_result","Common","onPlayStateUpdateHandle","stopPlayingStream","onPlayStateUpdate","onPublishStateUpdateHandle","streamHandler","streamCenter","WebrtcOnPublishStateUpdateHandle","stopPublishingStream","resetStreamCenter","customUrl","reset","handleFetchWebRtcUrlRsp","ptype","startPublishingStream","urls","startPlayingStream","common_1","socketCenter_1","roomHandler_1","stateCenter_1","streamHandler_1","heartBeatHandler_1","messageHandler_1","liveHandler_1","BaseCenter","_super","bindSocketHandler","bindStreamHandler","bindHeatBeatHandler","bindRoomHandler","bindMessageHandler","bindLiveHandler","bindStreamCenterHandler","__extends","liveHandler","roomHandler","onKickOut","reason","messageHandler","heartBeatHandler","anchor_info","onGetAnchorInfo","onPlayQualityUpdate","streamQuality","onPublishQualityUpdate","onPlayerStreamUrlUpdate","url","onStreamUrlUpdate","onVideoSizeChanged","videoWidth","videoHeight","config","setLogLevel","logLevel","audienceCreateRoom","remoteLogLevel","logUrl","anchor_userid","anchro_username","release","stopLogServer","ZegoStreamCenter","log","ZegoPlayWeb","signal","dataReport","qualityTimeInterval","candidateInfo","waitICETimer","waitingICETimeInterval","waitingOfferTimer","waitingOfferTimeInterval","waitingServerTimer","waitingServerTimerInterval","qualityTimer","playQualityList","maxQualityListCount","lastPlayStats","audioBytesReceived","videoBytesReceived","framesDecoded","framesReceived","framesDropped","reportSeq","videoSizeCallback","qualityUpload","qualityUploadInterval","qualityUploadLastTime","maxRetryCount","currentRetryCount","retryState","closeSessionSignal","newReport","setAudioDestination","audioOutput","remoteVideo","sinkId","setSinkId","catch","startPlay","playOption","sessionSeq","eventStart","createSession","sessionId","eventEndWithMsg","playStateUpdateError","onCreatePlaySessionSuccess","turn_server","stun_server","configuration","iceServers","username","turn_username","credential","turn_auth_key","peerConnection","onicecandidate","onIceCandidate","onsignalingstatechange","onConnectionStateChange","oniceconnectionstatechange","onIceConnectionStateChange","onaddstream","onGotRemoteStream","oncanplay","offerOptions","playType","eventEnd","onCreateOfferSuccess","registerPushCallback","onRecvMediaDesc","onRecvCandidateInfo","onRecvCloseSession","onRecvResetSession","setLocalDescription","onSetLocalDescriptionSuccess","mediaDescription","answerSeq","sendMediaDesc","sendCandidateInfo","addEvent","sendMediaDescAck","offerDescription","toJSON","setRemoteDescription","RTCSessionDescription","sendCandidateInfoAck","infos","ice","sdpMid","sdpMLineIndex","candidate","addIceCandidate","RTCIceCandidate","event","target","signalingState","iceConnectionState","setPlayQualityTimer","checkPlayConnectionFailedState","connectionState","shouldRetryPlay","startRetryPlay","resetPlay","tryStartPlay","clearTryPlayTimer","audioOputput","isServerConnected","clearPlayQualityTimer","clearInterval","srcObject","unregisterPushCallback","setInterval","getStats","getPlayStats","playData","audioFractionLost","audioPacketsLost","videoBitrate","videoFPS","nackCount","pliCount","sliCount","videoFractionLos","audioJitter","videoFractionLost","videoFramesDecoded","frameHeight","frameWidth","videoTransferFPS","videoFramesDropped","totalRoundTripTime","currentRoundTripTime","forEach","bytesReceived","mediaType","jitter","packetsLost","fractionLost","kind","uploadPlayQuality","timeStamp","QualityReport","report","report_interval_ms","sendCloseSessionAck","stream","filter","shouldSendCloseSession","errorCode","sendCloseSession","quality","stopPlay","addMsgExt","uploadReport","ZegoSignal","signalSeq","pushCallback","sessionInfos","tryConnectCount","tryConnectTimer","tryConnectInterval","tokenType","browser","getBrowserAndVersion","platform","tem","ua","userAgent","M","match","test","exec","appName","appVersion","onUpdateHeartBeartInterval","resetConnectTimer","bindWebSocketHandle","handleServerPush","startConnectTimer","handleRespondData","addSession","session_token","removeSession","handlePushData","handlePushResetSessionData","disconnectCallback","connectCallback","disconnectServer","updateToken","keys","sessions","sendMessageWithCallback","tokenInfo","report_interval","errorTokenInfo","strError","globalHeader","connectServer","serverUrl","WebSocket","callback","app_id","negotiate_mode","callbackData","sessionList","cResetType","session_ids","sendResetSessionAck","video_min_kpbs","video_max_kpbs","audio_kpbs","candidateList","dataList","checkMessageTimeout","sendHeartbeat","sessionIdList","hb_interval","qualityStat","streams","g","Function","eval","require","u","f","Error","SDPUtils","writeMediaSection","transceiver","caps","dtlsRole","writeRtpDescription","writeIceParameters","iceGatherer","getLocalParameters","writeDtlsParameters","dtlsTransport","mid","rtpSender","rtpReceiver","trackId","_initialTrackId","track","msid","sendEncodingParameters","ssrc","rtx","localCName","getCommonCapabilities","localCapabilities","remoteCapabilities","commonCapabilities","codecs","headerExtensions","fecMechanisms","findCodecByPayloadType","pt","payloadType","preferredPayloadType","rtxCapabilityMatches","lRtx","rRtx","lCodecs","rCodecs","lCodec","parameters","apt","rCodec","toLowerCase","clockRate","numChannels","min","rtcpFeedback","fb","parameter","lHeaderExtension","rHeaderExtension","uri","isActionAllowedInSignalingState","offer","answer","maybeAddCandidate","iceTransport","alreadyAdded","getRemoteCandidates","remoteCandidate","foundation","ip","port","priority","protocol","addRemoteCandidate","makeError","description","NotSupportedError","InvalidStateError","InvalidAccessError","TypeError","OperationError","edgeVersion","addTrackToStreamAndFireEvent","addTrack","dispatchEvent","MediaStreamTrackEvent","fireAddTrack","pc","receiver","trackEvent","Event","_dispatchEvent","_eventTarget","document","createDocumentFragment","method","canTrickleIceCandidates","needNegotiation","localStreams","remoteStreams","localDescription","remoteDescription","iceGatheringState","usingBundle","bundlePolicy","rtcpMuxPolicy","iceTransportPolicy","hasTurn","console","isString","filterIceServers","_iceGatherers","iceCandidatePoolSize","RTCIceGatherer","gatherPolicy","_config","transceivers","_sdpSessionId","generateSessionId","_sdpSessionVersion","_dtlsRole","_isClosed","ontrack","onremovestream","onconnectionstatechange","onicegatheringstatechange","onnegotiationneeded","ondatachannel","_emitGatheringStateChange","getConfiguration","getLocalStreams","getRemoteStreams","_createTransceiver","doNotAdd","hasBundleTransport","recvEncodingParameters","associatedRemoteMediaStreams","wantReceive","transports","_createIceAndDtlsTransports","alreadyExists","_maybeFireNegotiationNeeded","RTCRtpSender","addStream","getTracks","clonedStream","clone","idx","clonedTrack","addEventListener","enabled","removeTrack","sender","removeStream","getSenders","getReceivers","_createIceGatherer","writable","bufferedCandidateEvents","bufferCandidates","_gather","onlocalcandidate","removeEventListener","evt","cand","component","ufrag","usernameFragment","serializedCandidate","writeCandidate","assign","parseCandidate","sections","getMediaSections","getDescription","join","complete","every","RTCIceTransport","onicestatechange","_updateIceConnectionState","_updateConnectionState","RTCDtlsTransport","ondtlsstatechange","_disposeIceAndDtlsTransports","_transceive","recv","params","encodings","rtcp","cname","compound","rtcpParameters","receive","sessionpart","Promise","reject","splitSections","mediaSection","parseRtpParameters","isIceLite","matchPrefix","rejected","isRejected","remoteIceParameters","getIceParameters","remoteDtlsParameters","getDtlsParameters","_updateSignalingState","resolve","receiverList","iceOptions","substr","lines","splitLines","getKind","direction","getDirection","remoteMsid","parseMsid","getMid","generateIdentifier","parseRtpEncodingParameters","parseRtcpParameters","isComplete","cands","setTransport","setRemoteCandidates","MediaStream","default","RTCRtpReceiver","getCapabilities","codec","isNewTrack","nativeTrack","sid","newState","states","new","closed","checking","completed","disconnected","failed","numAudioTracks","numVideoTracks","arguments","mandatory","optional","writeSessionBoilerplate","remoteCodec","hdrExt","remoteExtensions","rHdrExt","getLocalCandidates","createAnswer","mediaSectionsInOffer","localTrack","getAudioTracks","getVideoTracks","hasRtx","reducedSize","candidateString","trim","selector","MediaStreamTrack","senderOrReceiver","promises","all","allStats","Map","stats","stat","set","ortcObjectName","obj","nativeGetstats","apply","nativeStats","mapStats","inboundrtp","outboundrtp","candidatepair","localcandidate","remotecandidate","methods","nativeMethod","args","2","blob","line","parts","part","substring","relatedAddress","relatedPort","tcpType","toUpperCase","parseIceOptions","parseRtpMap","parsed","writeRtpMap","parseExtmap","writeExtmap","headerExtension","preferredId","parseFmtp","kv","writeFmtp","parseRtcpFb","writeRtcpFb","parseSsrcMedia","sp","colon","attribute","parseFingerprint","algorithm","fingerprints","setupType","fp","iceParameters","password","mline","rtpmapline","fmtps","maxptime","extension","secondarySsrc","encodingParameters","hasRed","hasUlpfec","ssrcs","primarySsrc","flows","encParam","codecPayloadType","fec","mechanism","bandwidth","maxBitrate","remoteSsrc","rsize","mux","spec","planB","sessId","sessVer","parseMLine","fmt","parseOLine","sessionVersion","netType","addressType","address","3","global","adapterFactory","./adapter_factory.js","4","utils","dependencies","opts","options","shimChrome","shimFirefox","shimEdge","shimSafari","logging","browserDetails","detectBrowser","chromeShim","edgeShim","firefoxShim","safariShim","commonShim","adapter","extractVersion","disableLog","disableWarnings","shimPeerConnection","browserShim","shimCreateObjectURL","shimGetUserMedia","shimMediaStream","shimSourceObject","shimOnTrack","shimAddTrackRemoveTrack","shimGetSendersWithDtmf","shimRTCIceCandidate","shimMaxMessageSize","shimSendThrowTypeError","shimRemoveStream","shimReplaceTrack","shimRTCIceServerUrls","shimCallbacksAPI","shimLocalStreamsAPI","shimRemoteStreamsAPI","shimTrackEventTransceiver","shimCreateOfferLegacy","./chrome/chrome_shim","./common_shim","./edge/edge_shim","./firefox/firefox_shim","./safari/safari_shim","./utils","5","webkitMediaStream","wrapPeerConnectionEvent","_ontrack","origSetRemoteDescription","_ontrackpoly","te","shimSenderWithDtmf","dtmf","_dtmf","createDTMFSender","_pc","_senders","origAddTrack","origRemoveTrack","origAddStream","origRemoveStream","origGetSenders","senders","URL","HTMLMediaElement","_srcObject","src","revokeObjectURL","createObjectURL","shimAddTrackRemoveTrackWithNative","_shimmedLocalStreams","DOMException","existingSenders","newSenders","newSender","origGetLocalStreams","nativeStreams","_reverseStreams","_streams","newStream","replaceInternalStreamId","internalId","externalStream","internalStream","replace","RegExp","oldStream","isLegacyCall","origSetLocalDescription","replaceExternalStreamId","origLocalDescription","getOwnPropertyDescriptor","isLocal","hasTrack","webkitRTCPeerConnection","pcConfig","pcConstraints","iceTransports","generateCertificate","OrigPeerConnection","newIceServers","deprecated","origGetStats","fixChromeStats_","response","standardReport","reports","standardStats","names","makeMapStats","promise","nativeAddIceCandidate","../utils.js","./getusermedia","6","constraintsToChrome_","cc","ideal","exact","max","oldname_","charAt","oc","mix","advanced","shimConstraints_","constraints","func","audio","remap","b","video","face","facingMode","matches","getSupportedFacingModeLies","mediaDevices","getSupportedConstraints","enumerateDevices","devices","dev","label","deviceId","shimError_","PermissionDeniedError","PermissionDismissedError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","TabCaptureError","ScreenCaptureError","DeviceCaptureError","constraint","constraintName","getUserMedia","onSuccess","onError","webkitGetUserMedia","getUserMediaPromise_","kinds","getSources","device","groupId","echoCancellation","origGetUserMedia","cs","7","NativeRTCIceCandidate","nativeCandidate","parsedCandidate","augmentedCandidate","nativeCreateObjectURL","nativeRevokeObjectURL","newId","delete","dsc","nativeSetAttribute","setAttribute","RTCSctpTransport","_sctp","remoteIsFirefox","canSendMaxMessageSize","mLine","maxMessageSize","isFirefox","getRemoteFirefoxVersion","canSendMMS","remoteMMS","getMaxMessageSize","Number","POSITIVE_INFINITY","sctp","origCreateDataChannel","createDataChannel","dataChannel","origDataChannelSend","byteLength","8","shimRTCPeerConnection","origMSTEnabled","ev","RTCDtmfSender","RTCDTMFSender","replaceTrack","setTrack","../utils","rtcpeerconnection-shim","9","10","RTCTrackEvent","mozSrcObject","mozRTCPeerConnection","newServer","mozRTCSessionDescription","mozRTCIceCandidate","modernStatsTypes","nativeGetStats","onSucc","onErr","11","InternalError","SecurityError","The operation is insecure.","getUserMedia_","constraintsToFF37_","mozGetUserMedia","orgEnumerateDevices","nativeGetUserMedia","getSettings","nativeGetSettings","applyConstraints","nativeApplyConstraints","12","_localStreams","getStreamById","_remoteStreams","_addTrack","tracks","_onaddstream","_onaddstreampoly","failureCallback","withCallback","cb","errcb","RTCTransceiver","origCreateOffer","audioTransceiver","getTransceivers","setDirection","addTransceiver","videoTransceiver","13","logDisabled_","deprecationWarnings_","uastring","expr","pos","eventNameToWrap","wrapper","proto","nativeAddEventListener","nativeEventName","wrappedCallback","_eventMap","nativeRemoveEventListener","unwrappedCb","bool","oldMethod","newMethod","ZegoPublish","waitingAnswerTimeInterval","waitingICETimer","waitingAnswerTimer","publishQualityList","lastPublishStats","qualitySeq","videoInfo","offerSeq","qualityCount","publishStateUpdateError","resetPublish","clearPublishQualityTimer","clearTryPublishTimer","startPublish","localStream","onCreatePublishSessionSuccess","videoTracks_1","audioTracks_1","onRecvMediaDescription","updateBandwidthRestriction","modifier","stopPublish","setPublishQualityTimer","checkPublishConnectionFailedState","onGetRemoteOfferSucceses","answerDescription","shouldRetryPublish","startRetryPublish","tryStartPublish","getPublishStats","audioBytesSent","videoBytesSent","framesEncoded","framesSent","publishData","audioBitrate","bytesSent","uploadPublishQuality","ZegoPreview","localVideo","previewSuc","enableMicrophone","enable","enableCamera","getMediaStreamConstraints","mediaStreamConfig","mediaStreamConstraints","audioInput","videoQuality","horizontal","videoInput","startPreview","externalMediaStream","externalCapture","captureStream","stopPreview","ZegoDataReport","dataStatistics","abs_time","now","time_consumed","events","msg_ext","event_name","extInfo","__assign","addEventInfo","itemType","reportInfo","itemtype","zego_datareport_1","zego_preview_1","zego_publish_1","zego_signal_1","zego_play_web_1","ZegoStreamCenterWeb","playerList","publisherList","qualityTimerInterval","previewVideoList","signalList","getAllInUseUrl","serverUrls","onDisconnectHandle","signalInfo","publishConnectedList","publish","publisher","playConnectedList","player","stopSignalHeartbeat","onSignalDisconnected","setQualityMonitorCycle","timeInMs","onUpdateHeartBeartIntervalHandle","startSignalHeartbeat","preview","checkPreivew","removePreview","setPublishStateStart","getTotalStreamId","_streamid","retryCount","testStreamId","preferPublishSourceType","totalStreamid","connectPublishServer","updateWaitingList","isPublish","publishWaitingList","playWaitingList","publishStream","connetWithReuseSignalServer","checkPublish","checkPublisher","getTokenSuccess","shouldRetry","retryServerUrl","removeStreamFromSignal","setPlayStreamAudioOutput","setPublishStreamAudioOutput","publishCallback","playCallback","setPlayStateStart","currentPlaySourceType","connectPlayServer","checkPlay","checkPlayer","playStream","deleteSignal","publishStreamId","playStreamId","checkSignalHeartbeat","streamUrl","D","Logger","logUploadTimer","logUploadInterval","logCache","logCacheSend","logCacheMax","disable","logRemoteLevel","userName","logType","openWebSocketLogServer","https","openHttpsLogServer","stopWebSocketServer","SendHttpsLog","stopHttpsServer","dataItem","logReportParamList","RemoteLog","values","_i","logParamList","level","force","RemoteWebSocketLog","RemoteHttpsLog","logBefore","logInfo","stringTime","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","zego_logger_1","LoggerWeb","uploadData","xmlhttp","XMLHttpRequest","onreadystatechange","status","responseText","timeInterval","open","zego_logger_webrtc_1","zego_streamCenter_web_1","ZegoClient","_a","canRequestAudioTrack","origin","screenStreamFrom","setLocalAudioOutput","setPlayAudioOutput","setCustomSignalUrl","signalUrl","signals","startScreenShotChrome","screenShotReady","postMessage","text","startScreenShotFirFox","mediaSource","screenShotStream","stopScreenShot","urls_m3u8","chromeMediaSource","chromeMediaSourceId","maxWidth","screen","maxHeight","enumDevices","deviceInfoCallback","deviceInfos","microphone","speaker","camera","deviceInfo","microphones","speakers","cameras","location"],"mappings":"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","file":"jZego-rtc.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 23);\n","import {ZegoSignal} from \"./zego.signal\";\nimport {ZegoPlayWeb} from \"../webrtc/zego.play.web\";\n\nexport enum ENUM_LOG_LEVEL { debug = 0, info = 1, warn = 2, error = 3, report = 99, disable = 100 };\n\nexport enum ENUM_REMOTE_TYPE {disable, websocket, https};\n\n\n\nexport interface Config {\n        appid: number //\tappid\t数值\n        server: string\t//小程序服务器地址\t字符串\n        idName: string\t//用户id\t字符串\n        nickName: string\t//用户昵称\t字符串\n        logLevel: ENUM_LOG_LEVEL//本地log级别 0:debug 1:info 2:warn 3:error 98:report 100:disable\t数值\n        logUrl: string\t//远程log服务器地址 websocket地址\t字符串\n        audienceCreateRoom: boolean\t//观众是否可以创建房间\t布尔值\n        remoteLogLevel:ENUM_LOG_LEVEL\n}\n\nexport const PROTO_VERSION = \"1.0.3\";\n\n\nexport class ListNode {\n        _id: number = null;\n        _data: any;\n        next: ListNode = null;\n        prev: ListNode = null;\n\n        constructor(id: number = null, data: any = null) {\n                this._id = id;\n                this._data = data;\n        }\n\n\n        set id(id: number) {\n                this._id = id;\n        }\n\n        get id() {\n                return this._id;\n        }\n\n        set data(data: any) {\n                this._data = data;\n        }\n\n        get data() {\n                return this._data;\n        }\n\n        hasNext() {\n                return this.next && this.next.id;\n        }\n\n\n        hasPrev() {\n                return this.prev && this.prev.id;\n        }\n\n}\n\nexport class LinkedList {\n        //initialize end buffer nodes\n        start = new ListNode();\n        end = new ListNode();\n\n        //initialize counters\n        _idCounter = 0;\n        _numNodes = 0;\n\n        constructor() {\n                //initialize node pointers\n                this.start.next = this.end;\n                this.start.prev = null;\n                this.end.prev = this.start;\n                this.end.next = null;\n        }\n\n        /**\n         *   Inserts a node before another node in the linked list\n         *   @param {Node} toInsertBefore\n         *   @param {Node} node\n         */\n        insertBefore(toInsertBefore: ListNode, data: any) {\n                let newNode = new ListNode(this._idCounter, data);\n\n                newNode.next = toInsertBefore;\n                newNode.prev = toInsertBefore.prev;\n\n                toInsertBefore.prev.next = newNode;\n                toInsertBefore.prev = newNode;\n\n                ++this._idCounter;\n                ++this._numNodes;\n                return newNode;\n        }\n\n        /**\n         *   Adds data wrapped in a Node object to the end of the linked list\n         *   @param {object} data\n         */\n        addLast(data: any) {\n                return this.insertBefore(this.end, data);\n        }\n\n        /**\n         *   Alias for addLast\n         *   @param {object} data\n         */\n        add(data: any) {\n                return this.addLast(data);\n        }\n\n        /**\n         *   Gets and returns the first node in the linked list or null\n         *   @return {Node/null}\n         */\n        getFirst() {\n                if (this._numNodes === 0) {\n                        return null;\n                } else {\n                        return this.start.next;\n                }\n        }\n\n        /**\n         *   Gets and returns the last node in the linked list or null\n         *   @return {Node/null}\n         */\n        getLast() {\n                if (this._numNodes === 0) {\n                        return null;\n                } else {\n                        return this.end.prev;\n                }\n        }\n\n        /**\n         *   Gets and returns the size of the linked list\n         *   @return {number}\n         */\n        size() {\n                return this._numNodes;\n        }\n\n        /**\n         *   (Internal) Gets and returns the node at the specified index starting from the first in the linked list\n         *   Use getAt instead of this function\n         *   @param {number} index\n         */\n        getFromFirst(index) {\n                let count = 0, temp = this.start.next;\n                if (index >= 0) {\n                        while (count < index && temp !== null) {\n                                temp = temp.next;\n                                ++count;\n                        }\n                } else {\n                        temp = null;\n                }\n\n                if (temp === null) {\n                        throw 'Index out of bounds.';\n                }\n\n                return temp;\n        }\n\n        /**\n         *   Gets and returns the Node at the specified index in the linked list\n         *   @param {number} index\n         */\n        get(index) {\n                let temp = null;\n\n                if (index === 0) {\n                        temp = this.getFirst();\n                } else if (index === this._numNodes - 1) {\n                        temp = this.getLast();\n                } else {\n                        temp = this.getFromFirst(index);\n                }\n\n                return temp;\n        }\n\n        /**\n         *   Removes and returns node from the linked list by rearranging pointers\n         *   @param {Node} node\n         *   @return {Node}\n         */\n        remove(node) {\n                node.prev.next = node.next;\n                node.next.prev = node.prev;\n\n                --this._numNodes;\n\n                return node;\n        }\n\n        /**\n         *   Removes and returns the first node in the linked list if it exists, otherwise returns null\n         *   @return {Node/null}\n         */\n        removeFirst() {\n                let temp = null;\n\n                if (this._numNodes > 0) {\n                        temp = this.remove(this.start.next);\n                }\n\n                return temp;\n        }\n\n        /**\n         *   Removes and returns the last node in the linked list if it exists, otherwise returns null\n         *   @return {Node/null}\n         */\n        removeLast() {\n                let temp = null;\n\n                if (this._numNodes > 0) {\n                        temp = this.remove(this.end.prev);\n                }\n\n                return temp;\n        }\n\n        /**\n         *   Removes all nodes from the list\n         */\n        removeAll() {\n                this.start.next = this.end;\n                this.end.prev = this.start;\n                this._numNodes = 0;\n                this._idCounter = 0;\n        }\n\n        /**\n         *    Iterates the list calling the given fn for each node\n         *    @param {function} fn\n         */\n        each(iterator) {\n                let temp = this.start;\n\n                while (temp.hasNext()) {\n                        temp = temp.next;\n                        iterator(temp);\n                }\n        }\n\n        find(iterator) {\n                let temp = this.start,\n                        found = false,\n                        result = null;\n\n                while (temp.hasNext() && !found) {\n                        temp = temp.next;\n                        if (iterator(temp)) {\n                                result = temp;\n                                found = true;\n                        }\n                }\n\n                return result;\n        }\n\n        map(iterator) {\n                let temp = this.start,\n                        results = [];\n\n                while (temp.hasNext()) {\n                        temp = temp.next;\n                        if (iterator(temp)) {\n                                results.push(temp);\n                        }\n                }\n\n                return results;\n        }\n\n        /**\n         *    Alias for addLast\n         *    @param {object} data\n         */\n        push(data) {\n                return this.addLast(data);\n        }\n\n        /**\n         *    Performs insertBefore on the first node\n         *    @param {object} data\n         */\n        unshift(data) {\n                if (this._numNodes > 0) {\n                        this.insertBefore(this.start.next, data);\n                } else {\n                        this.insertBefore(this.end, data);\n                }\n        }\n\n        /**\n         *    Alias for removeLast\n         */\n        pop() {\n                return this.removeLast();\n        }\n\n        /**\n         *    Alias for removeFirst()\n         */\n        shift() {\n                return this.removeFirst();\n        }\n}\n\n\nexport const sdkErrorList = {\n        SUCCESS: {\n                code: \"ZegoClient.Success\",\n                msg: \"success.\"\n        },\n        PARAM: {\n                code: \"ZegoClient.Error.Param\",\n                msg: \"input error.\"\n        },\n        HEARTBEAT_TIMEOUT: {\n                code: \"ZegoClient.Error.Timeout\",\n                msg: \"heartbeat timeout.\"\n        },\n        LOGIN_TIMEOUT: {\n                code: \"ZegoClient.Error.Timeout\",\n                msg: \"login timeout.\"\n        },\n        SEND_MSG_TIMEOUT: {\n                code: \"ZegoClient.Error.Timeout\",\n                msg: \"send customsg timeout.\"\n        },\n        RESET_QUEUE: {\n                code: \"ZegoClient.Error.Timeout\",\n                msg: \"msg waiting ack is clear when reset.\"\n        },\n        LOGIN_DISCONNECT: {\n                code: \"ZegoClient.Error.Network\",\n                msg: \"network is broken and login fail.\"\n        },\n        KICK_OUT: {\n                code: \"ZegoClient.Error.Kickout\",\n                msg: \"kickout reason=\"\n        },\n        UNKNOWN: {\n                code: \"ZegoClient.Error.Unknown\",\n                msg: \"unknown error.\"\n        },\n        FREQ_LIMITED: {\n                code: \"ZegoClient.Error.requencyLimited\",\n                msg: \"Frequency Limited.\"\n        }\n        // SIGNAL_DISCONNECT: {\n        //     code: \"ZegoClient.Error.Timeout\",\n        //     msg: \"WebRTC Signal broken\"\n        // }\n};\n\nexport interface DataStatisticsItemEvent{\n        event: string,\n        abs_time: number,\n        time_consumed?: number,\n        msg_ext?:{[index:string]:string|number}\n}\n\nexport interface DataStatisticsItem {\n        abs_time: number,\n        time_consumed: number,\n        error: number,\n        events: DataStatisticsItemEvent[],\n        msg_ext?: any,\n        itemtype?: string\n};\n\n\nexport interface DataStatistics {\n        [index: string]: DataStatisticsItem\n}\n\nexport enum ENUM_SIGNAL_STATE {disconnected, connecting, connected};\n\nexport const ENUM_RESOLUTION_TYPE = {\n        LOW: {\n                width: 240,\n                height: 320,\n                frameRate: 15,\n                bitRate: 300\n        },\n        MEDIUM: {\n                width: 480,\n                height: 640,\n                frameRate: 15,\n                bitRate: 800\n        },\n        HIGH: {\n                width: 720,\n                height: 1280,\n                frameRate: 20,\n                bitRate: 1500\n        }\n};\n\nexport const ENUM_RETRY_STATE = {\n        didNotStart: 0,\n        retrying: 1,\n        finished: 2\n};\n\nexport const ENUM_PUBLISH_STATE = {\n        start: 0,\n        waitingSessionRsp: 1, //等待Session回包\n        waitingOffserRsp: 2, //等待offser回包\n        waitingServerAnswer: 3, //等待server answer\n        waitingServerICE: 4, //等待candidate\n        connecting: 5, //等待candidate连接\n        publishing: 6, //开始推流\n        stop: 7,\n        didNotStart:8\n};\n\n\nexport const ENUM_PLAY_STATE = {\n        start: 0,\n        waitingSessionRsp: 1,\n        waitingOffserRsp: 2,\n        waitingServerAnswer: 3,\n        waitingServerICE: 4,\n        connecting: 5,\n        playing: 6,\n        stop: 7,\n        didNotStart:8\n};\n\nexport interface VideoInfo {\n        width: number,\n        height: number,\n        frameRate: number,\n        bitRate: number\n}\n\nexport const ENUM_CONNECT_STATE = {disconnect: 0, connecting: 1, connected: 2};\n\nexport const  MAX_TRY_CONNECT_COUNT = 3;\nexport const SEND_MSG_RESET = 2;\nexport const  SEND_MSG_TIMEOUT = 1;\nexport const MAX_TRY_HEARTBEAT_COUNT = 5;\n\n\n\nexport const ENUM_PUBLISH_STREAM_STATE = {\n        waiting_url: 1,\n        tryPublish: 2,\n        update_info: 3,\n        publishing: 4,\n        stop: 5\n};\n\nexport const  ENUM_STREAM_SUB_CMD = {\n        liveNone: 0,\n        liveBegin: 2001,\n        liveEnd: 2002,\n        liveUpdate: 2003\n};\n\nexport  const ENUM_STREAM_UPDATE_TYPE = {\n        added: 0,\n        deleted: 1\n};\n\n//运行状态\nexport  enum ENUM_RUN_STATE   {\n        logout,\n        trylogin,\n        login\n};\n\nexport const ENUM_PUBLISH_STATE_UPDATE = {\n        start: 0,\n        error: 1,\n        retry: 2\n};\n\nexport const ENUM_PLAY_STATE_UPDATE = {\n        start: 0,\n        error: 1,\n        retry: 2\n};\n\nexport interface StreamQuality {\n  videoBitrate:number,//\t视频码率\t数值\n  audioBitrate:number,//\t音频码率\t数值\n  videoFPS:number,//\t帧率\t数值\n  frameHeight:number,//\t视频高度\t数值\n  frameWidth:number,//\t视频宽度\t数值\n  videoTransferFPS:number,//\t传输帧率\t数值\n}\n\nexport interface  StreamInfo{\n  stream_id:string,//\t流Id\t字符串\n  anchor_id_name:string,\t//流对应的用户Id\t字符串\n  anchor_nick_name:string,\t//流对应的用户昵称\t字符串\n  extra_info:string,\t//流附加信息\t字符串\n}\n\n\nexport interface ERRO {\n     code:string,\n     msg:string\n}\n\nexport const MAX_TRY_LOGIN_COUNT = 5; //最大重试登录次数\nexport const TRY_LOGIN_INTERVAL = [2000, 2000, 3000, 3000, 4000]; //重试登录的频率\nexport const MINIUM_HEARTBEAT_INTERVAL = 3000; //最小心跳尝试间隔\nexport const ENUM_STREAM_UPDATE_CMD = {\n  added: 12001,\n  deleted: 12002,\n  updated: 12003\n};\nexport const SERVER_ERROR_CODE = 10000;\nexport const MIXSTREAM_ERROR_CODE = 10000;\n\nexport interface WaitingInfo {\n  streamId: string,\n  success: Function,\n  error: Function\n}\n\nexport interface SignalInfo {\n  signal: ZegoSignal,\n  state: number,\n  publishWaitingList: WaitingInfo[],\n  playWaitingList: WaitingInfo[],\n  publishConnectedList: string[],\n  playConnectedList: string[],\n  tokenInfo: any\n}\n\n\nexport interface PlayerInfo {\n  player: ZegoPlayWeb,\n  remoteVideo: HTMLElement,\n  audioOutput: string,\n  signal: ZegoSignal,\n  serverUrls: string[],\n  retryCount: number,\n  playOption:PlayOption\n}\n\nexport enum QUALITYLEVEL   {\n  low=1,\n  stantard=2,\n  hight=3,\n  custome=4\n}\n\nexport interface MediaStreamConstraints {\n  \n  audio:boolean,\n  audioInput:string,\n  video:boolean,\n  facingMode?:string\n  videoInput:string\n  videoQuality:QUALITYLEVEL,\n  horizontal:boolean,\n  externalCapture?:boolean,\n  height?:number,\n  frameRate?:number,\n  width?:number,\n  bitRate?:number,\n  externalMediaStream?:MediaStream\n}\n\n\nexport interface DeviceInfo {\n  label:string\n  deviceId:string\n}\n\n\nexport const ENUM_SIGNAL_SUB_CMD = {\n  none: 0,\n  joinLiveRequest: 1001,\n  joinLiveResult: 1002,\n  joinLiveInvite: 1003,\n  joinLiveStop: 1004\n};\n\nexport const ENUM_PUSH_SIGNAL_SUB_CMD = {\n  none: 0,\n  pushJoinLiveRequest: 11001,\n  pushJoinLiveResult: 11002,\n  pushJoinLiveInvite: 11003,\n  pushJoinLiveStop: 11004\n};\n\nexport interface ChatInfo {\n        id_name:string//\t字符串\n        nick_name:string//\t用户昵称\t字符串\n        role:number//\t用户角色\t数值\n        msg_id:string//\t消息Id\t数值\n        msg_category:number//\t消息类别\t数值\n        msg_type:number//\t消息类型\t数值\n        msg_content:string//\t消息内容\t字符串\n        send_time:number//\t发送时间\t数值\n}\n\nexport interface UserInfo {\n        action:1|2//\t行为\t数值 1:进入房间 2:退出房间\n        idName:string//\t用户id\t字符串\n        nickName:string//\t用户昵称\t字符串\n        role:1|2//\t角色类型\t数值 1:主播 2:观众\n        logintime:string//\t登录时间\t字符串\n}\n\nexport interface MessageInfo {\n        idName:string//\t用户ID\t字符串\n        nickName:string//\t用户昵称\t字符串\n        messageId:string//\t消息ID\t字符串\n        category:number//\t消息分类\t数值\n        type:number//\t消息类型\t数值\n        content:string//\t消息内容\t字符串\n        time:number//\t发送消息时间\t数值\n}\n\n//拉流选择\nexport const ENUM_PLAY_SOURCE_TYPE = {\n        auto: 0,\n        ultra: 1\n};\n\n//推流选择\nexport const ENUM_DISPATCH_TYPE = {\n        cdn: 0,\n        ultra: 1\n};\n\nexport type PlayOption = {\n      playType:'audio'|'video'|'all'\n}\n","import {Config} from \"./zego.entity\";\nimport {Logger} from \"./zego.logger\";\n\nexport class ClientUtil {\n        \n        static checkConfigParam (option: Config, logger: Logger): boolean {\n                if (!option.appid) {\n                        logger.error (\"ccp.0 appid must be number\");\n                        return false;\n                }\n                \n                if (!option.server) {\n                        logger.error (\"ccp.0 server must be string and not empty\");\n                        return false;\n                }\n                \n                if (!option.idName) {\n                        logger.error (\"ccp.0 idName must be string and not empty\");\n                }\n                \n                return true;\n                \n        }\n        \n        \n        static checkLoginParam (roomid: string, token: string) {\n                return true;\n        }\n        \n        \n        static registerCallback (fName, option: { success?: Function, error?: Function }, callbackList: { [index: string]: Function }) {\n                let sf, ef;\n                if (option.success) sf = option.success;\n                if (option.error) ef = option.error;\n                callbackList[fName + \"SuccessCallback\"] = sf;\n                callbackList[fName + \"ErrorCallback\"] = ef;\n        }\n        \n        \n        static actionErrorCallback (fName: string, callbackList: { [index: string]: Function }): Function {\n                return callbackList[fName + \"ErrorCallback\"];\n        }\n        \n        // 执行成功回调函数\n        static actionSuccessCallback (fName, callbackList: { [index: string]: Function }): Function {\n                return callbackList[fName + \"SuccessCallback\"];\n        }\n        \n        \n        /**\n         错误管理\n         */\n        static getServerError (code) {\n                const serverErrorList = {\n                        1: \"parse json error.\",\n                        1001: \"login is processing.\",\n                        1002: \"liveroom request error.\",\n                        1003: \"zpush connect fail.\",\n                        1004: \"zpush handshake fail.\",\n                        1005: \"zpush login fail.\",\n                        1006: \"user login state is wrong.\",\n                        1007: \"got no zpush addr\",\n                        1008: \"token error\",\n                        1009: \"dispatch error\",\n                        2002: \"biz channel error\",\n                        1000000000: \"liveroom cmd error, result=\",\n                };\n                \n                if (code === 0) {\n                        return {\n                                code: \"ZegoClient.Success\",\n                                msg: \"success\"\n                        };\n                }\n                \n                let err = {\n                        code: \"ZegoClient.Error.Server\",\n                        msg: \"\",\n                };\n                if (code > 1000000000) {\n                        err.msg = serverErrorList[1000000000] + code;\n                } else if (!serverErrorList[code]) {\n                        err.msg = serverErrorList[code];\n                } else {\n                        err.msg = \"unknown error code:\" + code;\n                }\n                \n                return err;\n        }\n        \n        \n        static isKeepTryLogin (code: number) {\n                switch (code) {\n                        case 1002: //liveroom connect error\n                        case 1003: //zpush connect error\n                                return true;\n                        default:\n                                return false;\n                }\n        }\n        \n        \n        /*\n        *    \"msl.0\": \"ZegoClient.mergeStreamList\",\n        */\n        static mergeStreamList (logger: Logger, idName: string, oldStreamList: any[], newStreamList: any[], callbackResult) {\n                logger.debug (\"msl.0 call\");\n                let addStreamList = [];\n                let delStreamList = [];\n                let updateStreamList = [];\n                let flag;\n                \n                for (let i = 0; i < newStreamList.length; i++) {\n                        if (newStreamList[i].anchor_id_name == idName) {\n                                logger.debug (\"msl.0 have self stream added\");\n                                continue;\n                        }\n                        flag = false;\n                        for (let j = 0; j < oldStreamList.length; j++) {\n                                if (newStreamList[i].stream_id === oldStreamList[j].stream_id) {\n                                        if (newStreamList[i].extra_info !== oldStreamList[j].extra_info) {\n                                                updateStreamList.push (newStreamList[i]);\n                                        }\n                                        flag = true;\n                                        break;\n                                }\n                        }\n                        if (!flag) {\n                                addStreamList.push (newStreamList[i]);\n                        }\n                }\n                \n                for (let k = 0; k < oldStreamList.length; k++) {\n                        flag = false;\n                        for (let n = 0; n < newStreamList.length; n++) {\n                                if (newStreamList[n].anchor_id_name == idName) {\n                                        logger.debug (\"msl.0 have self stream deleted\");\n                                        continue;\n                                }\n                                \n                                if (oldStreamList[k].stream_id === newStreamList[n].stream_id) {\n                                        flag = true;\n                                        break;\n                                }\n                        }\n                        if (!flag) {\n                                delStreamList.push (oldStreamList[k]);\n                        }\n                }\n                \n                oldStreamList = newStreamList;\n                callbackResult (addStreamList, delStreamList, updateStreamList);\n                logger.debug (\"msl.0 call success\");\n        }\n        \n        \n        static checkCustomCommandParam (param: {\n                dest_id_name: string[],\n                custom_msg: string\n        }) {\n                return true;\n        }\n        \n        //生成随机数\n        static generateRandumNumber (maxNum: number) {\n                return parseInt (Math.random () * (maxNum + 1) + '', 10);\n        }\n        \n        \n        static isSupportWebrtc (): boolean {\n                const e = window['RTCPeerConnection'] || window['mozRTCPeerConnection'] || window['webkitRTCPeerConnection'],\n                            t = navigator['getUserMedia'] || navigator['webkitGetUserMedia'] ||\n                                        navigator['msGetUserMedia'] || navigator['mozGetUserMedia'] ||\n                                        navigator['mediaDevices'] && navigator['mediaDevices']['getUserMedia'],\n                            n = window['WebSocket']\n                return !!e && !!t && !!n;\n        }\n        \n        static isSupportH264 (sucCall, errCall) {\n                new RTCPeerConnection (null).createOffer ({\n                        offerToReceiveAudio: 1,\n                        offerToReceiveVideo: 1\n                }).then (desc => {\n                        if (desc && desc.sdp) {\n                                const sdplist = desc.sdp.split ('\\r\\n');\n                                const hasH264 = sdplist.some (item => {\n                                        return item.startsWith ('a=rtpmap:') && (item.indexOf ('H264/') > -1)\n                                });\n                                sucCall (hasH264);\n                        }\n                }, err => {\n                        errCall (err);\n                });\n        }\n}\n","export let playErrorList = {\n        DISPATCH_ERROR: {\n                code: \"ZegoPlayWeb.Error.Dispatch\",\n                msg: \"dispatch request error\"\n        },\n        DISPATCH_TIMEOUT: {\n                code: \"ZegoPlayWeb.Timeout.Dispatch\",\n                msg: \"dispatch request timeout\"\n        },\n        TOKEN_ERROR: {\n                code: \"ZegoPlayWeb.Error.Token\",\n                msg: \"login token error\"\n        },\n        SEND_SESSION_TIMEOUT: {\n                code: \"ZegoPlayWeb.Timeout.Session\",\n                msg: \"send session request timeout\"\n        },\n        CREATE_SESSION_ERROR: {\n                code: \"ZegoPlayWeb.Error.Session\",\n                msg: \"create session error\"\n        },\n        CREATE_OFFER_ERROR: {\n                code: \"ZegoPublish.Error.CreateOffer\",\n                msg: \"create offer error\"\n        },\n        SERVER_MEDIA_DESC_TIMEOUT: {\n                code: \"ZegoPlayWeb.Timeout.RemoteOffer\",\n                msg: \"wating server mediaDesc timeout\"\n        },\n        SET_REMOTE_DESC_ERROR: {\n                code: \"ZegoPlayWeb.Error.RemoteOffer\",\n                msg: \"other side offer error\"\n        },\n        CREATE_ANSWER_ERROR: {\n                code: \"ZegoPlayWeb.Error.CreateAnswer\",\n                msg: \"create offer error\"\n        },\n        SET_LOCAL_DESC_ERROR: {\n                code: \"ZegoPlayWeb.Error.LocalDesc\",\n                msg: \"setLocalDescription error\"\n        },\n        SEND_MEDIA_DESC_TIMEOUT: {\n                code: \"ZegoPlayWeb.Timeout.Desc\",\n                msg: \"send mediaDesc timeout\"\n        },\n        SEND_CANDIDATE_ERROR: {\n                code: \"ZegoPlayWeb.Error.Candidate\",\n                msg: \"send candidate error\"\n        },\n        SEND_CANDIDATE_TIMEOUT: {\n                code: \"ZegoPlayWeb.Timeout.Candidate\",\n                msg: \"send candidate timeout\"\n        },\n        SERVER_CANDIDATE_TIMEOUT: {\n                code: \"ZegoPlayWeb.Timeout.ServerCandidate\",\n                msg: \"waiting candidate timeout\"\n        },\n        SERVER_CANDIDATE_ERROR: {\n                code: \"ZegoPlayWeb.Error.ServerCandidate\",\n                msg: \"recv candidate error\"\n        },\n        MEDIA_CONNECTION_FAILED: {\n                code: \"ZegoPlayWeb.Error.ConnectionFailed\",\n                msg: \"ice Connection state failed\"\n        },\n        MEDIA_CONNECTION_CLOSED: {\n                code: \"ZegoPlayWeb.Error.ConnectionClosed\",\n                msg: \"ice connection state closed\"\n        },\n        SESSION_CLOSED: {\n                code: \"ZegoPlayWeb.Error.SessionClosed\",\n                msg: \"server session closed\"\n        },\n        WEBSOCKET_ERROR: {\n                code: \"ZegoPlayWeb.Error.SocketError\",\n                msg: \"network error\"\n        }\n};\n\nexport let publishErrorList = {\n        DISPATCH_ERROR: {\n                code: \"ZegoPublish.Error.Dispatch\",\n                msg: \"dispatch request error\"\n        },\n        DISPATCH_TIMEOUT: {\n                code: \"ZegoPublish.Timeout.Dispatch\",\n                msg: \"dispatch request timeout\"\n        },\n        TOKEN_ERROR: {\n                code: \"ZegoPublish.Error.Token\",\n                msg: \"login token error\"\n        },\n        SEND_SESSION_TIMEOUT: {\n                code: \"ZegoPublish.Timeout.Session\",\n                msg: \"send session request timeout\"\n        },\n        CREATE_SESSION_ERROR: {\n                code: \"ZegoPublish.Error.Session\",\n                msg: \"create session error\"\n        },\n        CREATE_OFFER_ERROR: {\n                code: \"ZegoPublish.Error.CreateOffer\",\n                msg: \"create offer error\"\n        },\n        SET_LOCAL_DESC_ERROR: {\n                code: \"ZegoPublish.Error.LocalDesc\",\n                msg: \"setLocalDescription error\"\n        },\n        SEND_MEDIA_DESC_TIMEOUT: {\n                code: \"ZegoPublish.Timeout.Desc\",\n                msg: \"send mediaDesc timeout\"\n        },\n        SERVER_MEDIA_DESC_TIMEOUT: {\n                code: \"ZegoPublish.Timeout.ServerAnswer\",\n                msg: \"waiting server mediaDesc timeout\"\n        },\n        SERVER_MEDIA_DESC_ERROR: {\n                code: \"ZegoPublish.Error.ServerAnswer\",\n                msg: \"server mediaDesc type error\"\n        },\n        SET_REMOTE_DESC_ERROR: {\n                code: \"ZegoPublish.Error.RemoteDesc\",\n                msg: \"other side offer error\"\n        },\n        SEND_CANDIDATE_TIMEOUT: {\n                code: \"ZegoPublish.Timeout.Candidate\",\n                msg: \"sendIceCandidate error\"\n        },\n        SERVER_CANDIDATE_TIMEOUT: {\n                code: \"ZegoPublish.Timeout.ServerCandidate\",\n                msg: \"waiting candidate timeout\"\n        },\n        SERVER_CANDIDATE_ERROR: {\n                code: \"ZegoPublish.Error.ServerCandidate\",\n                msg: \"recv candidate error\"\n        },\n        SESSION_CLOSED: {\n                code: \"ZegoPublish.Error.SessionClosed\",\n                msg: \"server session closed\"\n        },\n        MEDIA_CONNECTION_FAILED: {\n                code: \"ZegoPublish.Error.IConnectionFailed\",\n                msg: \"Iice Connection state failed\"\n        },\n        MEDIA_CONNECTION_CLOSED: {\n                code: \"ZegoPublish.Error.ConnectionClosed\",\n                msg: \"ice connection state closed\"\n        },\n        WEBSOCKET_ERROR: {\n                code: \"ZegoPublish.Error.SocketError\",\n                msg: \"network error\"\n        }\n};\n\nexport let ENUM_PUBLISH_STATE_UPDATE = {\n        start: 0,\n        error: 1,\n        retry: 2\n};\n\nexport let ENUM_PLAY_STATE_UPDATE = {\n        start: 0,\n        error: 1,\n        retry: 2,\n        stop: 3\n};\n\nexport let ENUM_RETRY_STATE = {\n        didNotStart: 0,\n        retrying: 1,\n        finished: 2\n};\n\nexport let getSeq = (function () {\n        let seq = 1;\n\n        return function () {\n                return seq++;\n        };\n})();","import {SocketCenter} from \"./socketCenter\";\nimport {StateCenter} from \"./stateCenter\";\nimport {\n        ENUM_PUSH_SIGNAL_SUB_CMD,\n        ENUM_SIGNAL_SUB_CMD,\n        ERRO\n} from \"../zego.entity\";\nimport {Logger} from \"../zego.logger\";\n\nexport class LiveHandler {\n        \n        private logger: Logger;\n        private socketCenter: SocketCenter;\n        private stateCenter: StateCenter;\n        \n        constructor (logger: Logger, stateCenter: StateCenter, socketCenter: SocketCenter) {\n                this.logger = logger;\n                this.socketCenter = socketCenter;\n                this.stateCenter = stateCenter;\n                \n        }\n        \n        /*\n        *    \"zb.lh.rjl\": \"ZegoClient.base.LiveHandler.requestJoinLive\",\n         */\n        requestJoinLive (destIdName: string, success: (seq: number) => void, error: (err: ERRO, seq: number) => void,\n                         resultCallback: (result: boolean, fromUserId: string, fromUserName: string) => void): boolean {\n                this.logger.debug (\"zb.lh.rjl call\");\n                let requestId = this.stateCenter.getRequestId ();\n                let signalCmd = this.stateCenter.getSignalCmdContent (requestId, destIdName);\n                if (resultCallback == undefined) {\n                        return false;\n                }\n                \n                this.stateCenter.joinLiveCallbackMap[requestId] = resultCallback;\n                this.sendSignalCmd (ENUM_SIGNAL_SUB_CMD.joinLiveRequest, signalCmd, destIdName, success, error);\n                return true;\n        }\n        \n        \n        \n        /*\n       *    \"zb.lh.ijl\": \"ZegoClient.base.LiveHandler.inviteJoinLive\",\n        */\n        inviteJoinLive (destIdName: string, success: (seq: number) => void, error: (err: ERRO, seq: number) => void,\n                        resultCallback: (result: boolean, fromUserId: string, fromUserName: string) => void): boolean {\n                this.logger.debug (\"zb.lh.ijl call\");\n                let requestId = this.stateCenter.getRequestId ();\n                let signalCmd = this.stateCenter.getSignalCmdContent (requestId, destIdName);\n                if (resultCallback == undefined) {\n                        return false;\n                }\n                \n                this.stateCenter.joinLiveCallbackMap[requestId] = resultCallback;\n                this.sendSignalCmd (ENUM_SIGNAL_SUB_CMD.joinLiveInvite, signalCmd, destIdName, success, error);\n                \n                return true;\n        }\n        \n        \n        \n        \n        /*\n      *    \"zb.lh.ejl\": \"ZegoClient.base.LiveHandler.endJoinLive\",\n       */\n        endJoinLive (destIdName: string, success: (seq: number) => void, error: (err: ERRO, seq: number) => void): boolean {\n                \n                this.logger.debug (\"zb.lh.ejl call\");\n                \n                let requestId = this.stateCenter.getRequestId ();\n                \n                let signalCmd = this.stateCenter.getSignalCmdContent (requestId, destIdName);\n                \n                this.sendSignalCmd (ENUM_SIGNAL_SUB_CMD.joinLiveStop, signalCmd, destIdName, success, error);\n                \n                return true;\n        }\n        \n        \n        \n        /*\n      *    \"zb.lh.rpjl\": \"ZegoClient.base.LiveHandler.respondJoinLive\",\n       */\n        respondJoinLive (requestId: string, respondResult: boolean, success?: (seq: number) => void, error?: (err: ERRO, seq: number) => void): boolean {\n                \n                this.logger.debug (\"zb.lh.rpjl call\");\n                \n                let dest_id_name = this.stateCenter.joinLiveRequestMap[requestId];\n                if (!dest_id_name) {\n                        this.logger.info (\"zb.lh.rpjl no dest id name\");\n                        return false;\n                }\n                \n                let result = 0;\n                if (respondResult === true)\n                        result = 1;\n                \n                let signalCmd = this.stateCenter.getSignalCmdContent (requestId, dest_id_name, result);\n                \n                this.sendSignalCmd (ENUM_SIGNAL_SUB_CMD.joinLiveResult, signalCmd, dest_id_name, success, error);\n                \n                delete this.stateCenter.joinLiveRequestMap[requestId];\n                \n                return true;\n        }\n        \n        \n        \n        \n        /*\n        *    \"zb.lh.ssc\": \"ZegoClient.base.LiveHandler.sendSignalCmd\",\n       */\n        //连麦信令\n        sendSignalCmd (cmd: number, signalMsg: string, dest_id_name: string, success, error) {\n                \n                this.logger.debug (\"zb.lh.ssc call\");\n                \n                if (!this.stateCenter.isLogin ()) {\n                        this.logger.error (\"zb.lh.ssc state error\");\n                        return;\n                }\n                \n                this.logger.debug (\"zb.lh.ssc send signal cmd \" + cmd);\n                \n                const bodyData = {\n                        \"sub_cmd\": cmd,\n                        \"signal_msg\": signalMsg,\n                        \"dest_id_name\": [dest_id_name]\n                };\n                \n                this.socketCenter.sendMessage (\"signal\", bodyData, success, error);\n                this.logger.info (\"zb.lh.ssc call success\");\n        }\n        \n        \n        \n        \n        \n        /*\n       *    \"zb.lh.hpsm\": \"ZegoClient.base.LiveHandler.handlePushSignalMsg\",\n       */\n        // 连麦信令push\n        handlePushSignalMsg (msg) {\n                if (!this.stateCenter.isLogin ()) {\n                        this.logger.warn (\"zb.lh.hpsm not login\");\n                        return;\n                }\n                \n                let signalMsg = JSON.parse (msg.body.signal_msg);\n                \n                this.logger.debug (\"zb.lh.hpcm hpsm= \", signalMsg);\n                \n                switch (msg.body.sub_cmd) {\n                        case ENUM_PUSH_SIGNAL_SUB_CMD.pushJoinLiveRequest:\n                                this.handlePushJoinLiveRequestMsg (signalMsg);\n                                break;\n                        case ENUM_PUSH_SIGNAL_SUB_CMD.pushJoinLiveResult:\n                                this.handlePushJoinLiveResultMsg (signalMsg);\n                                break;\n                        case ENUM_PUSH_SIGNAL_SUB_CMD.pushJoinLiveInvite:\n                                this.handlePushJoinLiveInviteMsg (signalMsg);\n                                break;\n                        case ENUM_PUSH_SIGNAL_SUB_CMD.pushJoinLiveStop:\n                                this.handlePushJoinLiveStopMsg (signalMsg);\n                }\n                \n                this.logger.debug (\"zb.lh.hpsm call end\");\n        }\n        \n      \n        /*\n        *    \"zb.lh.hpjlrm\": \"ZegoClient.base.LiveHandler.handlePushJoinLiveRequestMsg\",\n       */\n        //请求连麦push\n        private handlePushJoinLiveRequestMsg (signalMsg) {\n                \n                let requestId = signalMsg.request_id;\n                \n                if (typeof requestId !== \"string\") {\n                        this.logger.error (\"zb.lh.hpjlrm no requestId\");\n                        return;\n                }\n                \n                let dest_id_name = signalMsg.from_userid;\n                \n                if (typeof dest_id_name !== \"string\") {\n                        this.logger.error (\"zb.lh.hpjlrm no from user\");\n                        return;\n                }\n                this.stateCenter.joinLiveRequestMap[requestId] = dest_id_name;\n                \n                this.logger.info (\"zb.lh.hpjlrm onRecvJoinLiveRequest \" + dest_id_name);\n                \n                this.onRecvJoinLiveRequest (requestId, signalMsg.from_userid, signalMsg.from_username, signalMsg.room_id);\n        }\n        \n        onRecvJoinLiveRequest (requestId: string, from_userid: string, from_username: string, roomid: string) {\n        }\n        \n        \n        \n        /*\n        *    \"zb.lh.hpjlim\": \"ZegoClient.base.LiveHandler.handlePushJoinLiveInviteMsg\",\n        */\n        private handlePushJoinLiveInviteMsg (signalMsg) {\n                \n                let requestId = signalMsg.request_id;\n                \n                if (typeof requestId !== \"string\") {\n                        this.logger.error (\"zb.lh.hpjlim no requestId\");\n                        return;\n                }\n                \n                let dest_id_name = signalMsg.from_userid;\n                \n                if (typeof dest_id_name !== \"string\") {\n                        this.logger.error (\"zb.lh.hpjlim no from user\");\n                        return;\n                }\n                \n                this.stateCenter.joinLiveRequestMap[requestId] = dest_id_name;\n                \n                this.logger.info (\"zb.lh.hpjlim onRecvInviteJoinLiveRequest \" + dest_id_name);\n                \n                this.onRecvInviteJoinLiveRequest (requestId, signalMsg.from_userid, signalMsg.from_username, signalMsg.room_id);\n        }\n        \n        onRecvInviteJoinLiveRequest (requestId: string, from_userid: string, from_username: string, roomid: string) {\n        }\n        \n        \n        \n        /*\n        *    \"zb.lh.hpjlim\": \"ZegoClient.base.LiveHandler.handlePushJoinLiveResultMsg\",\n        */\n        private handlePushJoinLiveResultMsg (signalMsg) {\n                \n                let requestId = signalMsg.request_id;\n                if (typeof requestId !== \"string\") {\n                        this.logger.error (\"zb.lh.hpjlrm no requestId\");\n                        return;\n                }\n                \n                let result = signalMsg.result;\n                if (result == undefined) {\n                        this.logger.info (\"zb.lh.hpjlrm no result\");\n                        return;\n                }\n                \n                let respondResult = result == 1 ? true : false;\n                if (this.stateCenter.joinLiveCallbackMap[requestId]) {\n                        let result_callback = this.stateCenter.joinLiveCallbackMap[requestId];\n                        if (!result_callback) {\n                                this.logger.info (\"hpjlrm.o no callback\");\n                                return;\n                        }\n                        \n                        this.logger.info (\"zb.lh.hpjlrm joinLiveRequest/invite result \" + respondResult);\n                        \n                        delete this.stateCenter.joinLiveCallbackMap[requestId];\n                        \n                        result_callback (respondResult, signalMsg.from_userid, signalMsg.from_username);\n                }\n        }\n        \n        \n        \n        \n        /*\n        *    \"zb.lh.hpjlsm\": \"ZegoClient.base.LiveHandler.handlePushJoinLiveStopMsg\",\n        */\n        private handlePushJoinLiveStopMsg (signalMsg) {\n                let requestId = signalMsg.request_id;\n                if (typeof requestId !== \"string\") {\n                        this.logger.error (\"zb.lh.hpjlsm no requestId\");\n                        return;\n                }\n                \n                this.logger.info (\"zb.lh.hpjlsm onRecvEndJoinLiveCommand \" + signalMsg.from_userid);\n                this.onRecvEndJoinLiveCommand (requestId, signalMsg.from_userid, signalMsg.from_username, signalMsg.room_id);\n        }\n        \n        onRecvEndJoinLiveCommand (requestId: string, from_userid: string, from_username: string, roomid: string) {\n        }\n        \n        \n        \n}\n","import {SocketCenter} from \"./socketCenter\";\nimport {StateCenter} from \"./stateCenter\";\nimport {\n        ChatInfo,\n         ERRO, MessageInfo, sdkErrorList\n} from \"../zego.entity\";\nimport {ClientUtil} from \"../client-util\";\nimport {Logger} from \"../zego.logger\";\n\nexport class MessageHandler {\n        \n        private logger: Logger;\n        private socketCenter: SocketCenter;\n        private stateCenter: StateCenter;\n        \n        constructor (logger: Logger, stateCenter: StateCenter, socketCenter: SocketCenter) {\n                this.logger = logger;\n                this.socketCenter = socketCenter;\n                this.stateCenter = stateCenter;\n                \n        }\n        \n        /*\n        *    \"zb.mh.scc\": \"ZegoClient.base.MessageHandler.sendCustomCommand\",\n        */\n        sendCustomCommand (dstMembers: string[], customContent: string | Object, success: (seq: number, customContent: string) => void, error: (err: ERRO, seq: number, customContent: string) => void) {\n                this.logger.debug (\"zb.mh.scc call\");\n                \n                if (!this.stateCenter.isLogin ()) {\n                        this.logger.error (\"zb.mh.scc state error\");\n                        return false;\n                }\n                \n                if (!dstMembers || dstMembers.length == 0) {\n                        this.logger.error (\"zb.mh.scc dstMembers error\");\n                        return false;\n                }\n                const customContent_send = {\n                        from_userid: this.stateCenter.idName,\n                        from_username: this.stateCenter.nickName,\n                        custom_content: customContent || ''\n                };\n                \n                const bodyData = {\n                        \"dest_id_name\": dstMembers,\n                        \"custom_msg\": JSON.stringify (customContent_send)\n                };\n                \n                if (!ClientUtil.checkCustomCommandParam (bodyData)) {\n                        this.logger.info (\"zb.mh.scc param error\");\n                        return false;\n                }\n                \n                // 发送消息\n                this.socketCenter.registerRouter ('custommsg', msg => {\n                        this.handleSendCustomMsgRsp (msg);\n                });\n                this.socketCenter.sendCustomMessage ('custommsg', bodyData, success, error);\n                this.logger.info (\"zb.mh.scc call success\");\n                return true;\n        }\n        \n        \n        \n        /*\n        *    \"zb.mh.hscmrcall\": \"ZegoClient.base.MessageHandler.handleSendCustomMsgRsp\",\n        */\n        private handleSendCustomMsgRsp (msg: any) {\n                this.logger.debug (\"zb.mh.hscmrcall\");\n                const sendDataNode = this.stateCenter.sendDataMap[msg.header.seq];\n                let sendData;\n                if (sendDataNode != null) {\n                        sendData = sendDataNode._data;\n                        if (sendData.data.header.cmd != \"custommsg\") {\n                                this.logger.error (\"zb.mh.hscmrcmd wrong\" + sendData.data.header.cmd);\n                        } else {\n                                if (msg.body.err_code === 0) {\n                                        if (sendData.success != null) {\n                                                sendData.success (msg.header.seq, sendData.data.body.custom_msg);\n                                        }\n                                } else {\n                                        if (sendData.error != null) {\n                                                sendData.error (ClientUtil.getServerError (msg.body.err_code), msg.header.seq, sendData.data.body.custom_msg);\n                                        }\n                                }\n                        }\n                        \n                        delete this.stateCenter.sendDataMap[msg.header.seq];\n                        this.stateCenter.sendDataList.remove (sendDataNode);\n                } else {\n                        this.logger.error ('zb.mh.hscmrno found seq=' + msg.header.seq);\n                }\n                this.logger.debug (\"zb.mh.hscmr  call success\");\n        }\n        \n        \n        \n        \n        /*\n       *    \"zb.mh.hpcm\": \"ZegoClient.base.MessageHandler.handlePushCustomMsg\",\n       */\n        handlePushCustomMsg (msg) {\n                const submsg = JSON.parse (msg.body.custommsg);\n                this.logger.debug (\"zb.mh.hpcm submsg=\", submsg);\n                this.onRecvCustomCommand (submsg.from_userid, submsg.from_username, submsg.custom_content);\n        }\n        \n        onRecvCustomCommand (from_userid: string, from_idname: string, custom_content: string) {\n        }\n        \n        \n        /*\n        *    \"zb.mh.srm\": \"ZegoClient.base.MessageHandler.sendRoomMsg\",\n        */\n        sendRoomMsg (msg_category:1|2, msg_type:1|2|3, msg_content, success, error) {\n                \n                this.logger.debug (\"zb.mh.srm call\");\n                \n                // 不是处于登录状态\n                if (!this.stateCenter.isLogin ()) {\n                        this.logger.error (\"zb.mh.srm state error\");\n                        return;\n                }\n                \n                let timestamp = Date.parse (new Date () + '');\n                if (this.stateCenter.sendRoomMsgTime > 0 && this.stateCenter.sendRoomMsgTime + this.stateCenter.SendRoomMsgInterval > timestamp) {\n                        this.logger.info (\"zb.mh.srm freq error\");\n                        if (error) {\n                                error (sdkErrorList.FREQ_LIMITED, 0, msg_category, msg_type, msg_content);\n                        }\n                        return;\n                }\n                \n                \n                this.stateCenter.sendRoomMsgTime = timestamp;\n                this.logger.debug (\"zb.mh.srm send fetch request\");\n                let bodyData = {\n                        \"msg_category\": msg_category,\n                        \"msg_type\": msg_type,\n                        \"msg_content\": msg_content,\n                };\n                \n                // 发送消息\n                this.socketCenter.registerRouter ('im_chat', msg => {\n                        this.handleSendRoomMsgRsp (msg)\n                });\n                this.socketCenter.sendCustomMessage ('im_chat', bodyData, success, error);\n                this.logger.info (\"zb.mh.srm call success\");\n        }\n        \n        \n        \n        /*\n       *    \"zb.mh.hsrmr\": \"ZegoClient.base.MessageHandler.handleSendRoomMsgRsp\",\n       */\n        handleSendRoomMsgRsp (msg) {\n                this.logger.debug (\"zb.mh.hsrmr call\");\n                const sendDataNode = this.stateCenter.sendDataMap[msg.header.seq];\n                let sendData;\n                \n                if (sendDataNode != null) {\n                        sendData = sendDataNode._data;\n                        \n                        if (sendData.data.header.cmd != \"im_chat\") {\n                                this.logger.error (\"zb.mh.hsrmr cmd wrong\" + sendData.data.header.cmd);\n                        } else {\n                                if (msg.body.err_code === 0) {\n                                        if (sendData.success) {\n                                                sendData.success (msg.header.seq, msg.body.msg_id, sendData.data.body.msg_category, sendData.data.body.msg_type, sendData.data.body.msg_content);\n                                        }\n                                } else {\n                                        if (sendData.error) {\n                                                sendData.error (ClientUtil.getServerError (msg.body.err_code), msg.header.seq, sendData.data.body.msg_category, sendData.data.body.msg_type, sendData.data.body.msg_content);\n                                        }\n                                }\n                        }\n                        \n                        delete this.stateCenter.sendDataMap[msg.header.seq];\n                        this.stateCenter.sendDataList.remove (sendDataNode);\n                } else {\n                        this.logger.error ('hzb.mh.hsrmr no found seq=' + msg.header.seq);\n                }\n                this.logger.info (\"zb.mh.hsrmr call success\");\n        }\n        \n        \n        onRecvRoomMsg (chat_data: ChatInfo[], server_msg_id: number, ret_msg_id: number) {\n        }\n        \n        \n        /*\n      *    \"zb.mh.srirm\": \"ZegoClient.base.MessageHandler.sendReliableMessage\",\n      */\n        sendReliableMessage (type: string, data: string, success: (seq: number) => void, error: (err: ERRO, seq: number) => void) {\n                \n                this.logger.debug (\"zb.mh.srirm call\");\n                \n                if (this.stateCenter.transSeqMap[type]) {\n                        delete this.stateCenter.transSeqMap[type];\n                }\n                \n                this.stateCenter.transSeqMap[type] = {\n                        seq: 0\n                };\n                \n                const body = {\n                        \"trans_type\": type,\n                        \"trans_data\": data\n                };\n                \n                this.socketCenter.sendMessage (\"trans\", body, success, error);\n        }\n        \n        /*\n        *    \"zb.mh.sbim\": \"ZegoClient.base.MessageHandler.sendBigRoomMessage\",\n       */\n        sendBigRoomMessage ( category: 1 | 2 ,type: 1 | 2 | 3, content: string, success: (seq: number, messageId: string) => void, error: (err: ERRO, seq: number) => void) {\n                this.logger.debug (\"zb.mh.sbim call\");\n                \n                const timeWindow = this.stateCenter.bigimTimeWindow;\n                const offset = this.stateCenter.serverTimeOffset;\n                const serverTime = (new Date ()).getTime () + offset;\n                \n                const clientId = (++this.stateCenter.cmdSeq).toString ();\n                \n                if (success == undefined) {\n                        success = null;\n                }\n                if (error == undefined) {\n                        error = null;\n                }\n                \n                this.stateCenter.bigImCallbackMap[clientId] = {\n                        success: success,\n                        error: error\n                };\n                \n                if (timeWindow == 0) {\n                        const bodyData = {\n                                \"msg_category\": category,\n                                \"msg_type\": type,\n                                \"msg_content\": content,\n                                \"bigmsg_client_id\": clientId\n                        };\n                        \n                        this.logger.debug (\"zb.mh.sbim no time window\");\n                        \n                        this.sendBigRoomMessageInternal ([bodyData], msg => {\n                                this.handleBigImMsgRsp (msg);\n                        }, error);\n                }\n                else {\n                        const currentIndex = Math.floor (serverTime / timeWindow);\n                        this.logger.debug (\"currentIndex \" + currentIndex + \" lastTimeIndex \" + this.stateCenter.bigImLastTimeIndex);\n                        \n                        if (this.stateCenter.bigImLastTimeIndex < currentIndex && this.stateCenter.bigImMessageList.length == 0) {\n                                this.stateCenter.bigImLastTimeIndex = currentIndex;\n                                \n                                const oneData = {\n                                        \"msg_category\": category,\n                                        \"msg_type\": type,\n                                        \"msg_content\": content,\n                                        \"bigmsg_client_id\": clientId\n                                };\n                                \n                                this.sendBigRoomMessageInternal ([oneData], msg => {\n                                        this.handleBigImMsgRsp (msg);\n                                }, error);\n                        }\n                        else {\n                                this.stateCenter.bigImMessageList.push ({\n                                        msg_category: category,\n                                        msg_type: type,\n                                        msg_content: content,\n                                        bigmsg_client_id: clientId\n                                });\n                                \n                                if (this.stateCenter.bigImMessageList.length == 1) {\n                                        this.setBigImTimer (offset, timeWindow);\n                                }\n                        }\n                }\n        }\n        \n        \n       \n        \n        /*\n        *    \"zb.mh.hpmmnot\": \"ZegoClient.base.MessageHandler.handlePushMergeMsg\",\n        */\n        handlePushMergeMsg (msg) {\n                if (!this.stateCenter.isLogin ()) {\n                        this.logger.error (\"zb.mh.hpmmnot login\");\n                        return;\n                }\n                \n                for (let i = 0; i < msg.body.messages.length; i++) {\n                        if (msg.body.messages[i].sub_cmd === 14001) {\n                                this.handlePushBigRooMsg (msg.body.messages[i].msg_body);\n                        }\n                }\n                \n                this.logger.debug (\"zb.mh.hpmm call success\");\n        }\n        \n        \n        /*\n        *    \"zb.mh.hpbrm\": \"ZegoClient.base.MessageHandler.handlePushBigRooMsg\",\n        */\n        handlePushBigRooMsg (bodyString) {\n                let messageBody;\n                //messageBody json\n                try {\n                        messageBody = JSON.parse (bodyString);\n                } catch (e) {\n                        this.logger.warn (\"zb.mh.hpbrm parse json error\");\n                        return;\n                }\n                \n                if (!messageBody) {\n                        this.logger.warn (\"zb.mh.hpbrm cann't find message body\");\n                        return;\n                }\n                \n                const roomId = messageBody.room_id;\n                const pushData = [];\n                for (let i = 0; i < messageBody.msg_data.length; i++) {\n                        const message = messageBody.msg_data[i];\n                        const idName = message.id_name;\n                        if (idName == this.stateCenter.idName) {\n                                this.logger.debug (\"zb.mh.hpbrm self message\");\n                                continue;\n                        }\n                        pushData.push ({\n                                idName: message.id_name,\n                                nickName: message.nick_name,\n                                messageId: message.bigmsg_id,\n                                category: message.msg_category,\n                                type: message.msg_type,\n                                content: message.msg_content,\n                                time: message.send_time\n                        });\n                }\n                \n                if (pushData.length == 0) {\n                        this.logger.debug (\"zb.mh.hpbrm no other pushData except self\");\n                } else {\n                        this.onRecvBigRoomMessage (pushData, roomId);\n                }\n                \n                this.logger.debug (\"zb.mh.hpbrm call success\");\n        }\n        \n        \n        onRecvBigRoomMessage (messageList: MessageInfo[], roomId: string) {\n        }\n        \n    \n        \n        /*\n       *    \"zb.mh.sbim\": \"ZegoClient.base.MessageHandler.sendBigRoomMessageInternal\",\n       */\n        sendBigRoomMessageInternal (msgs, success, error) {\n                this.logger.debug (\"zb.mh.sbim call\");\n                \n                const bodyData = {\n                        \"msgs\": msgs\n                };\n                \n                this.socketCenter.sendMessage (\"bigim_chat\", bodyData, success, error);\n        }\n        \n        \n      \n        \n        /*\n         *    \"zb.mh.hbmr\": \"ZegoClient.base.MessageHandler.handleBigImMsgRsp\",\n         */\n        handleBigImMsgRsp (msg) {\n                if (!this.stateCenter.isLogin ()) {\n                        this.logger.info (\"zb.mh.hbmr not login\");\n                        return;\n                }\n                \n                if (this.stateCenter.bigimTimeWindow != msg.body.bigim_time_window) {\n                        this.stateCenter.bigimTimeWindow = msg.body.bigim_time_window;\n                }\n                \n                for (let i = 0; i < msg.body.msgs.length; i++) {\n                        const clientId = msg.body.msgs[i].bigmsg_client_id;\n                        const msgId = msg.body.msgs[i].bigmsg_id;\n                        if (this.stateCenter.bigImCallbackMap[clientId]) {\n                                const success = this.stateCenter.bigImCallbackMap[clientId].success;\n                                if (success != null) {\n                                        success (msg.header.seq, msgId);\n                                }\n                                \n                                delete this.stateCenter.bigImCallbackMap[clientId];\n                        }\n                }\n        }\n        \n        \n        \n        /*\n         *    \"zb.mh.sbt\": \"ZegoClient.base.MessageHandler.setBigImTimer\",\n         */\n        setBigImTimer (offset: number, timeWindow: number) {\n                const serverTimestamp = (new Date ()).getTime () + offset;\n                const residue = timeWindow - (serverTimestamp % timeWindow);\n                const interval = ClientUtil.generateRandumNumber (timeWindow) + residue;\n                \n                this.logger.info (\"zb.mh.sbt setTimer \" + interval);\n                \n                this.stateCenter.bigImTimer = setTimeout (() => {\n                        this.onBigImTimer ();\n                }, interval);\n        }\n        \n        \n       \n        onBigImTimer () {\n                const serverTimestamp = (new Date ()).getTime () + this.stateCenter.serverTimeOffset;\n                this.stateCenter.bigImLastTimeIndex = Math.floor (serverTimestamp / this.stateCenter.bigimTimeWindow);\n                \n                const bodyData = [];\n                const requestList = [];\n                for (let i = 0; i < this.stateCenter.bigImMessageList.length; i++) {\n                        if (i >= 20) {\n                                break;\n                        }\n                        \n                        const info = this.stateCenter.bigImMessageList[i];\n                        bodyData.push ({\n                                \"msg_category\": info.msg_category,\n                                \"msg_type\": info.msg_type,\n                                \"msg_content\": info.msg_content,\n                                \"bigmsg_client_id\": info.bigmsg_client_id\n                        });\n                        \n                        requestList.push (info.bigmsg_client_id);\n                }\n                \n                if (this.stateCenter.bigImMessageList.length > 20) {\n                        this.stateCenter.bigImMessageList.splice (0, 20);\n                } else {\n                        this.stateCenter.bigImMessageList = [];\n                }\n                \n                this.sendBigRoomMessageInternal (bodyData, msg => {\n                        this.handleBigImMsgRsp (msg)\n                }, (err: Error, seq: number) => {\n                        for (let i = 0; i < requestList.length; i++) {\n                                const clientId = requestList[i];\n                                const callbackInfo = this.stateCenter.bigImCallbackMap[clientId];\n                                if (callbackInfo) {\n                                        if (callbackInfo.error != null) {\n                                                callbackInfo.error (err, seq);\n                                        }\n                                        \n                                        delete this.stateCenter.bigImCallbackMap[clientId];\n                                }\n                        }\n                });\n                \n                clearTimeout (this.stateCenter.bigImTimer);\n                this.stateCenter.bigImTimer = null;\n                \n                if (this.stateCenter.bigImMessageList.length > 0) {\n                        this.setBigImTimer (this.stateCenter.serverTimeOffset, this.stateCenter.bigimTimeWindow);\n                }\n        }\n        \n        \n        \n        /*\n        *    \"zb.mh.srlm\": \"ZegoClient.base.MessageHandler.sendRelayMessage\",\n        */\n        sendRelayMessage (type: string, data: string, success: (seq: number) => void, error: (err: ERRO, seq: number) => void) {\n                \n                this.logger.debug (\"zb.mh.srm call\");\n                \n                const timeWindow = this.stateCenter.datiTimeWindow;\n                const offset = this.stateCenter.serverTimeOffset;\n                if (timeWindow > 0) {\n                        this.stateCenter.realyMessageList.push ({\n                                type: type,\n                                data: data,\n                                success: success,\n                                error: error\n                        });\n                        if (this.stateCenter.realyMessageList.length == 1) {\n                                this.setRelayTimer (offset, timeWindow);\n                        }\n                } else {\n                        this.sendRelayMessageInternal (type, data, success, error);\n                }\n        }\n        \n        \n        \n        \n        /*\n       *    \"zb.mh.srlmi\": \"ZegoClient.base.MessageHandler.sendRelayMessageInternal\",\n       */\n        sendRelayMessageInternal (type, data, success, error) {\n                this.logger.debug (\"zb.mh.srmi call\");\n                \n                const bodyData = {\n                        \"relay_type\": type,\n                        \"relay_data\": data\n                };\n                \n                this.socketCenter.sendMessage (\"relay\", bodyData, success, error);\n        }\n        \n        \n        \n        \n        /*\n      *    \"zb.mh.srt\": \"ZegoClient.base.MessageHandler.setRelayTimer\",\n      */\n        setRelayTimer (offset: number, timeWindow: number) {\n                const serverTimestamp = (new Date ()).getTime () + offset;\n                const residue = timeWindow * 2 - (serverTimestamp % timeWindow);\n                const interval = ClientUtil.generateRandumNumber (residue);\n                \n                this.logger.info (\"zb.mh.srt setTimer \" + interval);\n                \n                this.stateCenter.relayTimer = setTimeout (() => {\n                        this.onRelayTimer ();\n                }, interval);\n        }\n        \n        \n        \n        /*\n        *    \"zb.mh.ort\": \"ZegoClient.base.MessageHandler.onRelayTimer\",\n        */\n        onRelayTimer () {\n                if (this.stateCenter.realyMessageList.length == 0) {\n                        this.logger.info (\"zb.mh.ort no relay data\");\n                        return;\n                }\n                \n                const relayInfo = this.stateCenter.realyMessageList[0];\n                this.sendRelayMessageInternal (relayInfo.type, relayInfo.data, relayInfo.success, relayInfo.error);\n                \n                clearTimeout (this.stateCenter.relayTimer);\n                this.stateCenter.relayTimer = null;\n                \n                this.stateCenter.realyMessageList.splice (0, 1);\n                if (this.stateCenter.realyMessageList.length > 0) {\n                        this.setRelayTimer (this.stateCenter.serverTimeOffset, this.stateCenter.datiTimeWindow);\n                }\n        }\n        \n        \n        \n        /*\n       *    \"zb.mh.hptr\": \"ZegoClient.base.MessageHandler.handlePushTransMsg\",\n       */\n        handlePushTransMsg (msg) {\n                if (!this.stateCenter.isLogin ()) {\n                        this.logger.error (\"zb.mh.hptr not login\");\n                        return;\n                }\n                \n                const type = msg.body.trans_type;\n                const seq = msg.body.trans_seq;\n                if (!this.stateCenter.transSeqMap[type]) {\n                        this.stateCenter.transSeqMap[type] = {\n                                seq: seq\n                        };\n                } else {\n                        this.stateCenter.transSeqMap[type].seq = seq;\n                }\n                \n                if (msg.body.trans_user_idname != this.stateCenter.idName) {\n                        this.onRecvReliableMessage (type, seq, msg.body.trans_data);\n                } else {\n                        this.logger.debug (\"zb.mh.hptr receive self trans message\");\n                }\n                this.logger.info (\"zb.mh.hptr trans \" + type + \" seq \" + seq);\n        }\n        \n        onRecvReliableMessage (type: string, seq: number, data: String) {\n        }\n        \n        \n}\n","import {SocketCenter} from \"./socketCenter\";\nimport {\n        ENUM_PUBLISH_STREAM_STATE,\n        ENUM_STREAM_SUB_CMD, LinkedList,\n        MINIUM_HEARTBEAT_INTERVAL,\n        sdkErrorList\n} from \"../zego.entity\";\nimport {ClientUtil} from \"../client-util\";\nimport {StateCenter} from \"./stateCenter\";\nimport {Logger} from \"../zego.logger\";\n\nconst MAX_TRY_HEARTBEAT_COUNT = 3; //最大心跳尝试次数\n\nexport class HeartBeatHandler {\n        \n        private logger: Logger;\n        private socketCenter: SocketCenter;\n        private stateCenter: StateCenter;\n        \n        \n        constructor (logger: Logger, stateCenter: StateCenter, socketCenter: SocketCenter) {\n                this.logger = logger;\n                this.socketCenter = socketCenter;\n                this.stateCenter = stateCenter;\n                \n        }\n        \n        \n        resetHeartbeat () {\n                this.logger.debug (\"zb.hb.rht call\");\n                clearTimeout (this.stateCenter.heartbeatTimer);\n                this.stateCenter.heartbeatTimer = null;\n                this.stateCenter.tryHeartbeatCount = 0;\n                this.logger.debug (\"zb.hb.rht call success\");\n        }\n        \n        \n        //空实现 ，logincenter覆盖\n        hbLogout (err: { code: string, msg: string }) {\n        \n        }\n        \n        start (heartbeatInterval: number) {\n                \n                this.logger.debug (\"zb.hb.sht call\");\n                \n                // 若当前不是处于login登录状态，则返回不做心跳\n                if (!this.stateCenter.isLogin ()) {\n                        this.logger.error (\"zb.hb.sht state error\");\n                        return;\n                }\n                \n                // 若尝试心跳次数大于最大尝试次数，则置为登出状态，清除状态数据\n                if (++this.stateCenter.tryHeartbeatCount > MAX_TRY_HEARTBEAT_COUNT) {\n                        this.logger.error (\"zb.hb.sht come to try limit\");\n                        this.hbLogout (sdkErrorList.HEARTBEAT_TIMEOUT);\n                        return;\n                }\n                \n                // 发送消息\n                this.logger.debug (\"zb.hb.sht send packet\");\n                let bodyData = {\n                        \"reserve\": 0\n                };\n                this.socketCenter.registerRouter ('hb', (msg) => {\n                        this.handleHeartbeatRsp (msg)\n                });\n                this.socketCenter.sendMessage ('hb', bodyData);\n                \n                \n                this.logger.debug (\"zb.hb.sht call success\");\n                \n                this.stateCenter.heartbeatInterval = heartbeatInterval;\n                \n                // heartbeatInterval后再发\n                this.stateCenter.heartbeatTimer = setTimeout (() => {\n                        this.start (this.stateCenter.heartbeatInterval);\n                }, this.stateCenter.heartbeatInterval);\n        }\n        \n        \n        /*\n        *    \"hhbr.0\": \"ZegoClient.handleHeartbeatRsp\",\n        */\n        private handleHeartbeatRsp (msg) {\n                \n                this.logger.debug (\"zb.hb.hhbr call\");\n                \n                if (msg.body.err_code !== 0) {\n                        this.logger.error (\"zb.hb.hhbr call disconnect, server error=\", msg.body.err_code);\n                        this.hbLogout (ClientUtil.getServerError (msg.body.err_code));\n                        return;\n                }\n                \n                //reset heartbeat fail count\n                this.stateCenter.tryHeartbeatCount = 0;\n                this.stateCenter.heartbeatInterval = msg.body.hearbeat_interval;\n                if (this.stateCenter.heartbeatInterval < MINIUM_HEARTBEAT_INTERVAL) {\n                        this.stateCenter.heartbeatInterval = MINIUM_HEARTBEAT_INTERVAL;\n                }\n                \n                //update timewindow\n                if (msg.body.bigim_time_window && typeof msg.body.bigim_time_window == \"number\") {\n                        this.stateCenter.bigimTimeWindow = msg.body.bigim_time_window;\n                }\n                if (msg.body.dati_time_window && typeof msg.body.dati_time_window == \"number\") {\n                        this.stateCenter.datiTimeWindow = msg.body.dati_time_window;\n                }\n                \n                \n                this.ReliableMessageHandler (msg);\n                \n                //update stream if diff/\n                this.fetchStreamList(msg);\n                \n                //update user if diff\n                if (msg.body.server_user_seq !== this.stateCenter.userSeq && this.stateCenter.userStateUpdate) {\n                        this.logger.info (\"zb.hb.hhbr call update user \" + msg.body.server_user_seq, this.stateCenter.userSeq);\n                        this.fetchUserList ();\n                }\n                \n                //try updating stream info again\n                for (let streamid in this.stateCenter.publishStreamList) {\n                        if (this.stateCenter.publishStreamList[streamid].state == ENUM_PUBLISH_STREAM_STATE.update_info) {\n                                this.logger.info (\"zb.hb.hhbr try to update stream info\");\n                                this.updateStreamInfo (streamid, ENUM_STREAM_SUB_CMD.liveBegin, this.stateCenter.publishStreamList[streamid].extra_info);\n                        }\n                }\n                \n                //get online count\n                if (msg.body.online_count != undefined && msg.body.online_count != 0) {\n                        this.onUpdateOnlineCount (this.stateCenter.roomid, msg.body.online_count);\n                }\n                \n                this.logger.debug (\"zb.hb.hhbr call success\");\n        }\n        \n        \n        ReliableMessageHandler (msg: any) {\n                //check trans seq\n                if (msg.body.trans_seqs) {\n                        \n                        for (let i = 0; i < msg.body.trans_seqs.length; i++) {\n                                let type = msg.body.trans_seqs[i].trans_type;\n                                let seq = msg.body.trans_seqs[i].trans_seq;\n                                if (!this.stateCenter.transSeqMap[type] || this.stateCenter.transSeqMap[type].seq !== seq) {\n                                        //fetch trans\n                                        let oldSeq = 0;\n                                        if (!this.stateCenter.transSeqMap[type]) {\n                                                oldSeq = 0;\n                                                this.logger.debug (\"zb.hb.rmh type \" + type + \" server seq \" + seq);\n                                        } else {\n                                                oldSeq = this.stateCenter.transSeqMap[type].seq;\n                                                this.logger.debug (\"zb.hb.rmh type \" + type + \" old seq \" + this.stateCenter.transSeqMap[type].seq + \" server seq \" + seq);\n                                        }\n                                        \n                                        this.fetchReliableMessage (type, oldSeq);\n                                }\n                        }\n                        \n                }\n        }\n        \n        /*\n         *    \"frm.0\": \"ZegoClient.fetchReliableMessage\",拉取可靠业务广播\n         */\n        private fetchReliableMessage (type: string, localSeq: number) {\n                this.logger.debug (\"zb.hb.frm call\");\n                \n                let data = {\n                        \"trans_type\": type,\n                        \"trans_local_seq\": localSeq\n                };\n                this.socketCenter.registerRouter ('trans_fetch', msg => {\n                        this.handleFetchTransRsp (msg)\n                });\n                this.socketCenter.sendMessage (\"trans_fetch\", data);\n                this.logger.debug (\"zb.hb.frm call success\");\n        }\n        \n        \n        //fetch trans 回包\n        private handleFetchTransRsp (msg: any) {\n                \n                if (!this.stateCenter.isLogin ()) {\n                        this.logger.error (\"zb.hb.hftr not login\");\n                        return;\n                }\n                \n                if (msg.body.err_code != 0) {\n                        this.logger.error (\"zb.hb.hftr trans send error \" + msg.body.err_code);\n                        return;\n                }\n                \n                let type = msg.body.trans_type;\n                let seq = msg.body.trans_seq;\n                \n                this.stateCenter.transSeqMap[type] = {\n                        seq: seq\n                };\n                \n                if (msg.body.trans_user_idname != this.stateCenter.idName) {\n                        this.onRecvReliableMessage (type, seq, msg.body.trans_data);\n                }\n                \n                this.logger.debug (\"zb.hb.hftr trans \" + type + \" seq \" + seq);\n        }\n        \n        \n        /*\n         *    \"fsl.0\": \"ZegoClient.fetchStreamList\",拉取服务端流信息\n         */\n        private fetchStreamList (msg) {\n                //update stream if diff/\n                if (msg.body.stream_seq === this.stateCenter.streamSeq) return;\n                \n                this.logger.debug (\"zb.hb.fsl current seq \" + this.stateCenter.streamSeq + \" server Seq \" + msg.body.stream_seq);\n                \n                \n                this.logger.debug (\"zb.hb.fsl call\");\n                \n                // 不是处于登录状态，不让拉流\n                if (!this.stateCenter.isLogin ()) {\n                        this.logger.error (\"zb.hb.fsl state error\");\n                        return;\n                }\n                \n                // 是否正处于拉流状态 false 为完成， true为正在拉流\n                if (this.stateCenter.streamQuerying) {\n                        this.logger.warn (\"zb.hb.fsl already doing\");\n                        return;\n                }\n                this.stateCenter.streamQuerying = true;\n                this.logger.debug (\"zb.hb.fsl send fetch request\");\n                // 发送消息\n                this.socketCenter.registerRouter ('stream_info', msg => {\n                        this.handleFetchStreamListRsp (msg)\n                })\n                this.socketCenter.sendMessage ('stream_info', {\n                        \"reserve\": 0\n                });\n                this.logger.debug (\"zb.hb.fsl call success\");\n        }\n        \n        //空实现 被覆盖\n        handleFetchStreamListRsp (msg: any) {\n        \n        }\n        \n        //空实现 被覆盖\n        fetchUserList () {\n        \n        }\n        \n        //流更新信令  退出上次推的自己的流\n        updateStreamInfo (streamid: string, cmd: string | number, stream_extra_info: string = '', error?: Function) {\n        }\n        \n        //空实现 被sdk覆盖\n        onUpdateOnlineCount (roomId: string, userCount: number) {\n        }\n        \n        //空实现 被sdk覆盖了\n        onRecvReliableMessage (type: string, seq: number, data: String) {\n        \n        }\n        \n        \n        \n        resetCheckMessage () {\n                this.logger.debug (\"zb.hb.rcm call\");\n                \n                clearTimeout (this.stateCenter.sendDataCheckTimer);\n                this.stateCenter.sendDataCheckTimer = null;\n                \n                this.checkSendMessageList (this.stateCenter.sendDataList);\n                this.checkSendMessageList (this.stateCenter.sendCommandList);\n                \n                this.stateCenter.sendDataMap = {};\n                this.stateCenter.sendCommandMap = {};\n                \n                this.logger.debug (\"zb.hb.rcm call success\");\n        }\n        \n        \n        private checkSendMessageList (messageList: LinkedList) {\n                let head = messageList.getFirst ();\n                while (head != null) {\n                        messageList.remove (head);\n                        if (head._data.error) {\n                                if (head._data.data.body.custom_msg) {\n                                        head._data.error (sdkErrorList.SEND_MSG_TIMEOUT,\n                                                    head._data.data.header.seq,\n                                                    head._data.data.body.custom_msg);\n                                } else {\n                                        head._data.error (sdkErrorList.SEND_MSG_TIMEOUT,\n                                                    head._data.data.header.seq);\n                                }\n                        }\n                        head = messageList.getFirst ();\n                }\n        }\n        \n        protected checkMessageListTimeout (messageList: LinkedList, messageMap: { [index: number]: any }) {\n                let head = messageList.getFirst ();\n                let timestamp = Date.parse (new Date () + '');\n                let checkCount = 0;\n                let timeoutMsgCount = 0;\n                let dropMsgCount = 0;\n                \n                while (head != null) {\n                        if ((head._data.time + this.stateCenter.sendDataTimeout) > timestamp) {\n                                break;\n                        }\n                        \n                        delete messageMap[head._data.data.header.seq];\n                        messageList.remove (head);\n                        ++timeoutMsgCount;\n                        \n                        if (head._data.error == null || (this.stateCenter.sendDataDropTimeout > 0 && (head._data.time + this.stateCenter.sendDataDropTimeout) < timestamp)) {\n                                ++dropMsgCount;\n                        } else {\n                                if (head._data.data.body.custom_msg) {\n                                        head._data.error (sdkErrorList.SEND_MSG_TIMEOUT,\n                                                    head._data.data.header.seq,\n                                                    head._data.data.body.custom_msg);\n                                } else {\n                                        head._data.error (sdkErrorList.SEND_MSG_TIMEOUT,\n                                                    head._data.data.header.seq);\n                                }\n                        }\n                        \n                        ++checkCount;\n                        if (checkCount >= this.stateCenter.sendDataCheckOnceCount) {\n                                break;\n                        }\n                        head = messageList.getFirst ();\n                }\n                \n                if (timeoutMsgCount != 0 || dropMsgCount != 0) {\n                        this.logger.debug (\"zb.hb.cmt call success, stat: timeout=\", timeoutMsgCount, \"drop=\", dropMsgCount);\n                }\n        }\n        \n        /*\n         *    \"scmt.0\": \"ZegoClient.startCheckMessageTimeout\",\n         */\n        \n        //检查custommsg发送包是否超时\n        startCheckMessageTimeout () {\n                //this.logger.debug(\"scmt.0 call\");\n                if (!this.stateCenter.isLogin ()) {\n                        this.logger.error (\"zb.hb.scmt state error\");\n                        return;\n                }\n                \n                this.checkMessageListTimeout (this.stateCenter.sendDataList, this.stateCenter.sendDataMap);\n                this.checkMessageListTimeout (this.stateCenter.sendCommandList, this.stateCenter.sendCommandMap);\n                \n                this.stateCenter.sendDataCheckTimer = setTimeout (() => {\n                        this.startCheckMessageTimeout ();\n                }, this.stateCenter.sendDataCheckInterval);\n                \n        }\n}\n","import {SocketCenter} from \"./socketCenter\";\nimport {StateCenter} from \"./stateCenter\";\nimport {\n        ENUM_PUBLISH_STREAM_STATE,\n        ENUM_RUN_STATE,\n        ENUM_STREAM_SUB_CMD,\n        ENUM_STREAM_UPDATE_CMD,\n        ENUM_STREAM_UPDATE_TYPE, MIXSTREAM_ERROR_CODE, PROTO_VERSION\n} from \"../zego.entity\";\nimport {ClientUtil} from \"../client-util\";\nimport {Logger} from \"../zego.logger\";\n\nexport class StreamHandler {\n        \n        private logger: Logger;\n        private socketCenter: SocketCenter;\n        private stateCenter: StateCenter;\n        \n        constructor (logger: Logger, stateCenter: StateCenter, socketCenter: SocketCenter) {\n                this.logger = logger;\n                this.socketCenter = socketCenter;\n                this.stateCenter = stateCenter;\n                \n        }\n        \n        \n        //空实现 被sdk覆盖\n        setCDNInfo (streamInfo: { urls_flv: string, urls_hls: string, urls_rtmp: string },\n                    streamItem: { urls_flv: string, urls_m3u8: string, urls_rtmp: string }) {\n        }\n        \n        //空实现 被sdk覆盖\n        onStreamUpdated (type: number, streamList: any[]) {\n        }\n        \n        //空实现 被sdk覆盖\n        onStreamExtraInfoUpdated (streamList: any[]) {\n        }\n        \n        /*\n        *    \"zb.sh.hss\": \"ZegoClient.base.StreamHandler.handleStreamStart\",\n         */\n        handleStreamStart (lastRunState: number, msg: any) {\n                \n                this.stateCenter.streamQuerying = false;\n                this.socketCenter.registerRouter ('stream', msg => {\n                        this.handleStreamUpdateRsp (msg)\n                });\n                this.socketCenter.registerRouter ('push_stream_update', msg => {\n                        this.handlePushStreamUpdateMsg (msg)\n                });\n                \n                if (lastRunState == ENUM_RUN_STATE.login) {\n                        this.logger.info (\"zb.sh.hss recover from disconnect so call streamupdate\");\n                        //relogin and stream update callback\n                        this.handleFullUpdateStream (msg.body.stream_seq, msg.body.stream_info || []);\n                        \n                } else {\n                        this.logger.info (\"zb.sh.hss success callback user\");\n                        //login and callback\n                        this.stateCenter.streamList = (msg.body.stream_info || []);\n                        this.stateCenter.streamSeq = msg.body.stream_seq;\n                        \n                        for (let i = 0; i < this.stateCenter.streamList.length; i++) {\n                                //check whether stream contain self\n                                if (this.stateCenter.streamList[i].anchor_id_name == this.stateCenter.idName) {\n                                        //delete this stream\n                                        \n                                        this.updateStreamInfo (this.stateCenter.streamList[i].stream_id, ENUM_STREAM_SUB_CMD.liveEnd);\n                                        this.stateCenter.streamList.splice (i, 1);\n                                }\n                        }\n                        \n                        let callbackStreamList = this.makeCallbackStreamList (this.stateCenter.streamList);\n                        ClientUtil.actionSuccessCallback ('login', this.stateCenter.callbackList) (callbackStreamList);\n                        \n                }\n        }\n        \n        //空实现 被sdk覆盖\n        onPublishStateUpdate (type: number, streamId: string, error: { code: string, msg: string } | number) {\n        }\n        \n        /*\n       *    \"zb.sh.usi\": \"ZegoClient.base.StreamHandler.updateStreamInfo\",\n       */\n        //流更新信令  退出上次推的自己的流\n        updateStreamInfo (streamid: string, cmd: string | number, stream_extra_info: string = '', error?: Function) {\n                this.logger.debug (\"zb.sh.usi call\");\n                \n                let extra_info = stream_extra_info;\n                \n                \n                let data = {\n                        \"stream_id\": streamid,\n                        \"extra_info\": extra_info\n                };\n                \n                let stream_msg = JSON.stringify (data);\n                let bodyData = {\n                        \"sub_cmd\": cmd,\n                        \"stream_msg\": stream_msg\n                };\n                this.socketCenter.registerRouter ('stream', msg => {\n                        this.handleStreamUpdateRsp (msg)\n                });\n                this.socketCenter.sendMessage (\"stream\", bodyData, undefined, error);\n                this.logger.info (\"zb.sh.usi call success cmd \" + cmd);\n        }\n        \n        /*\n       *    \"zb.sh.hsur\": \"ZegoClient.base.StreamHandler.handleStreamUpdateRsp\",\n       */\n        //流更新回包\n        handleStreamUpdateRsp (msg) {\n                if (!this.stateCenter.isLogin ()) {\n                        this.logger.error (\"zb.sh.hsur not login\");\n                        return;\n                }\n                \n                if (msg.body.err_code != 0) {\n                        this.logger.error (\"zb.sh.hsur stream update error \" + msg.body.err_code);\n                        return;\n                }\n                \n                this.logger.debug (\"zb.sh.hsur stream seq \" + this.stateCenter.streamSeq + \" server seq \" + msg.body.stream_seq);\n                this.stateCenter.streamSeq = msg.body.stream_seq;\n                \n                //流删除时，publishStreamList已经删除了\n                for (let i = 0; i < msg.body.stream_info.length; i++) {\n                        let streamid = msg.body.stream_info[i].stream_id;\n                        if (!this.stateCenter.publishStreamList[streamid]) {\n                                this.logger.info (\"hsur.0 stream is not exist\");\n                                return;\n                        }\n                        \n                        if (this.stateCenter.publishStreamList[streamid].state == ENUM_PUBLISH_STREAM_STATE.update_info) {\n                                this.stateCenter.publishStreamList[streamid].state = ENUM_PUBLISH_STREAM_STATE.publishing;\n                                this.onPublishStateUpdate (0, streamid, 0);\n                        }\n                }\n                \n        }\n        \n        \n        \n        /*\n       *    \"zb.sh.hfslr\": \"ZegoClient.base.StreamHandler.handleFetchStreamListRsp\",\n       */\n        \n        handleFetchStreamListRsp (msg: any) {\n                this.logger.debug (\"zb.sh.hfslr call\");\n                this.stateCenter.streamQuerying = false;\n                if (msg.body.err_code !== 0) {\n                        this.logger.info (\"zb.sh.hfslr server error=\", msg.body.err_code);\n                        return;\n                }\n                \n                if (this.stateCenter.streamSeq === msg.body.stream_seq) {\n                        this.logger.info (\"zb.sh.hfslr same seq\");\n                        return;\n                }\n                \n                this.handleFullUpdateStream (msg.body.stream_seq, msg.body.stream_info);\n                this.logger.debug (\"zb.sh.hfslr call success\");\n        }\n        \n        \n        /*\n        *    \"zb.sh.hfus\": \"ZegoClient.base.StreamHandler.handleFullUpdateStream\",\n       */\n        private handleFullUpdateStream (serverStreamSeq: number, serverStreamList: any[]) {\n                this.logger.debug (\"zb.sh.hfus call\");\n                this.stateCenter.streamSeq = serverStreamSeq;\n                this.logger.debug (\"zb.sh.hfus server seq \" + this.stateCenter.streamSeq);\n                \n                ClientUtil.mergeStreamList (this.logger, this.stateCenter.idName, this.stateCenter.streamList, serverStreamList, (addStreamList, delStreamList, updateStreamList: any[]) => {\n                        if (addStreamList.length !== 0) {\n                                this.logger.debug (\"zb.sh.hfus callback addstream\");\n                                this.onStreamUpdated (ENUM_STREAM_UPDATE_TYPE.added, this.makeCallbackStreamList (addStreamList));\n                        }\n                        if (delStreamList.length !== 0) {\n                                this.logger.debug (\"zb.sh.hfus callback delstream\");\n                                this.onStreamUpdated (ENUM_STREAM_UPDATE_TYPE.deleted, this.makeCallbackStreamList (delStreamList));\n                        }\n                        if (updateStreamList.length !== 0) {\n                                this.logger.debug (\"zb.sh.hfus callback updatestream\");\n                                this.onStreamExtraInfoUpdated (this.makeCallbackStreamList (updateStreamList));\n                        }\n                });\n                \n                this.logger.info (\"zb.sh.hfus call success\");\n        }\n        \n        \n        \n        /*\n        *    \"zb.sh.hpsum\": \"ZegoClient.base.StreamHandler.handlePushStreamUpdateMsg\",\n        */\n        handlePushStreamUpdateMsg (msg: any) {\n                this.logger.debug (\"zb.sh.hpsum call\");\n                if (!msg.body.stream_info || msg.body.stream_info.length === 0) {\n                        this.logger.info (\"zb.sh.hpsum, emtpy list\");\n                        return;\n                }\n                \n                if (msg.body.stream_info.length + this.stateCenter.streamSeq !== msg.body.stream_seq) {\n                        this.logger.info (\"zb.sh.hpsum call updatestream\");\n                        this.fetchStreamList ();\n                        return;\n                }\n                \n                this.stateCenter.streamSeq = msg.body.stream_seq;\n                switch (msg.body.stream_cmd) {\n                        case ENUM_STREAM_UPDATE_CMD.added:\n                                this.handleAddedStreamList (msg.body.stream_info);\n                                break;\n                        case ENUM_STREAM_UPDATE_CMD.deleted:\n                                this.handleDeletedStreamList (msg.body.stream_info);\n                                break;\n                        case ENUM_STREAM_UPDATE_CMD.updated:\n                                this.handleUpdatedStreamList (msg.body.stream_info);\n                                break;\n                }\n                this.logger.info (\"zb.sh.hpsum call success\");\n        }\n        \n        \n        /*\n       *    \"zb.sh.hasl\": \"ZegoClient.base.StreamHandler.handleAddedStreamList\",\n       */\n        private handleAddedStreamList (streamList: any[]) {\n                this.logger.debug (\"zb.sh.hasl call\");\n                let addStreamList = [];\n                let flag;\n                for (let i = 0; i < streamList.length; i++) {\n                        if (streamList[i].anchor_id_name == this.stateCenter.idName) {\n                                this.logger.debug (\"hdsl.0 have self stream added\");\n                                continue;\n                        }\n                        \n                        flag = false;\n                        for (let j = 0; j < this.stateCenter.streamList.length; j++) {\n                                if (streamList[i].stream_id === this.stateCenter.streamList[j].stream_id) {\n                                        flag = true;\n                                        break;\n                                }\n                        }\n                        if (!flag) {\n                                addStreamList.push (streamList[i]);\n                        }\n                }\n                \n                if (addStreamList.length !== 0) {\n                        this.logger.debug (\"zb.sh.hasl callback addstream\");\n                        // this.stateCenter.streamList.concat(addStreamList);\n                        for (let k = 0; k < addStreamList.length; k++) {\n                                this.stateCenter.streamList.push (addStreamList[k]);\n                        }\n                        this.onStreamUpdated (ENUM_STREAM_UPDATE_TYPE.added, this.makeCallbackStreamList (addStreamList));\n                }\n                this.logger.info (\"zb.sh.hasl call success\");\n        }\n        \n        \n        \n        /*\n         *    \"zb.sh.hdsl\": \"ZegoClient.base.StreamHandler.handleDeletedStreamList\",\n        */\n        private handleDeletedStreamList (streamList: any[]) {\n                this.logger.debug (\"zb.sh.hdsl call\");\n                let delStreamList = [];\n                for (let i = 0; i < streamList.length; i++) {\n                        if (streamList[i].anchor_id_name == this.stateCenter.idName) {\n                                this.logger.debug (\"zb.sh.hdsl have self stream deleted\");\n                                continue;\n                        }\n                        for (let j = this.stateCenter.streamList.length - 1; j >= 0; j--) {\n                                if (streamList[i].stream_id === this.stateCenter.streamList[j].stream_id) {\n                                        this.stateCenter.streamList.splice (j, 1);\n                                        delStreamList.push (streamList[i]);\n                                        break;\n                                }\n                        }\n                }\n                \n                if (delStreamList.length !== 0) {\n                        this.logger.debug (\"zb.sh.hdsl callback delstream\");\n                        this.onStreamUpdated (ENUM_STREAM_UPDATE_TYPE.deleted, this.makeCallbackStreamList (delStreamList));\n                }\n                this.logger.info (\"zb.sh.hdsl call\");\n        }\n        \n      \n        \n        /*\n         *    \"zb.sh.husl\": \"ZegoClient.base.StreamHandler.handleUpdatedStreamList\",\n        */\n        private handleUpdatedStreamList (streamList: any[]) {\n                this.logger.debug (\"zb.sh.husl call\");\n                let updateStreamList = [];\n                for (let i = 0; i < streamList.length; i++) {\n                        if (streamList[i].anchor_id_name == this.stateCenter.idName) {\n                                this.logger.debug (\"hsul.0 have self stream updated\");\n                                continue;\n                        }\n                        for (let j = 0; j < this.stateCenter.streamList.length; j++) {\n                                if (streamList[i].stream_id === this.stateCenter.streamList[j].stream_id) {\n                                        if (streamList[i].extra_info !== this.stateCenter.streamList[j].extra_info) {\n                                                this.stateCenter.streamList[j] = streamList[i];\n                                                updateStreamList.push (streamList[i]);\n                                        }\n                                        break;\n                                }\n                        }\n                }\n                \n                if (updateStreamList.length !== 0) {\n                        this.logger.debug (\"zb.sh.husl callback updatestream\");\n                        this.onStreamExtraInfoUpdated (this.makeCallbackStreamList (updateStreamList));\n                }\n                this.logger.info (\"zb.sh.husl call success\");\n        }\n        \n        \n        \n        /*\n         *    \"zb.sh.fsl\": \"ZegoClient.base.StreamHandler.fetchStreamList\",\n        */\n        // 拉取服务端流信息\n        private fetchStreamList () {\n                this.logger.debug (\"zb.sh.fsl call\");\n                // 不是处于登录状态，不让拉流\n                if (this.stateCenter.isLogin ()) {\n                        this.logger.info (\"zb.sh.fsl state error\");\n                        return;\n                }\n                \n                // 是否正处于拉流状态 false 为完成， true为正在拉流\n                if (this.stateCenter.streamQuerying) {\n                        this.logger.info (\"zb.sh.fsl already doing\");\n                        return;\n                }\n                this.stateCenter.streamQuerying = true;\n                this.logger.debug (\"zb.sh.fsl send fetch request\");\n                let bodyData = {\n                        \"reserve\": 0\n                };\n                \n                // 发送消息\n                this.socketCenter.registerRouter ('stream_info', this.handleFetchStreamListRsp);\n                this.socketCenter.sendMessage ('stream_info', bodyData);\n                this.logger.debug (\"zb.sh.fsl call success\");\n        }\n        \n        \n        makeCallbackStreamList (streamList: any[]) {\n                let callbackStreamList = [];\n                if (streamList && streamList.length > 0) {\n                        for (let i = 0; i < streamList.length; i++) {\n                                const streamInfo = {\n                                        anchor_id_name: streamList[i].anchor_id_name,\n                                        stream_gid: streamList[i].stream_gid,\n                                        anchor_nick_name: streamList[i].anchor_nick_name,\n                                        extra_info: streamList[i].extra_info,\n                                        stream_id: streamList[i].stream_id,\n                                        urls_flv: '',\n                                        urls_rtmp: '',\n                                        urls_hls: '',\n                                };\n                                \n                                this.setCDNInfo (streamInfo, streamList[i]);\n                                \n                                callbackStreamList.push (streamInfo);\n                                \n                        }\n                }\n                \n                return callbackStreamList;\n        }\n        \n        \n        \n        \n        \n        \n        /*\n         *    \"zb.sh.ums\": \"ZegoClient.base.StreamHandler.updateMixStream\",\n        */\n        updateMixStream (mixStreamConfig, successCallback, errorCallback): boolean {\n                this.logger.debug (\"zb.sh.ums call\");\n                \n                if (mixStreamConfig.outputStreamId == undefined && mixStreamConfig.outputUrl == undefined) {\n                        this.logger.error (\"zb.sh.ums no mix stream info\");\n                        return false;\n                }\n                \n                if (mixStreamConfig.streamList.length == 0) {\n                        this.logger.error (\"zb.sh.ums no input stream\");\n                        return false;\n                }\n                \n                let req_body = {\n                        \"id_name\": this.stateCenter.idName,\n                        \"live_channel\": this.stateCenter.roomid,\n                        \"appid\": this.stateCenter.appid,\n                        \"version\": PROTO_VERSION\n                };\n                \n                if (typeof mixStreamConfig.userData == \"string\" && mixStreamConfig.userData.length <= 10000) {\n                        req_body[\"UserData\"] = mixStreamConfig.userData;\n                }\n                \n                let mixInput = [];\n                for (let i = 0; i < mixStreamConfig.streamList.length; i++) {\n                        const streamInfo = mixStreamConfig.streamList[i];\n                        let totalStreamId = streamInfo.streamId;\n                        if (this.stateCenter.testEnvironment) {\n                                totalStreamId = \"zegotest-\" + this.stateCenter.appid + \"-\" + streamInfo.streamId;\n                        }\n                        \n                        mixInput.push ({\n                                stream_id: totalStreamId,\n                                rect: {\n                                        layer: i,\n                                        top: streamInfo.top,\n                                        left: streamInfo.left,\n                                        bottom: streamInfo.bottom,\n                                        right: streamInfo.right\n                                }\n                        });\n                }\n                \n                req_body[\"MixInput\"] = mixInput;\n                \n                let mixOutput = {};\n                if (mixStreamConfig.outputStreamId != undefined) {\n                        if (this.stateCenter.testEnvironment) {\n                                mixOutput[\"stream_id\"] = \"zegotest-\" + this.stateCenter.appid + \"-\" + mixStreamConfig.outputStreamId;\n                        }\n                        else {\n                                mixOutput[\"stream_id\"] = mixStreamConfig.outputStreamId;\n                        }\n                }\n                else if (mixStreamConfig.outputUrl != undefined) {\n                        mixOutput[\"mixurl\"] = mixStreamConfig.outputUrl;\n                }\n                \n                if (mixStreamConfig.outputBitrate) {\n                        mixOutput[\"bitrate\"] = mixStreamConfig.outputBitrate;\n                }\n                else {\n                        this.logger.error (\"zb.sh.ums no bitrate param\");\n                        return false;\n                }\n                \n                if (mixStreamConfig.outputFps) {\n                        mixOutput[\"fps\"] = mixStreamConfig.outputFps;\n                }\n                else {\n                        this.logger.error (\"zb.sh.ums no fps param\");\n                        return false;\n                }\n                \n                if (mixStreamConfig.outputWidth) {\n                        mixOutput[\"width\"] = mixStreamConfig.outputWidth;\n                }\n                else {\n                        this.logger.error (\"zb.sh.ums no width param\");\n                        return false;\n                }\n                \n                if (mixStreamConfig.outputHeight) {\n                        mixOutput[\"height\"] = mixStreamConfig.outputHeight;\n                }\n                else {\n                        this.logger.error (\"zb.sh.ums no height param\");\n                        return false;\n                }\n                \n                if (mixStreamConfig.outputAudioConfig) {\n                        mixOutput[\"audio_enc_id\"] = mixStreamConfig.outputAudioConfig;\n                }\n                if (mixStreamConfig.outputAudioBitrate) {\n                        mixOutput[\"audio_bitrate\"] = mixStreamConfig.outputAudioBitrate;\n                }\n                if (mixStreamConfig.outputAudioChannels) {\n                        mixOutput[\"audio_channel_cnt\"] = mixStreamConfig.outputAudioChannels;\n                }\n                if (mixStreamConfig.outputBgColor) {\n                        mixOutput[\"output_bg_color\"] = mixStreamConfig.outputBgColor;\n                }\n                if (mixStreamConfig.outputBgImage) {\n                        mixOutput[\"output_bg_image\"] = mixStreamConfig.outputBgImage;\n                }\n                \n                if (this.stateCenter.testEnvironment) {\n                        mixOutput[\"testenv\"] = 1;\n                }\n                else {\n                        mixOutput[\"testenv\"] = 0;\n                }\n                \n                req_body[\"MixOutput\"] = [mixOutput];\n                \n                const body = {\n                        channel: \"zeus\",\n                        cmd: \"start_mix\",\n                        req_body: JSON.stringify (req_body)\n                };\n                \n                this.logger.debug (\"zb.sh.ums send command\");\n                \n                this.socketCenter.sendMessage (\"biz_channel\", body, (seq, cmd, rspBody) => {\n                        this.logger.debug (\"zb.sh.ums receive message\");\n                        const prefix = \"zegotest-\" + this.stateCenter.appid + \"-\";\n                        if (rspBody.length == 0) {\n                                if (errorCallback) {\n                                        errorCallback (ClientUtil.getServerError (MIXSTREAM_ERROR_CODE + 1));\n                                }\n                                return;\n                        }\n                        \n                        const data = JSON.parse (rspBody);\n                        \n                        for (let i = 0; i < data.play.length; i++) {\n                                let mixPlayInfo = {};\n                                let streamId = data.play[i].stream_alias;\n                                if (this.stateCenter.testEnvironment && streamId.startsWith (prefix)) {\n                                        streamId = streamId.slice (prefix.length);\n                                }\n                                \n                                if (data.play[i].rtmp_url.length > 0) {\n                                        mixPlayInfo[\"rtmpUrls\"] = [data.play[i].rtmp_url];\n                                }\n                                if (data.play[i].hls_url.length > 0) {\n                                        mixPlayInfo[\"hlsUrls\"] = [data.play[i].hls_url];\n                                }\n                                if (data.play[i].hdl_url.length > 0) {\n                                        mixPlayInfo[\"flvUrls\"] = [data.play[i].hdl_url];\n                                }\n                                \n                                if (successCallback) {\n                                        successCallback (streamId, mixPlayInfo);\n                                }\n                        }\n                }, (error, seq, rspBody) => {\n                        \n                        if (typeof error == \"number\") {\n                                \n                                this.logger.debug (\"zb.sh.ums error: \" + error);\n                                \n                                const nonExistsStreamId = [];\n                                if (error == 1000000150 && rspBody.length != 0) {\n                                        //no stream list\n                                        const data = JSON.parse (rspBody);\n                                        const prefix = \"zegotest-\" + this.stateCenter.appid + \"-\";\n                                        \n                                        for (let i = 0; i < data.non_exist_streams.length; i++) {\n                                                const totalStreamId = data.non_exist_streams[i];\n                                                if (this.stateCenter.testEnvironment && totalStreamId.startsWith (prefix)) {\n                                                        nonExistsStreamId.push (totalStreamId.slice (prefix.length));\n                                                }\n                                                else {\n                                                        nonExistsStreamId.push (totalStreamId);\n                                                }\n                                        }\n                                }\n                                \n                                if (errorCallback) {\n                                        errorCallback (ClientUtil.getServerError (MIXSTREAM_ERROR_CODE + error), nonExistsStreamId);\n                                }\n                        }\n                        else {\n                                this.logger.debug (\"zb.sh.ums error code \" + error.code);\n                                \n                                if (errorCallback) {\n                                        errorCallback (error);\n                                }\n                        }\n                        \n                });\n                \n                return true;\n        };\n        \n        \n        \n        /*\n        *    \"zb.sh.sms\": \"ZegoClient.base.StreamHandler.stopMixStream\",\n       */\n        //停止混流信令\n        stopMixStream (mixStreamConfig, successCallback, errorCallback) {\n                this.logger.debug (\"zb.sh.sms call\");\n                \n                if (mixStreamConfig.outputStreamId == undefined && mixStreamConfig.outputUrl == undefined) {\n                        this.logger.error (\"zb.sh.sms no mix stream info\");\n                        return false;\n                }\n                \n                const req_body = {\n                        \"id_name\": this.stateCenter.idName,\n                        \"live_channel\": this.stateCenter.roomid,\n                        \"appid\": this.stateCenter.appid,\n                        \"version\": PROTO_VERSION\n                };\n                \n                if (mixStreamConfig.outputStreamId != undefined) {\n                        if (this.stateCenter.testEnvironment) {\n                                req_body[\"stream_id\"] = \"zegotest-\" + this.stateCenter.appid + \"-\" + mixStreamConfig.outputStreamId;\n                        }\n                        else {\n                                req_body[\"stream_id\"] = mixStreamConfig.outputStreamId;\n                        }\n                }\n                else if (mixStreamConfig.outputUrl != undefined) {\n                        req_body[\"mixurl\"] = mixStreamConfig.outputUrl;\n                }\n                \n                const body = {\n                        channel: \"zeus\",\n                        cmd: \"stop_mix\",\n                        req_body: JSON.stringify (req_body)\n                };\n                \n                this.socketCenter.sendMessage (\"biz_channel\", body, (seq, data) => {\n                        if (successCallback) {\n                                successCallback ();\n                        }\n                }, (error, seq) => {\n                        if (typeof error == \"number\") {\n                                if (errorCallback) {\n                                        errorCallback (ClientUtil.getServerError (MIXSTREAM_ERROR_CODE + error));\n                                }\n                        }\n                        else {\n                                if (errorCallback) {\n                                        errorCallback (error);\n                                }\n                        }\n                        \n                });\n                \n                return true;\n        };\n        \n        \n        \n        /*\n        *    \"zb.sh.usei\": \"ZegoClient.base.StreamHandler.updateStreamExtraInfo\",\n       */\n        updateStreamExtraInfo (streamid: string, extraInfo: string): boolean {\n                \n                this.logger.debug (\"zb.sh.usei call\");\n                \n                if (!streamid) {\n                        this.logger.error (\"zb.sh.usei param error\");\n                        return false;\n                }\n                \n                if (typeof extraInfo != \"string\") {\n                        return false;\n                }\n                \n                if (this.stateCenter.publishStreamList[streamid]) {\n                        this.stateCenter.publishStreamList[streamid].extra_info = extraInfo;\n                        if (this.stateCenter.publishStreamList[streamid].state >= ENUM_PUBLISH_STREAM_STATE.update_info) {\n                                this.updateStreamInfo (streamid, ENUM_STREAM_SUB_CMD.liveUpdate, extraInfo);\n                        }\n                }\n                \n                return true;\n        }\n        \n        \n        \n}\n","import {ENUM_RUN_STATE, LinkedList} from \"../zego.entity\";\nimport {getSeq} from \"../zego.extern\";\n\nexport class StateCenter {\n        \n        testEnvironment = false;\n        \n        configOK = false;\n        appid: number;\n        userid: string;\n        sessionid: string;\n        roomid: string;\n        token: string;\n        role: 1 | 2;\n        server: string;\n        idName: string;\n        nickName: string;\n        userStateUpdate: boolean;\n        roomCreateFlag: number = 1;\n        runState: ENUM_RUN_STATE = ENUM_RUN_STATE.logout;\n        lastRunState: ENUM_RUN_STATE = ENUM_RUN_STATE.logout;\n        \n        callbackList: { [index: string]: Function } = {};\n        \n        \n        streamQuerying: boolean;\n        streamSeq: number;\n        streamList = [];\n        publishStreamList = {};\n        \n        //用户相关\n        userQuerying = false;\n        userTempList = [];\n        userSeq: number = 0;\n        \n        \n        //command check timout\n        sendCommandMap = {};\n        sendCommandList = new LinkedList ();\n        sendDataMap = {};\n        sendDataList = new LinkedList ();\n        \n        joinLiveCallbackMap = {};\n        joinLiveRequestMap = {};\n        streamUrlMap = {};\n        cmdCallback = {};\n        \n        customUrl: string;\n        \n        //x消息相关\n        transSeqMap = {};\n        realyMessageList = [];\n        relayTimer = null;\n        bigImLastTimeIndex = 0;\n        bigIMmessageList = [];\n        bigImCallbackMap = {};\n        bigImTimer = null;\n        \n        serverTimeOffset = 0;\n        datiTimeWindow = 0;\n        bigimTimeWindow = 0;\n        \n        bigImMessageList = [];\n        \n        \n        screenShotStream: MediaStream;\n        \n        \n        tryLoginCount = 0;\n        tryLoginTimer = null;\n        \n        \n        tryHeartbeatCount: number;\n        \n        heartbeatInterval: number;\n        heartbeatTimer = null;\n        \n        \n        sendDataCheckTimer = null;\n        \n        sendDataCheckInterval = 2000; //检查发送消息间隔\n        \n        sendDataTimeout = 5 * 1000; //发送消息超时\n        sendDataDropTimeout = 10 * 1000; //丢弃过期消息的超时时间\n        sendDataCheckOnceCount = 100; //每次处理最大的超时包\n        \n        \n        sendRoomMsgTime = 0; //上一次发送房间消息时间\n        SendRoomMsgInterval = 500; //发送房间消息最多500毫秒发送一次\n        \n        cmdSeq = 0;\n        \n        constructor () {\n        \n        }\n        \n        //是否登录\n        isLogin () {\n                return this.runState === ENUM_RUN_STATE.login;\n        }\n        \n        //requestId\n        getRequestId (): string {\n                return this.idName + \"-\" + getSeq ();\n        }\n        \n        getSignalCmdContent (requestId: string, dest_id_name: string, result?: number): string {\n                var data = {\n                        \"request_id\": requestId,\n                        \"room_id\": this.roomid,\n                        \"from_userid\": this.idName,\n                        \"from_username\": this.nickName,\n                        \"to_userid\": dest_id_name\n                };\n                \n                if (result != undefined) {\n                        data[\"result\"] = result;\n                }\n                return JSON.stringify (data);\n        }\n}\n","\nimport {\n        ENUM_PUBLISH_STREAM_STATE,\n        ENUM_RUN_STATE, ENUM_STREAM_SUB_CMD, ENUM_STREAM_UPDATE_TYPE,\n        ERRO,\n        MAX_TRY_LOGIN_COUNT, MINIUM_HEARTBEAT_INTERVAL,\n        PROTO_VERSION,\n        sdkErrorList,\n        StreamInfo,\n        TRY_LOGIN_INTERVAL, UserInfo\n} from \"../zego.entity\";\nimport {ClientUtil} from \"../client-util\";\nimport {SocketCenter} from \"./socketCenter\";\nimport {StateCenter} from \"./stateCenter\";\nimport {Logger} from \"../zego.logger\";\n\nexport class RoomHandler {\n        \n        \n        private socketCenter: SocketCenter;\n        private logger: Logger;\n        private stateCenter: StateCenter;\n        \n        \n        constructor (logger: Logger, stateCenter: StateCenter, socketCenter: SocketCenter) {\n                this.logger = logger;\n                this.socketCenter = socketCenter;\n                this.stateCenter = stateCenter;\n        }\n        \n        /*\n       *    \"zb.rh.srs\": \"ZegoClient.base.RoomHandler.setRunState\",\n       */\n        setRunState (newRunState: ENUM_RUN_STATE) {\n                this.logger.debug (\"zb.rh.srs old=\" + this.stateCenter.runState + \", new=\" + newRunState);\n                this.stateCenter.lastRunState = this.stateCenter.runState;\n                this.stateCenter.runState = newRunState;\n        }\n        \n        /*\n      *    \"zb.rh.rtl\": \"ZegoClient.base.RoomHandler.resetTryLogin\",\n      */\n        private resetTryLogin () {\n                this.logger.debug (\"zb.rh.rtl call\");\n                clearTimeout (this.stateCenter.tryLoginTimer);\n                this.stateCenter.tryLoginTimer = null;\n                this.stateCenter.tryLoginCount = 0;\n                this.logger.debug (\"zb.rh.rtl call success\");\n        }\n        \n        \n     \n        private resetBigRoomInfo () {\n                //清除trans信令信息\n                this.stateCenter.transSeqMap = {};\n                \n                //清除relay信令信息\n                this.stateCenter.realyMessageList = [];\n                if (this.stateCenter.relayTimer) {\n                        clearTimeout (this.stateCenter.relayTimer);\n                        this.stateCenter.relayTimer = null;\n                }\n                \n                //清除大房间消息\n                this.stateCenter.bigImLastTimeIndex = 0;\n                this.stateCenter.bigIMmessageList = [];\n                this.stateCenter.bigImCallbackMap = {};\n                if (this.stateCenter.bigImTimer) {\n                        clearTimeout (this.stateCenter.bigImTimer);\n                        this.stateCenter.bigImTimer = null;\n                }\n                \n                this.stateCenter.serverTimeOffset = 0;\n                this.stateCenter.datiTimeWindow = 0;\n                this.stateCenter.bigimTimeWindow = 0;\n        }\n        \n         /*\n          *    \"zb.rh.rr\": \"ZegoClient.base.RoomHandler.resetRoom\",\n          */\n        resetRoom () {\n                \n                this.logger.debug ('zb.rh.rr call');\n                // 清除尝试登录计时器对象\n                this.resetTryLogin ();\n                \n               this.resetRoomCallBack();\n                \n                // 清除流列表\n                this.stateCenter.streamList = [];\n                this.stateCenter.streamQuerying = false;\n                this.stateCenter.publishStreamList = {};\n                \n                \n                // 清除连麦信令\n                this.stateCenter.joinLiveCallbackMap = {};\n                this.stateCenter.joinLiveRequestMap = {};\n                \n                // 清除请求url信息\n                this.stateCenter.streamUrlMap = {};\n                \n                //清除大房间消息\n                this.resetBigRoomInfo ();\n                \n                this.stateCenter.cmdCallback = {};\n                \n                // 防止多次重置时，发送多次消息\n                this.logger.debug ('zb.rh.rr call send logout=', this.stateCenter.sessionid);\n                if (this.stateCenter.sessionid !== '0') {\n                        let bodyData = {\n                                \"reserve\": 0\n                        };\n                        this.socketCenter.registerRouter ('logout', msg => {\n                                this.handleLogoutRsp (msg)\n                        });\n                        this.socketCenter.sendMessage ('logout', bodyData);\n                }\n                \n                this.socketCenter.closeSocket ();\n                \n                this.stateCenter.userid = '';\n                this.stateCenter.sessionid = '';\n                this.logger.setSessionInfo (this.stateCenter.appid, this.stateCenter.roomid, this.stateCenter.userid, this.stateCenter.idName, this.stateCenter.sessionid, PROTO_VERSION);\n                this.logger.debug ('zb.rh.rr call success');\n        }\n        \n        //空接口，被覆盖\n        resetRoomCallBack(){\n        \n        }\n        \n        onDisconnect (err: ERRO) {\n        }\n        \n        //空实现，被覆盖\n        loginSuccessCallBack(lastRunState:number,msg:any){\n        \n        }\n        \n        \n        \n        \n        \n        //空实现 被sdk覆盖\n        onGetTotalUserList (roomId: string, userList: any[]) {\n        }\n        \n        \n          /*\n          *    \"zb.rh.lg\": \"ZegoClient.base.RoomHandler.login\",\n          */\n        //登录房间\n        login (roomid: string, role: 1 | 2, token: string, success: (list: StreamInfo[]) => void, error: (err: ERRO) => void): void {\n                this.logger.setSessionInfo (this.stateCenter.appid, roomid, \"\", this.stateCenter.idName, \"\", PROTO_VERSION);\n                this.logger.info (\"zb.rh.lg call:\", roomid, token);\n               \n                if (!this.stateCenter.configOK || !ClientUtil.checkLoginParam (roomid, token)) {\n                        this.logger.error (\"zb.rh.lg param error\");\n                        error ({code: '', msg: 'param error'});\n                        return;\n                }\n        \n        \n                if (this.stateCenter.runState !== ENUM_RUN_STATE.logout) {\n                        this.logger.debug (\"zb.rh.lg reset\");\n                        this.setRunState (ENUM_RUN_STATE.logout);\n                        this.resetRoom ();\n                }\n        \n                this.logger.debug (\"zb.rh.lg begin\");\n                this.setRunState (ENUM_RUN_STATE.trylogin);\n        \n                this.stateCenter.roomid = roomid;\n                this.stateCenter.token = token;\n                this.stateCenter.role = role;\n                \n                ClientUtil.registerCallback ('login', {\n                        success: success,\n                        error: error\n                }, this.stateCenter.callbackList);\n                \n                this.resetTryLogin ();\n                this.tryLogin ();\n                this.logger.info (\"zb.rh.lg call success\");\n        }\n        \n        \n        \n        //登录请求数据包\n        private loginBodyData () {\n                return {\n                        \"id_name\": this.stateCenter.idName,\n                        \"nick_name\": this.stateCenter.nickName,\n                        \"role\": this.stateCenter.role,\n                        \"token\": this.stateCenter.token,\n                        \"version\": PROTO_VERSION,\n                        \"room_name\":this.stateCenter.roomid,\n                        \"user_state_flag\": this.stateCenter.userStateUpdate ? 1 : 0,\n                        \"room_create_flag\": this.stateCenter.roomCreateFlag\n                };\n        }\n        \n        \n        /*\n          *    \"zb.rh.tl\": \"ZegoClient.base.RoomHandler.tryLogin\",\n          */\n        private tryLogin (): void {\n                \n                this.logger.debug ('zb.rh.tl call');\n                \n                if (this.stateCenter.runState !== ENUM_RUN_STATE.trylogin) {\n                        this.logger.error ('zb.rh.tl state error');\n                        return;\n                }\n                \n                // 如果尝试登录次数大于最大可尝试次数，则直接置为logout登出状态\n                if (++this.stateCenter.tryLoginCount > MAX_TRY_LOGIN_COUNT) {\n                        this.logger.error ('zb.rh.tl fail times limit');\n                        let lastRunState = this.stateCenter.lastRunState;\n                        this.setRunState (ENUM_RUN_STATE.logout);\n                        this.resetRoom ();\n                        \n                        if (lastRunState == ENUM_RUN_STATE.login) {\n                                //relogin fail, not by user\n                                this.logger.error ('zb.rh.tl fail and disconnect');\n                                this.onDisconnect (sdkErrorList.LOGIN_DISCONNECT);\n                        } else {\n                                //trylogin fail, call by user\n                                this.logger.info ('zb.rh.tl fail and callback user');\n                                ClientUtil.actionErrorCallback ('login', this.stateCenter.callbackList) (sdkErrorList.LOGIN_TIMEOUT);\n                        }\n                        \n                        return;\n                }\n                \n                \n                // 如果websocket还未初始化或者还不是处于连接状态\n                if (this.socketCenter.isDisConnect ()) {\n                        this.logger.debug ('zb.rh.tl need new websocket');\n                        \n                        try {\n                                // 若已经初始化，但是还不是连接状态，先清除置为null\n                                this.socketCenter.closeSocket ();\n                                \n                                // 建立websocket连接\n                                this.logger.debug ('zb.rh.tl new websocket');\n                                \n                                this.socketCenter.createSocket (this.stateCenter.server);\n                                \n                                this.socketCenter.registerRouter ('login', (msg, seq) => {\n                                        this.handleLoginRsp (msg, seq)\n                                });\n                                this.socketCenter.closeHandler ((err) => {\n                                        this.closeHandler (err);\n                                });\n                                this.socketCenter.openHandler (() => {\n                                        this.openHandler ();\n                                });\n                        } catch (e) {\n                                this.logger.error (\"zb.rh.tl websocket err:\" + e);\n                        }\n                        \n                } else { // websocket已建立成功\n                        let bodyData = this.loginBodyData ();\n                        this.logger.info ('zb.rh.tl use current websocket and sent login');\n                        this.socketCenter.sendMessage ('login', bodyData);\n                }\n                \n                //settimeout\n                this.stateCenter.tryLoginTimer = setTimeout (() => {\n                        this.tryLogin ();\n                }, TRY_LOGIN_INTERVAL[this.stateCenter.tryLoginCount % MAX_TRY_LOGIN_COUNT]);\n                \n                this.logger.info ('zb.rh.tl call success');\n        }\n        \n        /*\n         *    \"zb.rh.hlr\": \"ZegoClient.base.RoomHandler.handleLoginRsp\",\n         */\n        private handleLoginRsp (msg: any, cmdSeq: number): void {\n                this.logger.debug (\"zb.rh.hlr call\");\n                if (this.stateCenter.runState !== ENUM_RUN_STATE.trylogin) {\n                        this.logger.error (\"zb.rh.hlr state error\");\n                        return;\n                } else if (msg.header.seq !== cmdSeq) {\n                        this.logger.error (\"zb.rh.hlr in wrong seq, local=\", cmdSeq, \",recv=\", msg.header.seq);\n                        return;\n                } else if (msg.body.err_code !== 0) {\n                        this.handleLoginFail (msg);\n                        this.logger.error (\"zb.rh.hlr server error=\", msg.body.err_code);\n                        return;\n                } else {\n                        this.handleLoginSuccess (msg);\n                        this.logger.info (\"zb.rh.hlr call success.\");\n                }\n        }\n        \n        /*\n         *    \"zb.rh.hlf\": \"ZegoClient.base.RoomHandler.handleLoginFail\",\n         */\n        //登录失败回调\n        private handleLoginFail (msg: any) {\n                this.logger.debug (\"zb.rh.hlf call\");\n                if (ClientUtil.isKeepTryLogin (msg.body.err_code)) {\n                        this.logger.warn (\"zb.rh.hlf KeepTry true\");\n                        return;\n                }\n                \n                //stop\n                const lastRunState = this.stateCenter.lastRunState;\n                this.setRunState (ENUM_RUN_STATE.logout);\n                this.resetRoom ();\n                \n                let err = ClientUtil.getServerError (msg.body.err_code);\n                if (lastRunState === ENUM_RUN_STATE.login) {\n                        //relogin fail, not by user\n                        this.logger.info ('zb.rh.hlf callback disconnect');\n                        this.onDisconnect (err);\n                } else {\n                        //trylogin fail, call by user\n                        this.logger.info ('zb.rh.hlf callback error');\n                        ClientUtil.actionErrorCallback ('login', this.stateCenter.callbackList) (err);\n                }\n                \n                this.logger.debug (\"zb.rh.hlf call success\");\n        }\n        \n        \n        /*\n         *    \"zb.rh.hls\": \"ZegoClient.base.RoomHandler.handleLoginSuccess\",\n         */\n         //登录成功回调\n        private handleLoginSuccess (msg: any) {\n                \n                this.logger.info (\"zb.rh.hls call\");\n                \n                //enter login\n                let lastRunState = this.stateCenter.lastRunState;\n                this.setRunState (ENUM_RUN_STATE.login);\n                this.stateCenter.userid = msg.body.user_id;\n                this.stateCenter.sessionid = msg.body.session_id;\n                \n                //set log\n                this.logger.setSessionInfo (this.stateCenter.appid, this.stateCenter.roomid, this.stateCenter.userid, this.stateCenter.idName, this.stateCenter.sessionid, PROTO_VERSION);\n                if (msg.body.config_info) {\n                        this.logger.setRemoteLogLevel (msg.body.config_info.log_level);\n                        if (msg.body.config_info.log_url != \"\") this.logger.openLogServer (msg.body.config_info.log_url);\n                }\n                \n                //get time stamp & window\n                if (msg.body.ret_timestamp != undefined && typeof msg.body.ret_timestamp == \"string\") {\n                        let serverTime = parseFloat (msg.body.ret_timestamp);\n                        if (serverTime == 0) {\n                                this.stateCenter.serverTimeOffset = 0;\n                        } else {\n                                this.stateCenter.serverTimeOffset = msg.body.ret_timestamp - (new Date ()).getTime ();\n                        }\n                }\n                if (msg.body.bigim_time_window && typeof msg.body.bigim_time_window == \"number\") {\n                        this.stateCenter.bigimTimeWindow = msg.body.bigim_time_window;\n                }\n                if (msg.body.dati_time_window && typeof msg.body.dati_time_window == \"number\") {\n                        this.stateCenter.datiTimeWindow = msg.body.dati_time_window;\n                }\n                \n                //stop trylogin\n                this.resetTryLogin ();\n                \n                this.loginSuccessCallBack(lastRunState,msg);\n        }\n        \n        /*\n        *    \"zb.rh.oh\": \"ZegoClient.base.RoomHandler.openHandler\",\n        */\n        private openHandler () {\n                // websocket连接已经打开\n                // 注册onmessage函数，处理服务的发过来的消息，该函数只调用一次\n                this.logger.info ('zb.rh.oh websocket.onpen call');\n                \n                this.socketCenter.responseHandler ();\n                \n                // 发送消息\n                let bodyData = this.loginBodyData ();\n                this.logger.info ('zb.rh.oh websocket.onpen send login');\n                this.socketCenter.sendMessage ('login', bodyData);\n                this.logger.debug ('zb.rh.oh websocket.onpen call success');\n                \n        }\n        \n        /*\n        *    \"zb.rh.oc\": \"ZegoClient.base.RoomHandler.closeHandler\",\n       */\n        private closeHandler (e) {\n                this.logger.info (\"zb.rh.ws.oc msg=\" + JSON.stringify (e));\n                if (this.stateCenter.runState !== ENUM_RUN_STATE.logout) {\n                        if (this.stateCenter.runState === ENUM_RUN_STATE.trylogin && this.stateCenter.tryLoginCount <= MAX_TRY_LOGIN_COUNT) {\n                                //trylogin --> trylogin\n                                this.logger.info (\"zb.rh.ws.oc is called because of try login\");\n                        } else if (this.stateCenter.runState === ENUM_RUN_STATE.login) {\n                                //login --> trylogin\n                                this.logger.info (\"zb.rh.ws.oc is called because of network broken, try again\");\n                                this.setRunState (ENUM_RUN_STATE.trylogin);\n                                this.resetTryLogin ();\n                                this.tryLogin ();\n                        } else {\n                                //unknown\n                                this.logger.error (\"zb.rh.ws.oc out of think!!!\");\n                                this.setRunState (ENUM_RUN_STATE.logout);\n                                this.resetRoom ();\n                                this.onDisconnect (sdkErrorList.UNKNOWN);\n                        }\n                        \n                } else {\n                        //* --> logout\n                        this.logger.info (\"zb.rh.ws.oc onclose logout flow call websocket.close\");\n                }\n        }\n        \n        \n        /*\n       *    \"zb.rh.lo\": \"ZegoClient.base.RoomHandler.logout\",\n      */\n        logout (): boolean {\n                this.logger.debug (\"zb.rh.lo call\");\n                \n                if (this.stateCenter.runState === ENUM_RUN_STATE.logout) {\n                        this.logger.warn (\"zb.rh.lo at logout\");\n                        return false;\n                }\n                \n                this.setRunState (ENUM_RUN_STATE.logout);\n                this.resetRoom ();\n                this.logger.info (\"zb.rh.lo call success\");\n                return true;\n        }\n        \n        \n        /*\n      *    \"zb.rh.su\": \"ZegoClient.base.RoomHandler.setUserStateUpdate\",\n     */\n        setUserStateUpdate (update: boolean) {\n                this.logger.debug (\"zb.rh.su call\");\n                \n                if (typeof update !== \"boolean\") {\n                        this.logger.info (\"zb.rh.su param error\");\n                        return false;\n                }\n                \n                this.stateCenter.userStateUpdate = update;\n                this.logger.info (\"zb.rh.su call success \" + update);\n                return true;\n        }\n        \n        \n        /*\n        *    \"zb.rh.ful\": \"ZegoClient.base.RoomHandler.fetchUserList\",\n       */\n        // 拉取服务端user信息\n        fetchUserList () {\n                this.logger.debug (\"zb.rh.ful call\");\n                if (this.stateCenter.userQuerying) {\n                        this.logger.warn (\"zb.rh.ful is already querying\");\n                        return;\n                }\n                \n                this.stateCenter.userQuerying = true;\n                this.stateCenter.userTempList = [];\n                this.fetchUserListWithPage (0);\n                this.logger.info (\"zb.rh.ful the first time call\");\n        }\n        \n        \n        /*\n        *    \"zb.rh.fulwp\": \"ZegoClient.base.RoomHandler.fetchUserListWithPage\",\n       */\n        //分页拉取user list\n        private fetchUserListWithPage (userIndex: number) {\n                this.logger.debug (\"zb.rh.fulwp call\");\n                \n                this.socketCenter.registerRouter ('user_list', msg => {\n                        this.handleFetchUserListRsp (msg)\n                });\n                \n                // 发送消息\n                this.socketCenter.sendMessage ('user_list', {\n                        \"user_index\": userIndex,\n                        \"sort_type\": 0\n                });\n                \n                this.logger.info (\"zb.rh.fulwp call success\");\n        }\n        \n        \n        \n        /*\n        *    \"zb.rh.hfulr\": \"ZegoClient.base.RoomHandler.handleFetchUserListRsp\",\n       */\n        private handleFetchUserListRsp (msg: any) {\n                this.logger.debug (\"zb.rh.hfulr call\");\n                if (msg.body.err_code != 0) {\n                        this.stateCenter.userQuerying = false;\n                        this.logger.info (\"zb.rh.hfulr fetch error \" + msg.body.err_code);\n                        return;\n                }\n                \n                //set userseq\n                if (!this.stateCenter.userStateUpdate) {\n                        return;\n                }\n                \n                this.stateCenter.userTempList= [...this.stateCenter.userTempList, ...msg.body.user_baseinfos];\n                \n                // this.logger.debug(\"zb.rh.hfulr server user_list \" + msg.body.user_baseinfos);\n                \n                let currentIndex = msg.body.ret_user_index;\n                let serverIndex = msg.body.server_user_index;\n                if (currentIndex != serverIndex) {\n                        this.logger.warn (\"zb.rh.hfulr fetch another page\");\n                        this.fetchUserListWithPage (currentIndex + 1);\n                        return;\n                }\n                \n                this.stateCenter.userSeq = msg.body.server_user_seq;\n                this.logger.info (\"zb.rh.hfulr set user Seq \" + this.stateCenter.userSeq);\n                \n                let user_list = [];\n                for (let i = 0; i < this.stateCenter.userTempList.length; i++) {\n                        let user_info = {\n                                \"idName\": this.stateCenter.userTempList[i].id_name,\n                                \"nickName\": this.stateCenter.userTempList[i].nick_name,\n                                \"role\": this.stateCenter.userTempList[i].role\n                        };\n                        \n                        user_list.push (user_info);\n                }\n                \n                this.stateCenter.userQuerying = false;\n                this.onGetTotalUserList (this.stateCenter.roomid, user_list);\n                this.stateCenter.userTempList = [];\n                \n                this.logger.info (\"zb.rh.hfulr call success user_list \" + user_list + \" count \" + user_list.length);\n        }\n        \n     \n        \n        /*\n        *    \"zb.rh.hlor\": \"ZegoClient.base.RoomHandler.handleLogoutRsp\",\n         */\n        private handleLogoutRsp (msg: any) {\n                this.logger.debug (\"zb.rh.hlor result=\", msg.body.err_code);\n        }\n        \n        \n        /*\n       *    \"zb.rh.hpus\": \"ZegoClient.base.RoomHandler.handlePushUserStateUpdateMsg\",\n        */\n        handlePushUserStateUpdateMsg (msg) {\n                \n                this.logger.debug (\"zb.rh.hpus call\");\n                \n                if (!this.stateCenter.isLogin ()) {\n                        this.logger.error (\"zb.rh.hpus not login\");\n                        return;\n                }\n                \n                if (!this.stateCenter.userStateUpdate) {\n                        this.logger.error (\"zb.rh.hpus no userStateUpdate flag\");\n                        return;\n                }\n                \n                if (this.stateCenter.userSeq + msg.body.user_actions.length !== msg.body.user_list_seq) {\n                        this.logger.warn (\"zb.rh.hpus fetch new userlist \" + this.stateCenter.userSeq, +\" server \" + msg.body.user_list_seq);\n                        this.fetchUserList ();\n                        return;\n                }\n                \n                this.stateCenter.userSeq = msg.body.user_list_seq;\n                this.logger.debug (\"zb.rh.hpus push userSeq \" + this.stateCenter.userSeq);\n                \n                const user_list = [];\n                for (let i = 0; i < msg.body.user_actions.length; i++) {\n                        const user_info = {\n                                \"action\": msg.body.user_actions[i].Action,\n                                \"idName\": msg.body.user_actions[i].IdName,\n                                \"nickName\": msg.body.user_actions[i].NickName,\n                                \"role\": msg.body.user_actions[i].Role,\n                                \"loginTime\": msg.body.user_actions[i].LoginTime\n                        };\n                        \n                        user_list.push (user_info);\n                }\n                \n                this.onUserStateUpdate (msg.body.room_id, user_list);\n                this.logger.info (\"zb.rh.hpus call success\");\n        }\n        \n        \n        onUserStateUpdate (roomId: string, userList: UserInfo[]) {\n        }\n}\n","\nimport {ENUM_RUN_STATE, ENUM_STREAM_UPDATE_CMD, LinkedList, sdkErrorList} from \"../zego.entity\";\nimport {ClientUtil} from \"../client-util\";\nimport {StateCenter} from \"./stateCenter\";\nimport {ZegoWebSocket} from \"../../wechatMini/zego.webSocket\";\nimport {Logger} from \"../zego.logger\";\n\nexport class SocketCenter {\n        \n        private websocket: WebSocket|ZegoWebSocket;\n        private logger: Logger;\n        private stateCenter: StateCenter;\n        \n        private cmdSeq = 0;\n        \n        \n        private responseRouters: { [index: string]: any } = {};\n        \n        constructor (logger: Logger, stateCenter: StateCenter) {\n                this.logger = logger;\n                this.stateCenter = stateCenter;\n                this.responseRouters = {\n                        'push_kickout': msg=>{this.handlePushKickout(msg)},\n                        'push_custommsg': msg=>{this.handlePushCustomMsg(msg)},\n                        'push_im_chat': msg=>{this.handlePushRoomMsg(msg)},\n                        'push_userlist_update': msg=>{this.handlePushUserStateUpdateMsg(msg)},\n                        'push_merge_message': msg=>{this.handlePushMergeMsg(msg)},\n                        'trans': msg=>{this.handleTransRsp(msg)},\n                        'push_trans': msg=>{this.handlePushTransMsg(msg)}\n                }\n                \n        }\n        \n        \n        /*\n         *    \"hpk.0\": \"ZegoClient.handlePushKickout\",\n         */\n        handlePushKickout (msg) {\n        }\n        \n        handlePushCustomMsg (msg) {\n        }\n        \n        handlePushRoomMsg (msg) {\n        }\n        \n        handlePushUserStateUpdateMsg (msg) {\n        }\n        \n        handlePushMergeMsg (msg) {\n        }\n        \n        handlePushTransMsg (msg) {\n        }\n        \n        handleBigImMsgRsp(msg){}\n        \n        /*\n         *    \"zb.sc.htr\": \"ZegoClient.base.SocketCenter.handleTransRsp\",\n         *\n         */\n        //trans回包\n        handleTransRsp (msg) {\n                if (!this.stateCenter.isLogin ()) {\n                        this.logger.error (\"zb.sc.htr not login\");\n                        return;\n                }\n                \n                if (msg.body.err_code != 0) {\n                        this.logger.error (\"zb.sc.htr trans send error \" + msg.body.err_code);\n                        return;\n                }\n                \n                var type = msg.body.trans_type;\n                if (!this.stateCenter.transSeqMap[type]) {\n                        this.logger.error (\"zb.sc.htr cannot match send info\");\n                        return;\n                }\n                \n                //update seq\n                this.stateCenter.transSeqMap[type].seq = msg.body.trans_seq;\n                this.logger.debug (\"zb.sc.htr trans \" + type + \" seq \" + msg.body.trans_seq);\n        }\n        \n        handleBizChannelRspCallback (msg, sendData) {\n                if (msg.body.err_code === 0) {\n                        if (sendData.success != null) {\n                                sendData.success (msg.header.seq, msg.body.cmd, msg.body.rsp_body);\n                        }\n                }\n                else {\n                        if (sendData.error != null) {\n                                sendData.error (msg.body.err_code, msg.header.seq, msg.body.rsp_body);\n                        }\n                }\n        }\n        \n        //注册cmd回调事件\n        registerRouter (name: string, callBack: Function) {\n                this.responseRouters[name] = callBack;\n        }\n        \n        getSocket (server: string): ZegoWebSocket | WebSocket {\n                return null;\n        }\n        \n        // 获取全局参数对象header\n        private getHeader (cmd: string) {\n                return {\n                        'Protocol': 'req',\n                        'cmd': cmd,\n                        'appid': this.stateCenter.appid,\n                        'seq': ++this.cmdSeq,\n                        'user_id': this.stateCenter.userid,\n                        'session_id': this.stateCenter.sessionid || '',\n                        'room_id': this.stateCenter.roomid || '',\n                };\n        }\n        \n        /*\n         *    \"zb.sc.sm\": \"ZegoClient.base.SocketCenter.sendMessage\",\n         *\n         */\n        sendMessage (cmd: string, body: { [index: string]: string | number | any[] }, success?: Function, error?: Function): number {\n                this.logger.debug (\"zb.sc.sm call \" + cmd);\n                \n                if (this.isDisConnect ()) {\n                        this.logger.error (\"zb.sc.sm error  \" + cmd);\n                        return -1;\n                }\n                \n                const header = this.getHeader (cmd);\n                const data = {\n                        \"header\": header,\n                        \"body\": body\n                };\n                \n                success == undefined && (success = null);\n                error == undefined && (error = null);\n                \n                if (success != null || error != null) {\n                        const cmdData = {\n                                data: data,\n                                seq: header.seq,\n                                deleted: false,\n                                time: Date.parse (new Date () + ''),\n                                success: success,\n                                error: error,\n                        };\n                        const cmdDataNode = this.stateCenter.sendCommandList.push (cmdData);\n                        this.stateCenter.sendCommandMap[cmdData.seq] = cmdDataNode;\n                }\n                \n                this.websocket.send (JSON.stringify (data));\n                this.logger.debug (\"zb.sc.sm success\");\n                \n                return header.seq;\n        }\n        \n        \n        /*\n         *    \"zb.sc.scm\": \"ZegoClient.base.SocketCenter.sendCustomMessage\"\n         */\n        //发送带回调消息\n        sendCustomMessage (cmd: string, body: { [index: string]: string | number | any[] }, success?: Function, error?: Function): boolean {\n                this.logger.debug (\"zb.sc.scm call\");\n                if (this.isDisConnect ()) {\n                        this.logger.error (\"zb.sc.scm error\");\n                        return false;\n                }\n                \n                const header = this.getHeader (cmd);\n                const data = {\n                        \"header\": header,\n                        \"body\": body,\n                };\n                \n                const dataBuffer = JSON.stringify (data);\n                \n                if (success == undefined) success = null;\n                if (error == undefined) error = null;\n                \n                const cmdData = {\n                        data: data,\n                        seq: header.seq,\n                        deleted: false,\n                        time: Date.parse (new Date () + ''),\n                        success: success,\n                        error: error,\n                };\n                const cmdDataNode = this.stateCenter.sendDataList.push (cmdData);\n                this.stateCenter.sendDataMap[cmdData.seq] = cmdDataNode;\n                this.websocket.send (dataBuffer);\n                this.logger.debug (\"zb.sc.scm success seq: \", header.seq);\n                return true;\n        }\n        \n        \n        isDisConnect () {\n                return !this.websocket || this.websocket.readyState !== 1\n        }\n        \n        /*\n        *    \"zb.sc.cs\": \"ZegoClient.base.SocketCenter.closeSocket\"\n        */\n        closeSocket () {\n                if (this.websocket) {\n                        this.logger.info ('zb.sc.cs close websocket');\n                        this.websocket.onclose = null;\n                        this.websocket.onerror = null;\n                        this.websocket.close ();\n                        this.websocket = null;\n                }\n        }\n        \n        createSocket (server: string) {\n                this.websocket = this.getSocket (server);\n        }\n        \n        openHandler (hander: any) {\n                this.websocket.onopen = hander;\n        }\n        \n        /*\n        *    \"zb.sc.ch\": \"ZegoClient.base.SocketCenter.closeHandler\"\n        */\n        closeHandler (hander: any) {\n                this.websocket.onclose = hander;\n        }\n        \n        /*\n        *    \"zb.sc.ws.oe\": \"ZegoClient.base.SocketCenter.errorHandler\"\n        */\n        errorHandler () {\n                this.websocket.onerror = e => {\n                        this.logger.error (\"zb.sc.oe msg=\" + JSON.stringify (e));\n                }\n        }\n        \n        /*\n        *    \"zb.sc.crp\": \"ZegoClient.base.SocketCenter.checkResponse\"\n        */\n        // 被logincenter 覆盖\n        checkResponse (msg: any) {\n                if (msg.header.appid !== this.stateCenter.appid ||\n                            msg.header.session_id !== this.stateCenter.sessionid ||\n                            msg.header.user_id !== this.stateCenter.userid ||\n                            msg.header.room_id !== this.stateCenter.roomid ||\n                            this.stateCenter.runState !== ENUM_RUN_STATE.login) {\n                        this.logger.error (\"zb.sc.crp check session fail.\");\n                        return true;\n                } else {\n                        return false;\n                }\n        }\n        \n        /*\n        *    \"zb.sc.ws.rph: \"ZegoClient.base.SocketCenter.responseHandler\"\n        */\n        responseHandler () {\n                this.websocket.onmessage = e => {\n                        \n                        let msg = JSON.parse (e.data);\n                        this.logger.debug (\"zb.sc.ws.rph jsonmsg= \", msg.header.cmd);\n                        \n                        if (msg.header.cmd === 'login') {\n                                this.responseRouters['login'] (msg, this.cmdSeq);\n                                return;\n                        }\n                        \n                        \n                        if (this.checkResponse (msg)) {\n                                this.logger.error (\"zb.sc.ws.rph check session fail.\");\n                                return;\n                        }\n                        \n                        //检查消息回包\n                        this.handleSendCommandMsgRsp (msg);\n                        \n                        this.logger.info (`zb.sc.ws.rph cmd=${msg.header.cmd},function=${!!this.responseRouters[msg.header.cmd]}`)\n                        this.responseRouters[msg.header.cmd] && this.responseRouters[msg.header.cmd] (msg);\n                        \n                        \n                        // switch (msg.header.cmd) {\n                        //   case 'hb':\n                        //     this.handleHeartbeatRsp(msg);\n                        //     break;\n                        //   case 'logout':\n                        //     this.handleLogoutRsp(msg);\n                        //     break;\n                        //   case 'custommsg':\n                        //     this.handleSendCustomMsgRsp(msg);\n                        //     break;\n                        //   case 'stream_info':\n                        //     this.handleFetchStreamListRsp(msg);\n                        //     break;\n                        //   case 'push_custommsg':\n                        //     this.handlePushCustomMsg(msg);\n                        //     break;\n                        //   case 'push_stream_update':\n                        //     this.handlePushStreamUpdateMsg(msg);\n                        //     break;\n                        //   case 'push_kickout':\n                        //     this.handlePushKickout(msg);\n                        //     break;\n                        //   case 'stream_url':?-wx\n                        //     this.handleFetchStreamUrlRsp(msg);\n                        //     break;\n                        //   case 'stream_publish':?-wx\n                        //     this.handleFetchStreamPublishUrlRsp(msg);\n                        //     break;\n                        //   case 'webrtc_url':\n                        //     this.handleFetchWebRtcUrlRsp(msg);\n                        //     break;\n                        //   case 'im_chat':\n                        //     this.handleSendRoomMsgRsp(msg);\n                        //     break;\n                        //   case 'push_im_chat':\n                        //     this.handlePushRoomMsg(msg);\n                        //     break;\n                        //   case 'push_userlist_update':\n                        //     this.handlePushUserStateUpdateMsg(msg);\n                        //     break;\n                        //   case 'user_list':\n                        //     this.handleFetchUserListRsp(msg);\n                        //     break;\n                        //   case 'push_signal':\n                        //     this.handlePushSignalMsg(msg);\n                        //     break;\n                        //   case 'stream':\n                        //     this.handleStreamUpdateRsp(msg);\n                        //     break;\n                        //   case 'trans':\n                        //     this.handleTransRsp(msg);\n                        //     break;\n                        //   case 'trans_fetch':\n                        //     this.handleFetchTransRsp(msg);\n                        //     break;\n                        //   case 'push_trans':\n                        //     this.handlePushTransMsg(msg);\n                        //     break;\n                        //   case 'push_merge_message':\n                        //     this.handlePushMergeMsg(msg);\n                        //     break;\n                        // }\n                };\n        }\n        \n        \n        /*\n       *    \"zb.sc.hscmr: \"ZegoClient.base.SocketCenter.handleSendCommandMsgRsp\"\n       */\n        private handleSendCommandMsgRsp (msg) {\n                this.logger.debug (\"zb.sc.hscmr call\");\n                let sendDataNode = this.stateCenter.sendCommandMap[msg.header.seq];\n                let sendData;\n                if (sendDataNode != null) {\n                        sendData = sendDataNode._data;\n        \n                        if (sendData.data.header.cmd == \"login\") {\n                                this.logger.debug (\"zb.sc.hscmr don't check \" + sendData.data.header.cmd);\n                        } else if (sendData.data.header.cmd == \"relay\") {\n                                this.handleRelayRspCallback(msg, sendData);\n                        } else if (sendData.data.header.cmd == \"bigim_chat\") {\n                                this.handleBigImRspCallback(msg, sendData);\n                        } else if (sendData.data.header.cmd == \"biz_channel\") {\n                                this.handleBizChannelRspCallback (msg, sendData);\n                        } else if (msg.body.err_code === 0) {\n                                sendData.success != null && sendData.success (msg.header.seq);\n                        } else {\n                                sendData.error != null && sendData.error (ClientUtil.getServerError (msg.body.err_code), msg.header.seq);\n                        }\n                \n                        \n                        delete this.stateCenter.sendCommandMap[msg.header.seq];\n                        this.stateCenter.sendCommandList.remove (sendDataNode);\n                }\n                \n                this.logger.debug (\"zb.sc.hscmr call success\");\n        }\n        \n          handleRelayRspCallback( msg, sendData) {\n                if (msg.body.err_code === 0) {\n                        if (sendData.success != null) {\n                                sendData.success(msg.header.seq, msg.body.relay_result);\n                        }\n                } else {\n                        if (sendData.error != null) {\n                                sendData.error(ClientUtil.getServerError(msg.body.err_code), msg.header.seq);\n                        }\n                }\n        }\n        \n          handleBigImRspCallback( msg, sendData) {\n                if (msg.body.err_code === 0) {\n                        if (sendData.success != null) {\n                                //should be sendData.success callback\n                                this.handleBigImMsgRsp(msg);\n                        }\n                }\n                else {\n                        if (sendData.error != null) {\n                                sendData.error(ClientUtil.getServerError(msg.body.err_code), msg.header.seq);\n                        }\n                }\n        }\n        \n       \n        \n}\n","import {\n        ENUM_PUBLISH_STREAM_STATE,\n        ENUM_STREAM_SUB_CMD, MessageInfo, StreamInfo,\n        StreamQuality, UserInfo\n} from \"../zego.entity\";\nimport {SocketCenter} from \"./socketCenter\";\nimport {StateCenter} from \"./stateCenter\";\nimport {RoomHandler} from \"./roomHandler\";\nimport {StreamHandler} from \"./streamHandler\";\nimport {HeartBeatHandler} from \"./heartBeatHandler\";\nimport {MessageHandler} from \"./messageHandler\";\nimport {LiveHandler} from \"./liveHandler\";\nimport {Logger} from \"../zego.logger\";\nimport {ZegoStreamCenter} from \"../ZegoStreamCenter\";\nimport {ZegoWebSocket} from \"../../wechatMini/zego.webSocket\";\n\nexport abstract class Common {\n        \n        logger: Logger;\n        \n        streamCenter: ZegoStreamCenter;\n        \n        socketCenter: SocketCenter;\n        \n        roomHandler: RoomHandler;\n        \n        heartBeatHandler:HeartBeatHandler;\n        \n        \n        streamHandler: StreamHandler;\n        \n        messageHandler:MessageHandler;\n        \n        liveHandler:LiveHandler;\n        \n        stateCenter: StateCenter;\n        \n        \n        \n        \n        \n        abstract getSocket (server: string): ZegoWebSocket | WebSocket;\n        \n        \n        //空实现 web独有\n        abstract  setCDNInfo (streamInfo: { urls_flv: string, urls_hls: string, urls_rtmp: string },\n                                       streamItem: { urls_flv: string, urls_m3u8: string, urls_rtmp: string });\n        \n        //空实现，被子类覆盖\n        abstract WebrtcOnPublishStateUpdateHandle (type: 0 | 1 | 2, streamid: string, error: { code: string, msg: string });\n        \n        \n        abstract stopPlayingStream (streamID: string);\n        \n        abstract onPlayStateUpdate (type: 0 | 1 | 2, streamid: string, error: { code: string, msg: string });\n        \n        \n        abstract onPublishStateUpdate (type: 0 | 1 | 2, streamid: string, error: { code: string, msg: string });\n        \n        abstract stopPublishingStream (streamId: string);\n        \n        \n        abstract onPublishQualityUpdate (streamid: string, streamQuality: StreamQuality);\n        \n        \n        abstract onRecvJoinLiveRequest (requestId: string, from_userid: string, from_username: string, roomid: string);\n        \n        abstract onRecvInviteJoinLiveRequest (requestId: string, from_userid: string, from_username: string, roomid: string);\n        \n        abstract onRecvEndJoinLiveCommand (requestId: string, from_userid: string, from_username: string, roomid: string);\n        \n        abstract  onRecvCustomCommand (from_userid: string, from_idname: string, custom_content: string);\n        \n        abstract onUserStateUpdate (roomId: string, userList: UserInfo[]);\n        \n        abstract onRecvBigRoomMessage (messageList: MessageInfo[], roomId: string);\n        \n        abstract onRecvReliableMessage (type: string, seq: number, data: String);\n        \n        abstract  onStreamUpdated (type: number, streamList: StreamInfo[]);\n        \n        abstract  onStreamExtraInfoUpdated (streamList: StreamInfo[]);\n        \n        \n        abstract startPublishingStream (streamid, localVideo, extraInfo)\n        \n       \n        abstract startPlayingStream (streamid: string, remoteVideo: HTMLElement, audioOutput?: string);\n        \n      \n      \n        //播放拉流状态变化回掉\n         onPlayStateUpdateHandle (type: 0 | 1 | 2, streamid: string, error: { code: string, msg: string }) {\n                if (type == 1) {\n                        this.stopPlayingStream (streamid);\n                }\n                this.onPlayStateUpdate (type, streamid, error);\n        };\n        \n        \n        //type: { start: 0, stop: 1}\n        onPublishStateUpdateHandle (type: 0 | 1 | 2, streamid: string, error: { code: string, msg: string }) {\n                if (type == 0) {\n                        //start publish\n                        if (this.stateCenter.publishStreamList[streamid]) {\n                                if (this.stateCenter.publishStreamList[streamid].state == ENUM_PUBLISH_STREAM_STATE.tryPublish) {\n                                        \n                                        this.stateCenter.publishStreamList[streamid].state = ENUM_PUBLISH_STREAM_STATE.update_info;\n                                        \n                                        this.streamHandler.updateStreamInfo (streamid, ENUM_STREAM_SUB_CMD.liveBegin, this.stateCenter.publishStreamList[streamid].extra_info, (err) => {\n                                                if (this.stateCenter.publishStreamList[streamid] && this.stateCenter.publishStreamList[streamid].state == ENUM_PUBLISH_STREAM_STATE.update_info) {\n                                                        this.stateCenter.publishStreamList[streamid].state = ENUM_PUBLISH_STREAM_STATE.stop;\n                                                        this.onPublishStateUpdate (1, streamid, err);\n                                                        this.streamCenter.stopPlayingStream (streamid);\n                                                }\n                                        });\n                                        \n                                } else {\n                                        this.WebrtcOnPublishStateUpdateHandle (type, streamid, error);\n                                }\n                                //当前状态为publishing时，如果小程序继续回调相同的开始推流状态码，不应该再返回推流成功的回调\n                                // else if (this.stateCenter.publishStreamList[streamid].state == ENUM_PUBLISH_STREAM_STATE.publishing) {\n                                //     this.onPublishStateUpdate(type, streamid, error);\n                                // }\n                        }\n                } else {\n                        this.onPublishStateUpdate (type, streamid, error);\n                        \n                        if (type == 1) {\n                                this.stopPublishingStream (streamid);\n                        }\n                }\n                \n        };\n        \n        \n        //重置流\n        resetStreamCenter () {\n                this.stateCenter.customUrl && (this.stateCenter.customUrl = null);\n                this.streamCenter.reset ();\n                if (!this.socketCenter.isDisConnect ()) {\n                        //send stream delete info\n                        for (let streamid in this.stateCenter.publishStreamList) {\n                                if (this.stateCenter.publishStreamList[streamid].state == ENUM_PUBLISH_STREAM_STATE.publishing) {\n                                        this.streamHandler.updateStreamInfo (streamid, ENUM_STREAM_SUB_CMD.liveEnd, this.stateCenter.publishStreamList[streamid].extra_info);\n                                }\n                        }\n                }\n                \n        }\n        \n        /*\n        *    \"zb.cm.hfwur\": \"ZegoClient.base.Common.handleFetchWebRtcUrlRsp\",\n        */\n        protected handleFetchWebRtcUrlRsp (msg: any) {\n                let streamId = msg.body.stream_id;\n                \n                if (msg.body.ptype === \"push\") {\n                        if (this.stateCenter.publishStreamList[streamId]) {\n                                this.streamCenter.startPublishingStream (streamId, msg.body.urls);\n                        } else {\n                                this.logger.error (\"cb.cm.hfwur no streamid to publish\");\n                        }\n                } else if (msg.body.ptype == \"pull\") {\n                        //check streamid exist\n                        let found = false;\n                        for (let i = 0; i < this.stateCenter.streamList.length; i++) {\n                                if (this.stateCenter.streamList[i].stream_id === streamId) {\n                                        // 根据传入的流id判断当前的流列表中是否存在该流\n                                        found = true;\n                                        break;\n                                }\n                        }\n                        \n                        if (found == false) {\n                                this.logger.warn (\"cb.cm.hfwur cannot find stream, continue to play\");\n                               // return;\n                        }\n                        this.streamCenter.startPlayingStream (streamId, msg.body.urls);\n                }\n        }\n        \n        \n      \n        \n      \n        \n       \n        \n       \n      \n     \n      \n        \n      \n        \n      \n        \n      \n      \n        \n        \n}\n","import {Common} from \"./common\";\nimport {ZegoStreamCenter} from \"../zegoStreamCenter\";\nimport {\n        ChatInfo,\n        Config,\n        ENUM_RUN_STATE,\n        ERRO, MessageInfo, MINIUM_HEARTBEAT_INTERVAL,\n        PROTO_VERSION,\n        sdkErrorList,\n        StreamInfo,\n        StreamQuality, UserInfo\n} from \"../zego.entity\";\nimport {ClientUtil} from \"../client-util\";\nimport {SocketCenter} from \"./socketCenter\";\nimport {RoomHandler} from \"./roomHandler\";\nimport {StateCenter} from \"./stateCenter\";\nimport {StreamHandler} from \"./streamHandler\";\nimport {Logger} from \"../zego.logger\";\nimport {HeartBeatHandler} from \"./heartBeatHandler\";\nimport {MessageHandler} from \"./messageHandler\";\nimport {LiveHandler} from \"./liveHandler\";\n\n// 对外开发接口，与文档保持一致；调度中心\nexport abstract class BaseCenter extends Common {\n        \n        \n        constructor (logger: Logger, streamCenter: ZegoStreamCenter) {\n                super ();\n                this.logger = logger;\n                this.stateCenter = new StateCenter ();\n                this.streamCenter = streamCenter;\n               \n                this.bindSocketHandler();\n                \n                this.bindStreamHandler();\n                \n                this.bindHeatBeatHandler();\n              \n                \n                this.bindRoomHandler();\n                \n                this.bindMessageHandler();\n                \n                this.bindLiveHandler();\n                \n                this.bindStreamCenterHandler();\n                \n        }\n        \n        \n        \n        /*\n       *    \"zb.cm.bsh.0\": \"ZegoClient.base.bindSocketHandler\",\n       */\n        bindSocketHandler(){\n                this.socketCenter = new SocketCenter (this.logger, this.stateCenter);\n                this.socketCenter.registerRouter ('push_signal', msg => {\n                        this.liveHandler.handlePushSignalMsg (msg);\n                });\n                this.socketCenter.getSocket = server => {\n                        return this.getSocket (server);\n                };\n                this.socketCenter.handlePushKickout = msg => {\n                        this.logger.info (\"zb.cm.bsh.0  call hpk\");\n                        this.roomHandler.setRunState (ENUM_RUN_STATE.logout);\n                        this.roomHandler.resetRoom ();\n                        this.onKickOut ({\n                                \"code\": sdkErrorList.KICK_OUT.code,\n                                \"msg\": sdkErrorList.KICK_OUT.msg + msg.body.reason\n                        });\n                        this.logger.debug (\"zb.cm.bsh.0  call hpk success\");\n                };\n                this.socketCenter.handlePushCustomMsg = msg => {\n                        this.messageHandler.handlePushCustomMsg (msg);\n                };\n                this.socketCenter.handlePushUserStateUpdateMsg = msg => {\n                        this.roomHandler.handlePushUserStateUpdateMsg (msg);\n                };\n        \n                this.socketCenter.handlePushRoomMsg = msg => {\n                        this.onRecvRoomMsg (msg.body.chat_data, msg.body.server_msg_id, msg.body.ret_msg_id);\n                };\n                this.socketCenter.handlePushMergeMsg = msg => {\n                        this.messageHandler.handlePushMergeMsg (msg);\n                };\n                this.socketCenter.handlePushTransMsg = msg => {\n                        this.messageHandler.handlePushTransMsg (msg);\n                };\n                this.socketCenter.handleBigImMsgRsp = msg=>{\n                        this.messageHandler.handleBigImMsgRsp(msg);\n                };\n        }\n        \n        bindStreamHandler(){\n                this.streamHandler = new StreamHandler (this.logger, this.stateCenter, this.socketCenter);\n                this.streamHandler.onStreamUpdated = (type: number, streamList: any[]) => {\n                        this.onStreamUpdated (type, streamList);\n                };\n                this.streamHandler.onPublishStateUpdate = (type: 0 | 1 | 2, streamid: string, error: ERRO)=>{\n                        this.onPublishStateUpdate(type,streamid,error);\n                };\n                this.streamHandler.onStreamExtraInfoUpdated = (streamList: any[]) => {\n                        this.onStreamExtraInfoUpdated (streamList);\n                };\n                this.streamHandler.setCDNInfo = (streamInfo: { urls_flv: string, urls_hls: string, urls_rtmp: string },\n                                                streamItem: { urls_flv: string, urls_m3u8: string, urls_rtmp: string })=>{\n                        this.setCDNInfo(streamInfo , streamItem );\n                }\n        }\n        \n        bindHeatBeatHandler(){\n                this.heartBeatHandler = new HeartBeatHandler (this.logger, this.stateCenter, this.socketCenter);\n                this.heartBeatHandler.onRecvReliableMessage = (type: string, seq: number, data: String) => {\n                        this.onRecvReliableMessage (type, seq, data);\n                };\n                this.heartBeatHandler.handleFetchStreamListRsp = (msg) => {\n                        this.streamHandler.handleFetchStreamListRsp (msg);\n                };\n                this.heartBeatHandler.fetchUserList = () => {\n                        this.roomHandler.fetchUserList ();\n                };\n                this.heartBeatHandler.onUpdateOnlineCount = (roomId: string, userCount: number) => {\n                        this.onUpdateOnlineCount (roomId, userCount);\n                };\n                this.heartBeatHandler.updateStreamInfo = (streamid: string, cmd: string | number, stream_extra_info: string = '', error?: Function) => {\n                        this.streamHandler.updateStreamInfo (streamid, cmd, stream_extra_info, error);\n                };\n        }\n        \n        /*\n       *    \"zb.cm.brh\": \"ZegoClient.base.bindRoomHandler\",\n       */\n        bindRoomHandler(){\n                this.roomHandler = new RoomHandler (this.logger, this.stateCenter, this.socketCenter);\n                this.roomHandler.loginSuccessCallBack = (lastRunState: number, msg: any) => {\n                        //处理心跳\n                        const heartbeatInterval = msg.body.hearbeat_interval < MINIUM_HEARTBEAT_INTERVAL ? MINIUM_HEARTBEAT_INTERVAL : msg.body.hearbeat_interval;\n                        setTimeout (() => {\n                                this.heartBeatHandler.start (heartbeatInterval);\n                        }, heartbeatInterval);\n                \n                \n                        //消息检查\n                        this.heartBeatHandler.resetCheckMessage ();\n                        this.heartBeatHandler.startCheckMessageTimeout ();\n        \n                        \n                        this.streamCenter.setSessionInfo(this.stateCenter.appid, this.stateCenter.idName, this.stateCenter.token, this.stateCenter.testEnvironment);\n                       \n                        //房间成员变化\n                        //handle anchor info\n                        if (msg.body.anchor_info) {\n                                this.onGetAnchorInfo (msg.body.anchor_info.anchor_id_name, msg.body.anchor_info.anchor_nick_name);\n                        }\n                \n                        if (msg.body.online_count) {\n                                this.onUpdateOnlineCount (this.stateCenter.roomid, msg.body.online_count);\n                        }\n                \n                        //handle userStateUpdate\n                        this.logger.info (\"zb.cm.brh hls userStateUpdate \" + this.stateCenter.userStateUpdate);\n                \n                        if (this.stateCenter.userStateUpdate) {\n                                this.logger.info (\"zb.cm.brh hls fetch all new userlist\");\n                                this.roomHandler.fetchUserList ();\n                        }\n                \n                \n                        //流处理理\n                        this.streamHandler.handleStreamStart (lastRunState, msg);\n                \n                \n                };\n                this.roomHandler.onGetTotalUserList = (roomId: string, userList: any[]) => {\n                        this.onGetTotalUserList (roomId, userList);\n                };\n                this.roomHandler.resetRoomCallBack = () => {\n                        // 清除心跳计时器对象\n                        this.heartBeatHandler.resetHeartbeat ();\n                \n                        // 清除检查消息循环\n                        this.heartBeatHandler.resetCheckMessage ();\n                \n                        //清除推拉流状态\n                        this.resetStreamCenter ();\n                };\n                this.roomHandler.onUserStateUpdate = (roomId: string, userList: UserInfo[]) => {\n                        this.onUserStateUpdate (roomId, userList);\n                };\n        }\n        \n    \n        bindMessageHandler(){\n                this.messageHandler = new MessageHandler (this.logger, this.stateCenter, this.socketCenter);\n                this.messageHandler.onRecvCustomCommand = (from_userid: string, from_idname: string, custom_content: string) => {\n                        this.onRecvCustomCommand (from_userid, from_idname, custom_content);\n                };\n                this.messageHandler.onRecvBigRoomMessage = (messageList: MessageInfo[], roomId: string)=>{\n                        this.onRecvBigRoomMessage(messageList, roomId);\n                };\n                this.messageHandler.onRecvReliableMessage = (type: string, seq: number, data: String) => {\n                        this.onRecvReliableMessage (type, seq, data);\n                };\n        }\n        \n        bindLiveHandler(){\n                this.liveHandler = new LiveHandler (this.logger, this.stateCenter, this.socketCenter);\n                this.liveHandler.onRecvEndJoinLiveCommand = (requestId: string, from_userid: string, from_username: string, roomid: string)=>{\n                        this.onRecvEndJoinLiveCommand(requestId, from_userid, from_username, roomid);\n                };\n                this.liveHandler.onRecvInviteJoinLiveRequest = (requestId: string, from_userid: string, from_username: string, roomid: string)=>{\n                        this.onRecvInviteJoinLiveRequest(requestId, from_userid, from_username, roomid);\n                };\n                this.liveHandler.onRecvJoinLiveRequest =  (requestId: string, from_userid: string, from_username: string, roomid: string)=>{\n                        this.onRecvJoinLiveRequest(requestId, from_userid, from_username, roomid);\n                };\n        \n        }\n        \n        bindStreamCenterHandler(){\n                this.streamCenter.onPlayStateUpdate = (type: 0 | 1 | 2, streamid: string, error: ERRO) => {\n                        this.onPlayStateUpdateHandle (type, streamid, error);\n                };\n                this.streamCenter.onPlayQualityUpdate = (streamId: string, streamQuality: StreamQuality) => {\n                        this.onPlayQualityUpdate (streamId, streamQuality);\n                };\n                this.streamCenter.onPublishStateUpdate = (type: 0 | 1 | 2, streamid: string, error: ERRO) => {\n                        this.onPublishStateUpdateHandle (type, streamid, error);\n                };\n                this.streamCenter.onPublishQualityUpdate = (streamId: string, streamQuality: StreamQuality) => {\n                        this.onPublishQualityUpdate (streamId, streamQuality);\n                };\n                this.streamCenter.onPlayerStreamUrlUpdate = (streamid: string, url: string, type: string) => {\n                        this.onStreamUrlUpdate (streamid, url, type);\n                };\n                this.streamCenter.onVideoSizeChanged = (streamId: string, videoWidth: number, videoHeight: number) => {\n                        this.onVideoSizeChanged (streamId, videoWidth, videoHeight);\n                };\n                \n        }\n        \n        \n        /*********\n         *\n         * 下面的方法微信和web端实现一样，共用\n         *\n         *\n         * ****/\n        /*\n        *    \"zb.cm.cf\": \"ZegoClient.base.config\",\n        */\n        // 配置client\n        config (option: Config): boolean {\n                this.logger.debug (\"zb.cm.cf call\");\n                if (!ClientUtil.checkConfigParam (option, this.logger)) {\n                        this.logger.error (\"zb.cm.cf param error\");\n                        return false;\n                }\n                \n                \n                this.stateCenter.appid = option.appid;\n                this.stateCenter.server = option.server;\n                this.stateCenter.idName = option.idName;\n                this.stateCenter.nickName = option.nickName;\n                \n                this.logger.setLogLevel (option.logLevel);\n                if (option.audienceCreateRoom === false) {\n                        this.stateCenter.roomCreateFlag = 0;\n                }\n                \n                if (!option.remoteLogLevel) {\n                        this.logger.setRemoteLogLevel (option.remoteLogLevel);\n                } else {\n                        this.logger.setRemoteLogLevel (0);\n                }\n                this.logger.setSessionInfo (option.appid, \"\", \"\", option.idName, \"\", PROTO_VERSION);\n                \n                if (option.logUrl) {\n                        this.logger.openLogServer (option.logUrl);\n                }\n                \n                \n                if (this.stateCenter.server.indexOf (\"test2-wsliveroom-api.zego.im\") != -1) {\n                        this.stateCenter.testEnvironment = true;\n                }\n                \n                this.stateCenter.configOK = true;\n                this.logger.debug (\"zb.cm.cf call success\");\n                return true;\n                \n        }\n        \n        \n        //房间相关---登录，房间人员变化\n        login (roomid: string, role: 1 | 2, token: string, success: (list: StreamInfo[]) => void, error: (err: ERRO) => void): void {\n                this.roomHandler.login (roomid, role, token, success, error);\n        };\n        \n        logout (): boolean {\n                return this.roomHandler.logout ();\n        };\n        \n        setUserStateUpdate (update: boolean) {\n                this.roomHandler.setUserStateUpdate (update);\n        }\n        \n        onUserStateUpdate (roomId: string, userList: UserInfo[]) {\n        }\n        \n        onGetTotalUserList (roomId: string, userList: { idName: string, nickName: string, role: 1 | 2 }[]) {\n        }\n        \n        onUpdateOnlineCount (roomId: string, userCount: number) {\n        }\n        \n        onGetAnchorInfo (anchor_userid: string, anchro_username: string) {\n        }\n        \n        /*\n        *    \"zc.p.r\": \"ZegoClient.release\"\n        */\n        // 释放房间和播放器\n        release () {\n                this.logger.debug (\"zb.cm.rl call\");\n                this.roomHandler.setRunState (ENUM_RUN_STATE.logout);\n                this.roomHandler.resetRoom ();\n                \n                this.logger.stopLogServer ();\n                this.logger.debug (\"zb.cm.rl call success\");\n        }\n        \n        \n        sendCustomCommand (dstMembers: string[], customContent: string | Object, success: (seq: number, customContent: string) => void, error: (err: ERRO, seq: number, customContent: string) => void): boolean {\n                return this.messageHandler.sendCustomCommand (dstMembers, customContent, success, error);\n        }\n        \n        onRecvCustomCommand (from_userid: string, from_idname: string, custom_content: string) {\n        }\n        \n        \n        sendRoomMsg (msg_category: 1 | 2 , msg_type: 1 | 2| 3, msg_content: string, success: Function, error: Function) {\n                this.messageHandler.sendRoomMsg (msg_category, msg_type, msg_content, success, error)\n        }\n        \n        onRecvRoomMsg (chat_data: ChatInfo[], server_msg_id: number, ret_msg_id: number) {\n        }\n        \n        \n        sendReliableMessage (type: string, data: string, success: (seq: number) => void, error: (err: ERRO, seq: number) => void) {\n                this.messageHandler.sendReliableMessage (type, data, success, error)\n        }\n        \n        onRecvReliableMessage (type: string, seq: number, data: String) {\n        }\n        \n        \n        sendBigRoomMessage (category: 1 | 2 , type: 1 | 2 | 3, content: string, success: (seq: number, messageId: string) => void, error: (err: ERRO, seq: number) => void) {\n                this.messageHandler.sendBigRoomMessage ( category,type, content, success, error);\n        }\n        \n        onRecvBigRoomMessage (messageList: MessageInfo[], roomId: string) {\n        }\n        \n        \n        sendRelayMessage (type: string, data: string, success: (seq: number) => void, error: (err: ERRO, seq: number) => void) {\n                \n                this.messageHandler.sendRelayMessage (type, data, success, error);\n        }\n        \n        \n        \n        \n        \n        \n        \n        \n        \n        \n        \n        \n        \n        requestJoinLive (destIdName: string, success: (seq: number) => void, error: (err: ERRO, seq: number) => void,\n                         resultCallback: (result: boolean, fromUserId: string, fromUserName: string) => void): boolean {\n                return this.liveHandler.requestJoinLive(destIdName,success,error,resultCallback);\n        }\n        \n        onRecvJoinLiveRequest (requestId: string, from_userid: string, from_username: string, roomid: string) {\n        }\n        \n        \n        inviteJoinLive (destIdName: string, success: (seq: number) => void, error: (err: ERRO, seq: number) => void,\n                        resultCallback: (result: boolean, fromUserId: string, fromUserName: string) => void): boolean {\n                 \n                return this.liveHandler.inviteJoinLive(destIdName,success,error,resultCallback);\n        }\n        \n        onRecvInviteJoinLiveRequest (requestId: string, from_userid: string, from_username: string, roomid: string) {\n        }\n        \n        \n        \n        endJoinLive (destIdName: string, success: (seq: number) => void, error: (err: ERRO, seq: number) => void): boolean {\n                return this.liveHandler.endJoinLive(destIdName,success,error);\n        }\n        \n        onRecvEndJoinLiveCommand (requestId: string, from_userid: string, from_username: string, roomid: string) {\n        }\n        \n        \n        \n        respondJoinLive (requestId: string, respondResult: boolean, success?: (seq: number) => void, error?: (err: ERRO, seq: number) => void): boolean {\n                  return  this.liveHandler.respondJoinLive(requestId,respondResult,success,error);\n        }\n        \n        \n        \n        \n         /*\n          *    \"zc.p.ums\": \"ZegoClient.updateMixStream\",//更新混流信令\n          */\n        updateMixStream (mixStreamConfig, successCallback, errorCallback): boolean {\n                return this.streamHandler.updateMixStream(mixStreamConfig, successCallback, errorCallback);\n        };\n        \n        /*\n         *    \"zc.p.sms\": \"ZegoClient.stopMixStream\", //停止混流信令\n         */\n        stopMixStream (mixStreamConfig, successCallback, errorCallback) {\n                return this.streamHandler.stopMixStream(mixStreamConfig, successCallback, errorCallback);\n        };\n        \n        \n        \n        updateStreamExtraInfo (streamid: string, extraInfo: string): boolean {\n                return this.streamHandler.updateStreamExtraInfo(streamid,extraInfo);\n        }\n        \n        \n        \n        \n        onStreamUrlUpdate (streamid: string, url: string, type: string){\n        \n        };\n        \n        onStreamUpdated (type: number, streamList: StreamInfo[]) {\n        }\n        \n        onStreamExtraInfoUpdated (streamList: StreamInfo[]) {\n        }\n        \n        \n        \n        onPlayStateUpdate (type: number, streamid: string, error: ERRO|number) {\n        }\n        \n        onVideoSizeChanged (streamId: string, videoWidth: number, videoHeight: number) {\n        \n        }\n        \n        onPlayQualityUpdate (streamId: string, streamQuality: StreamQuality) {\n        }\n        \n        onPublishStateUpdate (type: number, streamid: string, error: ERRO|number) {\n        }\n        \n        onPublishQualityUpdate (streamId: string, streamQuality: StreamQuality) {\n        }\n        \n        \n        \n        \n        \n        \n        \n        /********\n         *\n         *\n         *  下面的方法都需要被覆盖，这里只是空实现\n         *\n         *\n         *\n         *\n         *\n         *\n         *\n         *\n         *\n         *\n         * *******/\n        \n        onDisconnect (err: ERRO) {\n        }\n        \n        onKickOut (err: ERRO) {\n        }\n        \n}\n","import {Logger} from \"./zego.logger\";\nimport {ERRO, StreamQuality} from \"./zego.entity\";\n\nexport abstract class ZegoStreamCenter {\n        \n        constructor (log: Logger) {\n        \n        }\n        \n        abstract stopPlayingStream (streamId: string);\n        \n        abstract reset ();\n        \n        abstract startPlayingStream (streamid: string, serverUrls: string[], currentPlaySourceType?: number): boolean;\n        \n        abstract startPublishingStream (streamid: string, serverUrls: string[], preferPublishSourceType?: number);\n        \n        abstract onPlayStateUpdate (type: 0 | 1 | 2, streamid: string, error: ERRO);\n        \n        abstract onPlayQualityUpdate (streamId: string, streamQuality: StreamQuality);\n        \n        abstract onPublishStateUpdate (type: 0 | 1 | 2, streamid: string, error: ERRO);\n        \n        abstract onPublishQualityUpdate (streamId: string, streamQuality: StreamQuality) ;\n        \n        abstract onPlayerStreamUrlUpdate (streamid: string, url: string, type: string);\n        \n        abstract onVideoSizeChanged (streamId: string, videoWidth: number, videoHeight: number);\n        \n        \n        \n        setSessionInfo (appid: number, userid: string, token: string, testEnvironment: boolean) {\n        };\n}\n\n\n","import {ENUM_PLAY_STATE, ENUM_RETRY_STATE, PlayOption} from \"../common/zego.entity\";\nimport {ZegoDataReport} from \"../common/zego.datareport\";\nimport {ZegoSignal} from \"../common/zego.signal\";\nimport {ENUM_PLAY_STATE_UPDATE, getSeq, playErrorList, publishErrorList} from \"../common/zego.extern\";\nimport {Logger} from \"../common/zego.logger\";\n\nexport class ZegoPlayWeb {\n        logger: Logger;\n        signal: ZegoSignal;\n        state = ENUM_PLAY_STATE.stop;\n        \n       \n       \n        candidateInfo = [];\n        \n        waitICETimer = null;\n        waitingICETimeInterval = 5000;\n        \n        waitingOfferTimer = null;\n        waitingOfferTimeInterval = 5000;\n        \n        waitingServerTimer = null;\n        waitingServerTimerInterval = 3000;\n        \n        // waitingAnswerTimer: number;\n        // waitingAnswerTimeInterval = 0;\n        \n        qualityTimer = null;\n        qualityTimeInterval: number;\n        \n        \n        playQualityList = [];\n        maxQualityListCount = 10;\n        lastPlayStats = {\n                time: 0,\n                audioBytesReceived: 0,\n                videoBytesReceived: 0,\n                framesDecoded: 0,\n                framesReceived: 0,\n                framesDropped: 0\n        };\n        \n        dataReport: ZegoDataReport;\n        reportSeq = getSeq ();\n        \n        videoSizeCallback = false;\n        \n        qualityUpload = false;\n        qualityUploadInterval = 30 * 1000;\n        qualityUploadLastTime = 0;\n        \n        //retry\n        maxRetryCount = 3;\n        currentRetryCount = 0;\n        retryState = ENUM_RETRY_STATE.didNotStart;\n       \n        \n        \n        remoteVideo: any;\n        streamId: string;\n        audioOutput: any;\n        sessionId: number;\n        sessionSeq: number;\n        answerSeq: number;\n        audioOputput: any;\n        \n        peerConnection: RTCPeerConnection | any;\n       \n        \n        playOption:{\n                 playType:'audio'|'video'|'all'\n         };\n        closeSessionSignal = false;\n        \n        constructor (log: Logger, signal: ZegoSignal, dataReport: ZegoDataReport, qualityTimeInterval: number) {\n                \n                this.logger = log;\n                this.signal = signal;\n                this.dataReport = dataReport;\n                this.qualityTimeInterval = qualityTimeInterval;\n                dataReport.newReport (this.reportSeq);\n        }\n        \n        \n        /*\n         *    \"zp.sad.1\": \"ZegoPlayWeb.setAudioDestination\"\n         */\n        setAudioDestination (audioOutput: string) {\n                if (!this.remoteVideo) {\n                        this.logger.info (\"zp.sad.1 no remoteVideo\");\n                        return false;\n                }\n                \n                if (this.remoteVideo.sinkId !== 'undefined') {\n                        this.remoteVideo.setSinkId (audioOutput).then (() => {\n                                this.logger.info (\"zp.sad.1 success device: \" + audioOutput);\n                                // this.audioOutput = audioOutput;\n                        }).catch ( (error)=> {\n                                this.logger.info (\"zp.sad.1 \" + error.name);\n                        });\n                        return true;\n                } else {\n                        this.logger.error (\"zp.sad.1 browser does not suppport\");\n                        return false;\n                }\n        };\n        \n        /*\n         *    \"zp.sp.1\": \"ZegoPlayWeb.startPlay\"\n         */\n        startPlay (streamId: string, remoteVideo: HTMLElement, audioOutput?: string,playOption?:PlayOption) {\n                this.logger.debug (\"zp.sp.1 called \", streamId);\n                \n                if (!streamId) {\n                        this.logger.warn (\"zp.sp.1 streamId is null\");\n                        return;\n                }\n                \n                this.streamId = streamId;\n                this.remoteVideo = remoteVideo;\n                this.audioOutput = audioOutput;\n                this.playOption = playOption;\n                \n                //create session\n                this.sessionSeq = getSeq ();\n                this.dataReport.eventStart (this.reportSeq, \"CreateSession\");\n                this.signal.createSession (this.sessionSeq, 1,0, streamId, (seq, sessionId, data) => {\n                        this.dataReport.eventEndWithMsg (this.reportSeq, \"CreateSession\", {\n                                sessionId: data.session_id\n                        });\n                        \n                        this.logger.info('zp.sp.1 sessionId:'+data.session_id);\n                        \n                        if (this.sessionSeq != seq) {\n                                this.logger.error (\"zp.sp.1 seq is not match.\");\n                                return;\n                        }\n                        \n                        if (data.result !== 0) {\n                                this.logger.error (\"zp.sp.1 create error\");\n                                this.playStateUpdateError (playErrorList.CREATE_SESSION_ERROR);\n                        } else {\n                                this.sessionId = data.session_id;\n                                this.onCreatePlaySessionSuccess (data);\n                        }\n                        \n                }, (err, seq) => {\n                        this.dataReport.eventEndWithMsg (this.reportSeq, \"CreateSession\", {\n                                error: err\n                        });\n                        \n                        this.playStateUpdateError (playErrorList.SEND_SESSION_TIMEOUT);\n                });\n                \n                this.state = ENUM_PLAY_STATE.waitingSessionRsp;\n                this.logger.debug (\"zp.sp.1 called success\");\n        };\n        \n        \n        //////////////////////////////////////////////////////////////////////////////////////////////\n        // create session result\n        /*\n         *    \"zp.ops.1\": \"ZegoPlayWeb.onCreatePlaySessionSuccess\"\n         */\n        private onCreatePlaySessionSuccess (data) {\n                this.logger.debug (\"zp.ops.1 success\");\n                \n                let urls = [];\n                if (data.turn_server) urls.push (data.turn_server);\n                if (data.stun_server) urls.push (data.stun_server);\n                \n                const configuration = {\n                        iceServers: [{\n                                urls: urls,\n                                username: data.turn_username,\n                                credential: data.turn_auth_key\n                        }]\n                };\n                \n                this.logger.info (\"zp.ops.1 username: \" + data.turn_username);\n                this.logger.info (\"zp.ops.1 credential: \" + data.turn_auth_key);\n                \n                this.peerConnection = new RTCPeerConnection (configuration);\n                this.peerConnection.onicecandidate = (e) => {\n                        this.onIceCandidate (e);\n                };\n                \n                this.peerConnection.onsignalingstatechange = (e:Event) => {\n                        this.onConnectionStateChange (e);\n                };\n                \n                this.peerConnection.oniceconnectionstatechange = (e) => {\n                        this.onIceConnectionStateChange (e);\n                };\n                \n                this.peerConnection.onaddstream = (e) => {\n                        this.onGotRemoteStream (e);\n                };\n                \n                this.remoteVideo.oncanplay = () => {\n                        this.logger.debug (\"zp.ops.1 \" + this.remoteVideo.videoWidth + \" X \" + this.remoteVideo.videoHeight);\n                        if (!this.videoSizeCallback) {\n                                this.logger.debug (\"zp.ops.1 onresize callback\");\n                                \n                                this.onVideoSizeChanged (this.streamId, this.remoteVideo.videoWidth, this.remoteVideo.videoHeight);\n                                this.videoSizeCallback = true;\n                        }\n                };\n        \n         \n                let offerOptions = {\n                        offerToReceiveAudio: 1,\n                        offerToReceiveVideo: 1,\n                };\n                if(this.playOption&&this.playOption.playType === 'audio')offerOptions.offerToReceiveVideo = 0;\n                if(this.playOption&&this.playOption.playType === 'video')offerOptions.offerToReceiveAudio = 0;\n                \n                this.logger.info (\"zp.ops.1 createOffer: \" + offerOptions);\n                //create offer\n                this.dataReport.eventStart (this.reportSeq, \"CreateOffer\");\n                this.peerConnection.createOffer (offerOptions).then (\n                            (desc) => {\n                                    this.dataReport.eventEnd (this.reportSeq, \"CreateOffer\");\n                            \n                                    this.onCreateOfferSuccess (desc);\n                            },\n                            (error) => {\n                                    this.dataReport.eventEndWithMsg (this.reportSeq, \"CreateOffer\", {\n                                            error: error.toString ()\n                                    });\n                            \n                                    this.logger.error (\"zp.ops.0 create offer error \" + error.toString ());\n                                    this.playStateUpdateError (playErrorList.CREATE_OFFER_ERROR);\n                            }\n                );\n                \n                \n                //register callback\n                this.signal.registerPushCallback (\"MediaDescPush\", this.sessionId, (seq: number, sessionId: number, data: any) => {\n                        this.onRecvMediaDesc (seq, sessionId, data);\n                });\n                this.signal.registerPushCallback (\"CandidateInfoPush\", this.sessionId, (seq: number, sessionId: number, data: any) => {\n                        this.onRecvCandidateInfo (seq, sessionId, data);\n                });\n                this.signal.registerPushCallback (\"CloseSessionPush\", this.sessionId, (seq: number, sessionId: number, data: any) => {\n                        this.onRecvCloseSession (seq, sessionId, data);\n                });\n                // this.signal.registerPushCallback(\"WebSocketDisconnect\", this.sessionId, onDisconnect, this);\n                this.signal.registerPushCallback (\"SessionResetPush\", this.sessionId, (seq: number, sessionId: number, data: any) => {\n                        this.onRecvResetSession (seq, sessionId, data);\n                });\n                \n                this.logger.debug (\"zp.ops.1 call success\");\n        }\n        \n        \n        //////////////////////////////////////////////////////////////////////////////////////////////\n        // create offer result\n        /*\n         *    \"zp.oco.1\": \"ZegoPlayWeb.onCreateOfferSuccess\"\n         */\n        onCreateOfferSuccess (desc: { sdp: any }) {\n                this.logger.debug (\"zp.oco.1 localSdp \" , desc.sdp);\n                \n                this.dataReport.eventStart (this.reportSeq, \"SetLocalDescription\");\n                this.peerConnection.setLocalDescription (desc).then (\n                            () => {\n                                    this.dataReport.eventEnd (this.reportSeq, \"SetLocalDescription\");\n                            \n                                    this.onSetLocalDescriptionSuccess (desc);\n                            },\n                            (error) => {\n                                    this.logger.error (\"zp.oca.1 set error \" + error.toString ());\n                                    this.dataReport.eventEnd (this.reportSeq, \"SetLocalDescription\", {\n                                            error: error.toString ()\n                                    });\n                            \n                                    this.playStateUpdateError (playErrorList.SET_LOCAL_DESC_ERROR);\n                            }\n                );\n        }\n        \n        \n        //////////////////////////////////////////////////////////////////////////////////////////////\n        // setLocalDescription result\n        /*\n         *    \"zp.osd.1\": \"ZegoPlayWeb.onSetLocalDescriptionSuccess\"\n         */\n        private onSetLocalDescriptionSuccess (desc) {\n                this.logger.debug (\"zp.osd.1 success\");\n                \n                let mediaDescription = {\n                        sdp: desc.sdp\n                };\n                \n                this.answerSeq = getSeq ();\n                this.dataReport.eventStart (this.reportSeq, \"SendMediaDesc\");\n                this.signal.sendMediaDesc (this.answerSeq, this.sessionId, 0, mediaDescription, (seq, sessionId, data) => {\n                        if (this.answerSeq != seq || this.sessionId != sessionId) {\n                                this.logger.error (\"zp.osd.1 seq or sessionId is not equal \" + this.answerSeq + \" \" + seq, +\" \" + this.sessionId + \" \" + sessionId);\n                                return;\n                        }\n                        \n                        this.logger.debug (\"zp.osd.1 send success\");\n                        \n                        this.dataReport.eventEnd (this.reportSeq, \"SendMediaDesc\");\n                        \n                        this.state = ENUM_PLAY_STATE.waitingServerAnswer;\n                        \n                        //send candidate\n                        this.sendCandidateInfo (this.candidateInfo);\n                        this.candidateInfo = [];\n                        \n                        //setTimer\n                        this.waitingOfferTimer = setTimeout (() => {\n                                if (this.state == ENUM_PLAY_STATE.waitingOffserRsp) {\n                                        this.logger.error (\"zp.osd.1 waiting timeout\");\n                                        this.playStateUpdateError (playErrorList.SERVER_CANDIDATE_TIMEOUT);\n                                }\n                        }, this.waitingOfferTimeInterval);\n                        \n                }, (err, seq) => {\n                        this.logger.error (\"zp.osd.1 failed to send \" + err);\n                        this.dataReport.eventEndWithMsg (this.reportSeq, \"SendMediaDesc\", {\n                                error: err\n                        });\n                        \n                        this.playStateUpdateError (playErrorList.SEND_MEDIA_DESC_TIMEOUT);\n                });\n                \n                this.state = ENUM_PLAY_STATE.waitingOffserRsp;\n        }\n        \n        \n        //////////////////////////////////////////////////////////////////////////////////////////////\n        // server push offer (setRemoteDescription)\n        /*\n         *    \"zp.orm.1\": \"ZegoPlayWeb.onRecvMediaDesc\"\n         */\n        private onRecvMediaDesc (seq: number, sessionId: number, data: any) {\n                this.logger.debug (\"zp.orm.1 received \", data);\n                \n                if (this.state !== ENUM_PLAY_STATE.waitingServerAnswer) {\n                        this.logger.error (\"zp.orm.1 current state \" + this.state + \" not allowed\");\n                        return;\n                }\n                \n                if (this.waitingOfferTimer != null) {\n                        clearTimeout (this.waitingOfferTimer);\n                        this.waitingOfferTimer = null;\n                }\n                \n                this.dataReport.addEvent (this.reportSeq, \"RecvMediaDesc\");\n                \n                this.signal.sendMediaDescAck (seq, this.sessionId, 0);\n                \n                let offerDescription: RTCSessionDescription = {\n                        type: \"answer\",\n                        sdp: data.sdp,\n                        toJSON: () => {\n                        }\n                        \n                };\n                \n                \n                \n                //setRemoteDescritpion\n                this.dataReport.eventStart (this.reportSeq, \"SetRemoteDescription\");\n                this.logger.info (\"zp.orm.1 remoteSdp \", offerDescription.sdp);\n                this.peerConnection.setRemoteDescription (new RTCSessionDescription (offerDescription)).then (() => {\n                        this.dataReport.eventEnd (this.reportSeq, \"SetRemoteDescription\");\n                        this.logger.debug (\"zp.orm.1 set success\");\n                      \n                }, (error) => {\n                        this.logger.error (\"zp.orm.1 set remote error \" + error.toString ());\n                        \n                        this.dataReport.eventEndWithMsg (this.reportSeq, \"SetRemoteDescription\", {\n                                error: error.toString ()\n                        });\n                        \n                        this.playStateUpdateError (playErrorList.SET_REMOTE_DESC_ERROR);\n                });\n        \n                //setTimer\n                this.waitICETimer = setTimeout (() => {\n                        if (this.state == ENUM_PLAY_STATE.waitingServerICE) {\n                                this.logger.error (\"zp.orm.1 waiting server timeout\");\n                                this.playStateUpdateError (playErrorList.SERVER_CANDIDATE_TIMEOUT);\n                        }\n                }, this.waitingICETimeInterval);\n        \n        \n                this.state = ENUM_PLAY_STATE.waitingServerICE;\n                this.logger.debug (\"zp.orm.1 call success\");\n        }\n        \n        \n        \n        //////////////////////////////////////////////////////////////////////////////////////////////\n        // server push ICE (addIceCandidate)\n        /*\n         *    \"zp.orci.1\": \"ZegoPlayWeb.onRecvCandidateInfo\"\n         */\n        private onRecvCandidateInfo (seq: number, sessionId: number, data: any) {\n                \n                this.logger.debug (\"zp.orci.1 received \");\n                \n                if (this.state != ENUM_PLAY_STATE.waitingServerICE) {\n                        this.logger.warn (\"zp.orci.1 current state \" + this.state + \" not allowed\");\n                        return;\n                }\n                \n                if (this.waitICETimer != null) {\n                        clearTimeout (this.waitICETimer);\n                        this.waitICETimer = null;\n                }\n                \n                this.dataReport.addEvent (this.reportSeq, \"RecvIceCandidate\");\n                \n                this.signal.sendCandidateInfoAck (seq, this.sessionId, 0);\n                \n                for (let i = 0; i < data.infos.length; i++) {\n                        const ice = {\n                                sdpMid: data.infos[i].sdpMid,\n                                sdpMLineIndex: data.infos[i].sdpMLineIndex,\n                                candidate: data.infos[i].candidate\n                        };\n                        \n                        this.logger.debug (\"zp.orci.1 candidate \" + ice.candidate);\n                        \n                        this.peerConnection.addIceCandidate (new RTCIceCandidate (ice)).then (() => {\n                                this.logger.debug (\"zp.orci.1 add success\");\n                        }, (error) => {\n                                this.logger.error (\"zp.orci.1 add error \" + error.toString ());\n                                this.playStateUpdateError (playErrorList.SERVER_CANDIDATE_ERROR);\n                        });\n                }\n                \n                this.state = ENUM_PLAY_STATE.connecting;\n                \n                this.logger.debug (\"zp.orci.1 call success\");\n        }\n        \n        //////////////////////////////////////////////////////////////////////////////////////////////\n        // onIceCandidate callback\n        /*\n         *    \"zp.oic.1\": \"ZegoPlayWeb.onIceCandidate\"\n         */\n        private onIceCandidate (event) {\n                this.logger.info (\"zp.oic.1 called\");\n                \n                //send candidate to other peer\n                if (event.candidate == undefined) {\n                        return;\n                }\n                \n                this.logger.debug (\"zp.oic.1 candidate \" + event.candidate.candidate);\n        \n                if (this.state < ENUM_PLAY_STATE.waitingServerICE || this.state == ENUM_PLAY_STATE.stop) {\n                        //save candidate Info\n                        this.logger.debug (\"zp.oic.1 cached\");\n                        \n                        this.candidateInfo.push ({\n                                candidate: event.candidate.candidate,\n                                sdpMid: event.candidate.sdpMid,\n                                sdpMLineIndex: event.candidate.sdpMLineIndex\n                        });\n                } else {\n                        this.logger.debug (\"zp.oic.1 send\");\n                        \n                        const candidate = {\n                                candidate: event.candidate.candidate,\n                                sdpMid: event.candidate.sdpMid,\n                                sdpMLineIndex: event.candidate.sdpMLineIndex\n                        };\n                        \n                        this.sendCandidateInfo ([candidate]);\n                }\n        }\n        \n        //////////////////////////////////////////////////////////////////////////////////////////////\n        // onIceStateChange callback\n        /*\n         *    \"zp.ocs.1\": \"ZegoPlayWeb.onConnectionStateChange\"\n         */\n        private onConnectionStateChange (event) {\n                this.logger.info (\"zp.oisc.1 called \"+event.target.signalingState);\n        }\n        \n        /*\n         *    \"zp.oics.1\": \"ZegoPlayWeb.onIceConnectionStateChange\"\n         */\n        private onIceConnectionStateChange (event) {\n                \n                if (this.state == ENUM_PLAY_STATE.stop || this.peerConnection == null) {\n                        return;\n                }\n                \n                this.logger.info (\"zp.oisc.1  stateChanged \" + this.peerConnection.iceConnectionState);\n                \n                if (this.peerConnection.iceConnectionState === \"connected\") {\n                        this.dataReport.addEvent (this.reportSeq, \"IceConnected\");\n                        \n                        if (this.state != ENUM_PLAY_STATE.playing) {\n                                this.onPlayStateUpdate (ENUM_PLAY_STATE_UPDATE.start, this.streamId);\n                        }\n                        \n                        this.state = ENUM_PLAY_STATE.playing;\n                        if (this.retryState != ENUM_RETRY_STATE.didNotStart) {\n                                this.retryState = ENUM_RETRY_STATE.finished;\n                                this.currentRetryCount = 0;\n                        }\n                        \n                        //play started\n                        this.dataReport.eventStart (this.reportSeq, \"PlayState\");\n                        \n                        //start quality timeInterval\n                        this.setPlayQualityTimer ();\n                } else if (this.peerConnection.iceConnectionState === \"closed\") {\n                        this.dataReport.addEvent (this.reportSeq, \"IceClosed\");\n                        \n                        this.checkPlayConnectionFailedState (this.peerConnection.iceConnectionState);\n                } else if (this.peerConnection.iceConnectionState === \"failed\") {\n                        this.dataReport.addEvent (this.reportSeq, \"IceFailed\");\n                        \n                        this.checkPlayConnectionFailedState (this.peerConnection.iceConnectionState);\n                }\n        }\n        \n        private checkPlayConnectionFailedState (connectionState) {\n                let state = null;\n                if (connectionState == \"failed\") {\n                        state = playErrorList.MEDIA_CONNECTION_FAILED;\n                } else if (connectionState == \"closed\") {\n                        state = playErrorList.MEDIA_CONNECTION_CLOSED;\n                }\n                \n                if (state == null) {\n                        return;\n                }\n                \n                if (this.state != ENUM_PLAY_STATE.playing && this.retryState == ENUM_PLAY_STATE.didNotStart) {\n                        this.logger.info (\"zp.oics.1  state \" + this.state + \" retryState \" + this.retryState + \" connectionState \" + connectionState);\n                        \n                        this.playStateUpdateError (state);\n                }\n                else {\n                        if (this.shouldRetryPlay ()) {\n                                this.onPlayStateUpdate (ENUM_PLAY_STATE_UPDATE.retry, this.streamId);\n                                \n                                this.startRetryPlay ();\n                        }\n                        else {\n                                this.playStateUpdateError (state);\n                        }\n                }\n        }\n        \n        //////////////////////////////////////////////////////////////////////////////////////////////\n        // retry play\n        /*\n         *    \"zp.srp.1.0\": \"ZegoPlayWeb.shouldRetryPlay\"\n         */\n        private shouldRetryPlay () {\n                if (this.retryState == ENUM_RETRY_STATE.didNotStart && this.state != ENUM_PLAY_STATE.playing) {\n                        this.logger.info (\"zp.srp.1.0 connection didn't success\");\n                        return false;\n                }\n                \n                if (this.retryState == ENUM_RETRY_STATE.retrying) {\n                        this.logger.info (\"zp.srp.0.0 already retrying\");\n                        return false;\n                }\n                \n                if (this.currentRetryCount > this.maxRetryCount) {\n                        this.logger.info (\"zp.srp.1.0 beyond max\");\n                        return false;\n                }\n                \n                this.logger.debug (\"zp.srp.1.0 call success\");\n                return true;\n        }\n        \n        /*\n         *    \"zp.srp.1\": \"ZegoPlayWeb.startRetryPlay\"\n         */\n        private startRetryPlay () {\n                this.logger.debug (\"zp.srp.0 call\");\n                \n                var streamId = this.streamId;\n                var remoteVideo = this.remoteVideo;\n                var audioOutput = this.audioOutput;\n                \n                this.resetPlay ();\n                \n                this.tryStartPlay (streamId, remoteVideo, audioOutput);\n        }\n        \n        \n        private clearTryPlayTimer () {\n                if (this.waitingServerTimer != null) {\n                        clearTimeout (this.waitingServerTimer);\n                        this.waitingServerTimer = null;\n                }\n        }\n        \n        /*\n        *    \"zp.tsp.1\": \"ZegoPublish.tryStartPlay\"\n        */\n        private tryStartPlay (streamId, remoteVideo, audioOputput) {\n                \n                this.logger.debug (\"zp.tsp.1 call\");\n                \n                this.clearTryPlayTimer ();\n                \n                this.streamId = streamId;\n                this.remoteVideo = remoteVideo;\n                this.audioOutput = audioOputput;\n                \n                if (this.currentRetryCount > this.maxRetryCount) {\n                        this.logger.error (\"zp.tsp.1 beyond max limit\");\n                        //callback error\n                        this.playStateUpdateError (playErrorList.WEBSOCKET_ERROR);\n                        return;\n                }\n                \n                this.retryState = ENUM_RETRY_STATE.retrying;\n                this.currentRetryCount += 1;\n                \n                if (this.signal.isServerConnected ()) {\n                        this.logger.debug (\"zp.tsp.1 signal connected\");\n                        \n                        this.startPlay (streamId, this.remoteVideo, this.audioOputput);\n                }\n                else {\n                        //setTimer\n                        this.logger.debug (\"zp.tsp.1 signal server not connected\");\n                        \n                        this.waitingServerTimer = setTimeout (() => {\n                                this.tryStartPlay (streamId, this.remoteVideo, this.audioOputput);\n                        }, this.waitingServerTimerInterval);\n                }\n        }\n        \n        private clearPlayQualityTimer () {\n                if (this.qualityTimer != null) {\n                        clearInterval (this.qualityTimer);\n                        this.qualityTimer = null;\n                }\n                \n                this.lastPlayStats = {\n                        time: null,\n                        audioBytesReceived: null,\n                        videoBytesReceived: null,\n                        framesDecoded: null,\n                        framesDropped: null,\n                        framesReceived: null\n                };\n        }\n        \n        //////////////////////////////////////////////////////////////////////////////////////////////\n        // reset function\n        /*\n         *    \"zp.rp.1\": \"ZegoPlayWeb.resetPlay\"\n         */\n        private resetPlay () {\n                this.logger.info (\"zp.rp.1 call\");\n                \n                this.streamId = null;\n                this.state = ENUM_PLAY_STATE.stop;\n                \n                if (this.peerConnection != undefined) {\n                        this.peerConnection.close ();\n                        this.peerConnection = null;\n                }\n                \n                if (this.waitingOfferTimer != null) {\n                        clearTimeout (this.waitingOfferTimer);\n                        this.waitingOfferTimer = null;\n                }\n                \n                if (this.waitICETimer != null) {\n                        clearTimeout (this.waitICETimer);\n                        this.waitICETimer = null;\n                }\n                \n                this.clearPlayQualityTimer ();\n                \n                if (this.remoteVideo) {\n                        this.remoteVideo.srcObject = null;\n                        this.remoteVideo.oncanplay = null;\n                        this.remoteVideo = null;\n                }\n                \n                this.audioOputput = null;\n                \n                if (this.signal) {\n                        this.signal.unregisterPushCallback (\"MediaDescPush\", this.sessionId);\n                        this.signal.unregisterPushCallback (\"CandidateInfoPush\", this.sessionId);\n                        this.signal.unregisterPushCallback (\"CloseSessionPush\", this.sessionId);\n                        // this.signal.unregisterPushCallback('WebSocketDisconnect', this.sessionId);\n                }\n                \n                // this.sessionId = 0;\n                this.sessionSeq = 0;\n                this.answerSeq = 0;\n                \n                \n                this.videoSizeCallback = false;\n                \n                this.currentRetryCount = 0;\n                this.retryState = ENUM_RETRY_STATE.didNotStart;\n                this.clearTryPlayTimer ();\n        }\n        \n\n        \n        //////////////////////////////////////////////////////////////////////////////////////////////\n        // quality timer\n        /*\n         *    \"zp.spq.1\": \"ZegoPlayWeb.setPlayQualityTimer\"\n         */\n        private setPlayQualityTimer () {\n                if (this.qualityTimer != null) {\n                        return;\n                }\n                \n                this.logger.debug (\"zp.spq.1 startTimer\");\n                \n                this.clearPlayQualityTimer ();\n                \n                this.qualityTimer = setInterval (() => {\n                        \n                        if (this.peerConnection) {\n                                this.peerConnection.getStats (null).then ((results) => {\n                                        this.getPlayStats (results);\n                                }, (error) => {\n                                        this.logger.info (\"zp.spq.1 getStats error \" + error.toString ());\n                                });\n                        }\n                        \n                }, this.qualityTimeInterval);\n                \n                this.lastPlayStats = {\n                        time: 0,\n                        audioBytesReceived: 0,\n                        videoBytesReceived: 0,\n                        framesDecoded: 0,\n                        framesReceived: 0,\n                        framesDropped: 0\n                };\n        }\n        \n        \n        /*\n         *    \"zp.gps.1\": \"ZegoPlayWeb.getPlayStats\"\n         */\n        private getPlayStats (results) {\n                if (results == undefined) {\n                        return;\n                }\n                \n                var playData = {\n                        audioFractionLost: 0,\n                        audioPacketsLost:0,\n                        videoBitrate: 0,\n                        videoFPS: 0,\n                        playData: 0,\n                        nackCount: 0,\n                        pliCount: 0,\n                        sliCount: 0,\n                        videoFractionLos: 0,\n                        audioJitter: 0,\n                        videoFractionLost: null,\n                        videoFramesDecoded:0,\n                        frameHeight: 0,\n                        frameWidth: 0,\n                        videoTransferFPS: 0,\n                        videoFramesDropped: 0,\n                        totalRoundTripTime: 0,\n                        currentRoundTripTime: 0,\n                        \n                };\n                var time = this.lastPlayStats.time;\n                results.forEach ((result) => {\n                        if ((result.type == \"inbound-rtp\" || (result.type == \"ssrc\" && result.bytesReceived != undefined)) && (result.mediaType == \"audio\" || result.id.indexOf (\"AudioStream\") >= 0)) {\n                                //audio\n                                if (time != 0) {\n                                        playData['audioBitrate'] = 8 * (result.bytesReceived - this.lastPlayStats['audioBytesReceived']) / (result.timestamp - time);\n                                }\n                                \n                                if (playData['audioBitrate'] < 0) {\n                                        playData['audioBitrate'] = 0;\n                                }\n        \n                                playData.audioJitter = result.jitter;\n                                playData.audioPacketsLost=result.packetsLost;\n                                playData.audioFractionLost = result.fractionLost;\n                                \n                                this.lastPlayStats.audioBytesReceived = result.bytesReceived;\n                                this.lastPlayStats.time = result.timestamp;\n                        }\n                        else if ((result.type == \"inbound-rtp\" || (result.type == \"ssrc\" && result.bytesReceived != undefined)) && (result.mediaType == \"video\" || result.id.indexOf (\"VideoStream\") >= 0)) {\n                                //video\n                                if (time != 0) {\n                                        playData.videoBitrate = 8 * (result.bytesReceived - this.lastPlayStats.videoBytesReceived) / (result.timestamp - time);\n                                        playData.videoFPS = 1000 * (result.framesDecoded - this.lastPlayStats.framesDecoded) / (result.timestamp - time);\n                                }\n                                \n                                if (playData.videoBitrate < 0) {\n                                        playData.videoBitrate = 0;\n                                }\n                                \n                                if (playData.videoFPS < 0) {\n                                        playData.videoFPS = 0;\n                                }\n                                \n                                //playData.jitter = result.jitter;\n                                playData.nackCount = result.nackCount;\n                                playData.pliCount = result.pliCount;\n                                playData.sliCount = result.sliCount;\n                                playData.videoFractionLost = result.fractionLost;\n                                playData.videoFramesDecoded = result.framesDecoded\n                                \n                                this.lastPlayStats.videoBytesReceived = result.bytesReceived;\n                                this.lastPlayStats.framesDecoded = result.framesDecoded;\n                                this.lastPlayStats.time = result.timestamp;\n                        }\n                        else if (result.type == \"track\" && (result.kind == \"video\" || result.id.indexOf (\"video\") >= 0)) {\n                                playData.frameHeight = result.frameHeight;\n                                playData.frameWidth = result.frameWidth;\n                                \n                                if (time != 0) {\n                                        playData.videoTransferFPS = 1000 * (result.framesReceived - this.lastPlayStats.framesReceived) / (result.timestamp - time);\n                                        playData.videoFramesDropped = result.framesDropped - this.lastPlayStats.framesDropped;\n                                }\n                                \n                                if (playData.videoTransferFPS < 0) {\n                                        playData.videoTransferFPS = 0;\n                                }\n                                \n                                if (playData.videoFramesDropped < 0) {\n                                        playData.videoFramesDropped = 0;\n                                }\n                                \n                                this.lastPlayStats.framesReceived = result.framesReceived;\n                                this.lastPlayStats.framesDropped = result.framesDropped;\n                        }\n                        else if (result.type == \"candidate-pair\") {\n                                if (result.totalRoundTripTime != undefined) {\n                                        playData.totalRoundTripTime = result.totalRoundTripTime;\n                                }\n                                \n                                if (result.currentRoundTripTime != undefined) {\n                                        playData.currentRoundTripTime = result.currentRoundTripTime;\n                                }\n                        }\n                });\n                \n                // this.logger.debug(\"zp.gps.1 audio: \" + playData.audioBitrate + \" video: \" + playData.videoBitrate +\n                // \" FPS: \" + playData.videoFPS + \" transfer: \" + playData.videoTransferFPS);\n                \n                this.uploadPlayQuality (playData);\n                \n                if (time != 0) {\n                        this.onPlayQualityUpdate (this.streamId, playData);\n                }\n        }\n        \n        /*\n         *    \"zp.upq.1\": \"ZegoPlayWeb.uploadPlayQuality\"\n         */\n        private uploadPlayQuality (playData) {\n                if (!this.qualityUpload) {\n                        return;\n                }\n                \n                var timeStamp = Date.parse (new Date () + '');\n                if (this.qualityUploadLastTime == 0 || timeStamp - this.qualityUploadLastTime >= this.qualityUploadInterval) {\n                        this.logger.debug (\"zp.upq.1 upload\");\n                        \n                        playData[\"stream_type\"] = \"play\";\n                        playData[\"stream_id\"] = this.streamId;\n                        playData[\"timeStamp\"] = timeStamp / 1000;\n                        \n                        this.signal.QualityReport (getSeq (), this.sessionId, playData, (seq, sessionId, data) => {\n                                if (data.report !== undefined) {\n                                        this.qualityUpload = data.report;\n                                        this.qualityUploadInterval = data.report_interval_ms;\n                                }\n                        },   (err, seq)=> {\n                                this.logger.info (\"zp.upq.1 upload failed \" + err);\n                        });\n                        \n                        this.qualityUploadLastTime = timeStamp;\n                }\n        }\n        \n        \n        //////////////////////////////////////////////////////////////////////////////////////////////\n        // server push resetSession\n        /*\n         *    \"zp.orrs.1\": \"ZegoPlayWeb.onRecvResetSession\"\n         */\n        private onRecvResetSession (seq: number, sessionId: number, data: any) {\n                this.logger.info (\"zp.orrs.1 received \");\n                \n                if (sessionId != this.sessionId) {\n                        this.logger.info (\"zp.orrs.1 cannot find session\");\n                        return;\n                }\n                \n                this.dataReport.addEvent (this.reportSeq, \"RecvResetSession\");\n                \n                //check should retry\n                if (this.shouldRetryPlay ()) {\n                        this.startRetryPlay ();\n                }\n        }\n        \n        //////////////////////////////////////////////////////////////////////////////////////////////\n        // server push closeSession\n        /*\n         *    \"zp.orcs.1\": \"ZegoPlayWeb.onRecvCloseSession\"\n         */\n        private onRecvCloseSession (seq: number, sessionId: number, data: any) {\n                this.logger.info (\"zp.orcs.1 reason: \" + data.reason);\n                \n                this.dataReport.addEvent (this.reportSeq, \"RecvCloseSession\");\n                \n                this.signal.sendCloseSessionAck (seq, this.sessionId, 0);\n        \n                var error =  JSON.parse(JSON.stringify(playErrorList.SESSION_CLOSED));\n                error.msg += data.reason;\n                this.playStateUpdateError (error);\n        }\n       \n        \n        \n        //////////////////////////////////////////////////////////////////////////////////////////////\n        // onGotRemoteStream callback\n        /*\n         *    \"zp.ogrs.1\": \"ZegoPlayWeb.onGotRemoteStream\"\n         */\n        private onGotRemoteStream (event) {\n                this.logger.info (\"zp.ogrs.0 called \" + event.stream);\n                if (!this.remoteVideo) {\n                        this.logger.error (\"zp.ogrs.0 no remoteVideo\");\n                        return;\n                }\n                \n                this.remoteVideo.srcObject = event.stream;\n                \n                if (this.audioOputput) {\n                        this.setAudioDestination (this.audioOputput);\n                }\n                \n                this.dataReport.addEvent (this.reportSeq, \"GetRemoteStream\");\n        }\n        \n     \n        \n        //////////////////////////////////////////////////////////////////////////////////////////////\n        // send candidate Info\n        /*\n         *    \"zp.sci.1\": \"ZegoPlayWeb.sendCandidateInfo\"\n         */\n        private sendCandidateInfo (candidateInfo) {\n                this.logger.debug (\"zp.sci.1 called\");\n                \n                \n                candidateInfo = candidateInfo.filter (function (item) {\n                        if (item.candidate.indexOf ('tcp') > 0) {\n                                return false;\n                        }\n                        return true;\n                });\n                \n                if (!candidateInfo || candidateInfo.length < 1) {\n                        this.logger.info (\"zp.sci.1 cancelled\");\n                        return;\n                }\n                \n                this.dataReport.eventStart (this.reportSeq, \"SendIceCandidate\");\n                this.signal.sendCandidateInfo (getSeq (), this.sessionId, candidateInfo, (seq, sessionId, data) => {\n                        this.logger.debug (\"zp.sci.1 send success\");\n                        this.dataReport.eventEnd (this.reportSeq, \"SendIceCandidate\");\n                },  (err, seq)=> {\n                        this.logger.error (\"zp.sci.1 failed to send: \" + err.toString ());\n                        this.dataReport.eventEndWithMsg (this.reportSeq, \"SendIceCandidate\", {\n                                error: err\n                        });\n                        \n                        this.playStateUpdateError (playErrorList.SEND_CANDIDATE_ERROR);\n                });\n        }\n        \n        \n        //////////////////////////////////////////////////////////////////////////////////////////////\n        // error function\n        private shouldSendCloseSession (errorCode) {\n                if (this.state != ENUM_PLAY_STATE_UPDATE.stop && this.state != ENUM_PLAY_STATE.waitingSessionRsp) {\n                        return true;\n                }\n                \n                return false;\n        }\n        \n        private playStateUpdateError (errorCode) {\n                this.logger.debug(\"zp.psue.1 called \" ,errorCode.code);\n                if (this.sessionId != 0 && this.shouldSendCloseSession (errorCode)) {\n                        this.signal.sendCloseSession (getSeq (), this.sessionId, 1);\n                        this.closeSessionSignal = true;\n                }\n                \n                this.state = ENUM_PLAY_STATE.stop;\n                this.onPlayStateUpdate (ENUM_PLAY_STATE_UPDATE.error, this.streamId, errorCode);\n                \n                this.resetPlay ();\n        }\n        \n        onPlayStateUpdate (type, streamId, error?) {\n        };\n        \n        onPlayQualityUpdate (streamId, quality) {\n        };\n        \n        onVideoSizeChanged (streamId, videoWidth, videoHeight) {\n        };\n        \n        /*\n         *    \"zp.sp.1.1\": \"ZegoPlayWeb.stopPlay\"\n         */\n        stopPlay () {\n                \n                this.logger.debug (\"zp.sp.1.1 called\");\n                \n                //send to server\n                if (this.sessionId && !this.closeSessionSignal) {\n                        this.signal.sendCloseSession(getSeq(), this.sessionId, 0);\n                }\n                \n                this.dataReport.eventEndWithMsg (this.reportSeq, \"PlayState\", {\n                        \"state\": this.state + ''\n                });\n                \n                this.dataReport.addEvent (this.reportSeq, \"StopPlay\");\n                \n                this.dataReport.addMsgExt (this.reportSeq, {\n                        \"stream\": this.streamId,\n                        \"sessionId\": this.sessionId\n                });\n                \n                this.dataReport.uploadReport (this.reportSeq, \"RTCPlayStream\");\n                \n                this.resetPlay ();\n        };\n        \n        /*\n         *    \"zp.od.1\": \"ZegoPlayWeb.onDisconnect\"\n         */\n        onDisconnect () {\n                this.logger.info (\"zp.od.1 call\");\n                \n                // if (this.sessionId !== sessionId) {\n                //     this.logger.info(\"zp.od.1 session is not same\");\n                //     return;\n                // }\n                \n                this.logger.info (\"zp.od.1 websocket disconnect\");\n                this.dataReport.addEvent (this.reportSeq, \"OnDisconnect\");\n                \n                this.playStateUpdateError (playErrorList.WEBSOCKET_ERROR);\n        };\n}\n","\nimport {\n        LinkedList,\n        ENUM_CONNECT_STATE,\n        MAX_TRY_CONNECT_COUNT,\n        SEND_MSG_RESET,\n        SEND_MSG_TIMEOUT,\n        MAX_TRY_HEARTBEAT_COUNT\n} from \"./zego.entity\";\nimport {getSeq} from \"./zego.extern\";\nimport {Logger} from \"./zego.logger\";\n\nconst WEBRTC_PROTO_VERSION = \"1.0.1\"; //协议版本号\n\nexport class ZegoSignal {\n        logger: Logger;\n\n        sendDataMap = {};\n        sendDataList = new LinkedList();\n        sendDataCheckOnceCount = 100;\n\n        signalSeq = 0;\n\n        pushCallback = {};\n\n        sessionInfos = {};\n\n        //tryheartbeat\n        tryHeartbeatCount = 0;\n        // heartbeatTimer = null;\n        heartbeatInterval = 10 * 1000;\n\n        sendDataTimeout = 5 * 1000; //发送消息超时\n        sendDataDropTimeout = 10 * 1000; //丢弃过期消息的超时时间\n\n        tryConnectCount = 0;\n        tryConnectTimer = null;\n        tryConnectInterval = 3000;\n\n        state = ENUM_CONNECT_STATE.disconnect;\n\n        //token\n        tokenType = 0;\n\n        browser = this.getBrowserAndVersion();\n        platform = navigator.platform;\n\n        appid: string;\n        userid: string;\n        token: string;\n        connectCallback: Function;\n        server: string;\n        websocket: WebSocket;\n \n\n        globalHeader: {\n                [indes: string]: number | string\n        }\n\n        \n\n       \n\n        constructor(logger: Logger) {\n                this.logger = logger;\n        }\n\n\n        getBrowserAndVersion(): { name: string, version: string } {\n                let ua = navigator.userAgent, tem,\n                        M = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*([\\d\\.]+)/i) || [];\n                if (/trident/i.test(M[1])) {\n                        tem = /\\brv[ :]+([\\d\\.]+)/g.exec(ua) || [];\n                        return {name: 'IE', version: (tem[1] || '')};\n                }\n                if (M[1] === 'Chrome') {\n                        tem = ua.match(/\\bOPR|Edge\\/([\\d\\.]+)/);\n                        if (tem != null) {\n                                return {name: 'Opera', version: tem[1]};\n                        }\n                }\n                M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];\n                if ((tem = ua.match(/version\\/([\\d+\\.]+)/i)) != null) {\n                        M.splice(1, 1, tem[1]);\n                }\n\n                return {\n                        name: M[0],\n                        version: M[1]\n                };\n        }\n\n        /*\n         *    \"zs.ssi.0\": \"ZegoSignal.setSessionInfo\"\n         */\n        setSessionInfo(appid: number, userid: string) {\n                this.logger.debug(\"zs.ssi.0 call\");\n\n                this.appid = appid+'';\n                this.userid = userid;\n                // this.server = serverUrl;\n        };\n\n        onDisconnect(server) {\n        };\n\n        onUpdateHeartBeartInterval(interval) {\n        };\n\n        /*\n         *    \"zs.cs.0\": \"ZegoSignal.connectServer\"\n         */\n\n        private resetConnectTimer() {\n                this.logger.info(\"zs.rct.0 call\");\n                clearTimeout(this.tryConnectTimer);\n                this.tryConnectTimer = null;\n                this.tryConnectCount = 0;\n        }\n\n        private bindWebSocketHandle() {\n                this.websocket.onmessage = e => {\n                        let msg: any = JSON.parse(e.data);\n                        this.logger.debug(\"zs.bsh.0 signmsg= \", msg.header.cmd);\n\n                        if (msg.header.appid != this.appid || msg.header.user_id !== this.userid) {\n                                this.logger.warn(\"zs.bsh.0 check header failed\");\n                                return;\n                        }\n\n                        this.handleServerPush(msg);\n                };\n\n                this.websocket.onclose = (e) => {\n                        this.logger.info(\"zs.bsh.0 close msg = \" + JSON.stringify(e));\n\n                        if (this.state != ENUM_CONNECT_STATE.disconnect) {\n                                //try connect\n                                this.resetConnectTimer();\n                                this.startConnectTimer();\n\n                                //all request timeout\n                                this.resetCheckMessage();\n                        }\n                };\n\n                this.websocket.onerror = (e) => {\n                        this.logger.error(\"zs.bsh.0 msg = \" + JSON.stringify(e));\n                };\n        }\n\n\n        private resetCheckMessage() {\n                this.logger.debug(\"zs.rcm.0 call\");\n\n                // clearTimeout(this.sendDataCheckTimer);\n                // this.sendDataCheckTimer = null;\n\n                let head = this.sendDataList.getFirst();\n                while (head != null) {\n                        this.sendDataList.remove(head);\n\n                        if (head._data.error)\n                                head._data.error(SEND_MSG_RESET, head._data.seq);\n\n                        head = this.sendDataList.getFirst();\n                }\n\n                this.sendDataMap = {};\n        }\n\n\n        private handleServerPush(msg) {\n                switch (msg.header.cmd) {\n                        case 'LoginRsp':\n                                this.handleRespondData(\"LoginReq\", msg);\n                                break;\n                        case 'CreateSessionRsp':\n                                this.handleRespondData(\"CreateSessionReq\", msg);\n                                if (msg.body.result === 0)\n                                        this.addSession(msg.header.session_id, msg.body.session_token);\n                                break;\n                        case 'MediaDescRsp':\n                                this.handleRespondData(\"MediaDescReq\", msg);\n                                break;\n                        case 'CandidateInfoRsp':\n                                this.handleRespondData(\"CandidateInfoReq\", msg);\n                                break;\n                        case 'CloseSessionRsp':\n                                this.handleRespondData(\"CloseSessionReq\", msg);\n                                this.removeSession(msg.header.session_id);\n                                break;\n                        case 'ClientHBRsp':\n                                this.handleRespondData(\"ClientHBReq\", msg);\n                                break;\n                        case 'MediaDescPush':\n                                this.handlePushData(msg);\n                                break;\n                        case 'CandidateInfoPush':\n                                this.handlePushData(msg);\n                                break;\n                        case 'CloseSessionPush':\n                                this.handlePushData(msg);\n                                this.removeSession(msg.header.session_id);\n                                break;\n                        case 'QualityReportRsp':\n                                this.handleRespondData(\"QualityReportReq\", msg);\n                                break;\n                        case 'SessionResetPush':\n                                this.handlePushResetSessionData(msg);\n                                break;\n                }\n        }\n\n        private disconnectCallback() {\n                // for (let sessionId in this.sessionInfos) {\n                //     let callbackData = this.pushCallback[\"WebSocketDisconnect\"+ sessionId];\n                //     if (callbackData == null) {\n                //         this.logger.error(\"zs.dc.0 no callbackData\");\n                //         return;\n                //     }\n\n                //     if (callbackData.callback) {\n                //         callbackData.callback(callbackData.object, parseInt(sessionId));\n                //     }\n                // }\n\n                if (this.connectCallback) {\n                        this.connectCallback(-1, this.server, undefined);\n                        this.connectCallback = null;\n                }\n\n                let server = this.server;\n                this.disconnectServer();\n                this.onDisconnect(server);\n        }\n\n        private updateToken() {\n                this.logger.info(\"zs.ut.0 call\");\n\n                let cmd = \"LoginReq\";\n                let body = {\n                        'token': this.token,\n                        'tokenType': this.tokenType\n                };\n\n                if (Object.keys(this.sessionInfos).length != 0) {\n                        let sessions = [];\n                        for (let sessionId in this.sessionInfos) {\n                                let session_id = parseInt(sessionId);\n                                sessions.push({\n                                        session_id: session_id,\n                                        session_token: this.sessionInfos[session_id].token\n                                });\n                        }\n\n                        body[\"sessions\"] = sessions;\n                }\n\n                this.sendMessageWithCallback(cmd, getSeq(), 0, body, (seq, session_id, data) => {\n                        if (data.result == 0) {\n                                this.token = data.token;\n                                this.tokenType = data.tokenType;\n\n                                let tokenInfo = {\n                                        report: data.report,\n                                        report_interval: data.report_interval_ms\n                                };\n\n                                if (this.connectCallback != null) {\n                                        this.connectCallback(0, this.server, tokenInfo);\n                                        this.connectCallback = null;\n                                }\n                        } else {\n                                let errorTokenInfo = {\n                                        error: data.strError\n                                };\n\n                                if (this.connectCallback != null) {\n                                        this.connectCallback(data.result, this.server, errorTokenInfo);\n                                        this.connectCallback = null;\n                                }\n                        }\n                }, (err, seq) => {\n                        if (this.connectCallback != null) {\n                                this.connectCallback(-1, this.server, undefined);\n                                this.connectCallback = null;\n                        }\n                });\n        }\n\n\n        sendMessageWithCallback(cmd: string, seq: number, sessionId: number, body: any, success: Function, error: Function) {\n                this.logger.debug(\"zs.smwc.0 call \" + cmd);\n\n                if (!this.websocket || this.websocket.readyState !== 1) {\n                        this.logger.error(\"zs.smwc.0 connect not establish\");\n                        if (error) {\n                                error(SEND_MSG_TIMEOUT, seq);\n                        }\n\n                        return;\n                }\n\n                let header = this.getHeader(cmd, seq, sessionId);\n                let data = {\n                        'header': header,\n                        'body': body\n                };\n\n                if (success == undefined) {\n                        success = null;\n                }\n\n                if (error == undefined) {\n                        error = null;\n                }\n\n                let cmdData = {\n                        // data: data,\n                        seq: seq,\n                        deleted: false,\n                        cmd: cmd,\n                        time: Date.parse(new Date() + ''),\n                        success: success,\n                        error: error,\n                };\n\n                let cmdDataNode = this.sendDataList.push(cmdData);\n                this.sendDataMap[cmdData.seq] = cmdDataNode;\n\n                let dataBuffer = JSON.stringify(data);\n                this.websocket.send(dataBuffer);\n\n                this.logger.debug('zs.smwc.0 success');\n        }\n\n\n        private getHeader(cmd: string, seq: number, sessionId: number) {\n                this.globalHeader = {\n                        'version': WEBRTC_PROTO_VERSION,\n                        'cmd': cmd,\n                        'appid': this.appid+'',\n                        'seq': seq,\n                        'user_id': this.userid,\n                        'session_id': sessionId\n                };\n\n                return this.globalHeader;\n        }\n\n        //rtc信令连接\n        connectServer(token: string, serverUrl: string, result: Function) {\n                this.token = token;\n                this.server = serverUrl;\n                this.state = ENUM_CONNECT_STATE.connecting;\n                this.connectCallback = result;\n\n\n                if (!this.websocket || this.websocket.readyState !== 1) {\n                        this.logger.debug(\"zs.cs.0 need new websocket\");\n\n                        try {\n                                if (this.websocket) {\n                                        this.logger.warn(\"zs.cs.0 close error websocket\");\n                                        this.websocket.onclose = null;\n                                        this.websocket.onerror = null;\n                                        this.websocket.close();\n                                        this.websocket = null;\n                                }\n\n                                //connect websocket\n                                this.websocket = new WebSocket(this.server);\n                                this.websocket.onopen = () => {\n \n\n                                        //reset connect timer\n                                        this.resetConnectTimer();\n\n                                        //register onMessage\n                                        this.logger.info(\"zs.cs.0 websocket open call\");\n                                        this.bindWebSocketHandle();\n\n                                        //update token\n                                        this.updateToken();\n\n                                        this.state = ENUM_CONNECT_STATE.connected;\n                                };\n\n                        }\n                        catch (e) {\n                                this.logger.error(\"zs.cs.0 websocket error \" + e);\n                        }\n                } else {\n                        //websocket is already connect\n                       // this.resetConnectTimer();\n                        this.state = ENUM_CONNECT_STATE.connected;\n                }\n\n                this.resetConnectTimer();\n                this.tryConnectTimer = setTimeout(() => {\n                        this.startConnectTimer(result);\n                }, this.tryConnectInterval);\n        };\n\n        private startConnectTimer(callback?: Function) {\n                this.logger.info(\"zs.sct.0 call\");\n\n                if (this.tryConnectCount > MAX_TRY_CONNECT_COUNT) {\n                        this.logger.error(\"zs.sct.0 beyond max limit\");\n\n                        this.disconnectCallback();\n                        return;\n                }\n\n                if (!this.websocket || this.websocket.readyState !== 1) {\n                        this.tryConnectCount += 1;\n                        this.connectServer(this.token, this.server, callback);\n                } else {\n                        //already connect\n                        this.resetConnectTimer();\n                }\n        }\n\n        /*\n         *    \"zs.ds.0\": \"ZegoSignal.disconnectServer\"\n         */\n\n        //rtc信令断开连接\n        disconnectServer() {\n                this.logger.debug('zs.ds.0 call');\n                this.server = null;\n                this.connectCallback = null;\n\n                this.resetCheckMessage();\n                this.resetConnectTimer();\n\n                if (this.websocket) {\n                        this.websocket.onclose = null;\n                        this.websocket.onerror = null;\n                        this.websocket.close();\n                        this.websocket = null;\n                }\n\n                this.token = \"\";\n                this.sessionInfos = {};\n                this.tokenType = 0;\n\n                this.tryHeartbeatCount = 0;\n\n                this.tryConnectCount = 0;\n\n                this.state = ENUM_CONNECT_STATE.disconnect;\n        };\n\n        isServerConnected() {\n                if (this.websocket && this.websocket.readyState === 1) {\n                        return true;\n                }\n\n                return false;\n        };\n\n        /*\n         *    \"zs.cs.1\": \"ZegoSignal.createSession\"\n         */\n        createSession(seq: number, type: number,mode:number, streamId: string, success, error) {\n                this.logger.debug(\"zs.cs.1 call: \", streamId);\n\n                let cmd = \"CreateSessionReq\";\n                let body = {\n                        'type': type,\n                        'stream_id': streamId,\n                        'platform': this.platform,\n                        'browser': this.browser.name,\n                        'version': this.browser.version,\n                        'app_id': this.appid,\n                        'negotiate_mode':mode\n                };\n\n                // //publish\n                // if (type == 0) {\n                //         body['negotiate_mode'] = 0;\n                // } else {\n                //         body['negotiate_mode'] = 1;\n                // }\n\n                this.sendMessageWithCallback(cmd, seq, 0, body, success, error);\n        };\n\n        removeSession(sessionId: number) {\n                this.logger.info(\"zs.rs.0 call\");\n\n                if (this.sessionInfos[sessionId]) {\n                        delete this.sessionInfos[sessionId];\n                }\n        }\n\n        /*\n        *    \"zs.scs.0\": \"ZegoSignal.sendCloseSession\"\n        */\n        sendCloseSession(seq: number, sessionId: number, reason: number, success?: Function, error?: Function) {\n                this.logger.debug(\"zs.scs.0 call: \", sessionId);\n\n                let cmd = \"CloseSessionReq\";\n                let body = {\n                        'reason': reason\n                };\n\n                this.removeSession(sessionId);\n\n                this.sendMessageWithCallback(cmd, seq, sessionId, body, success, error);\n        };\n\n\n        private sendMessage(cmd: string, seq: number, sessionId: number, body: any) {\n                this.logger.debug(\"zs.sm.0 call \" + cmd);\n\n                if (!this.websocket || this.websocket.readyState !== 1) {\n                        this.logger.error(\"zs.sm.0 connect not establish\");\n                        return;\n                }\n\n                let header = this.getHeader(cmd, seq, sessionId);\n                let data = {\n                        'header': header,\n                        'body': body\n                };\n\n                let dataBuffer = JSON.stringify(data);\n                this.websocket.send(dataBuffer);\n\n                this.logger.debug('zs.sm.0 success');\n        }\n\n\n        /*\n         *    \"zs.hrd.0\": \"ZegoSignal.handleRespondData\"\n         */\n        handleRespondData(cmd: string, msg: any) {\n                this.logger.debug(\"zs.hrd.0 call\");\n\n                //callback\n                let sendDataNode = this.sendDataMap[msg.header.seq];\n                if (sendDataNode == null) {\n                        \n                        this.logger.error(\"zs.hrd.0 cannot find data \"+ cmd);\n                        return;\n                }\n\n                let sendData = sendDataNode._data;\n                if (sendData.cmd !== cmd) {\n                        this.logger.error(\"sz.hrd.0 command is not match\");\n                } else if (sendData.success) {\n                        sendData.success(msg.header.seq, msg.header.session_id, msg.body);\n                }\n\n                delete this.sendDataMap[msg.header.seq];\n                this.sendDataList.remove(sendDataNode);\n        }\n\n\n        /*\n         *    \"zs.as.0\": \"ZegoSignal.addSession\"\n         */\n\n        addSession(sessionId: string, token) {\n                this.logger.info(\"zs.as.0 call\");\n                this.sessionInfos[sessionId] = {\n                        token: token\n                };\n        }\n\n        /*\n         *    \"zs.hpd.0\": \"ZegoSignal.handlePushData\"\n         */\n        handlePushData(msg: any) {\n                this.logger.debug(\"zs.hpd.0 call \" + msg.header.cmd + \" session \" + msg.header.session_id);\n\n                let callbackData = this.pushCallback[msg.header.cmd + msg.header.session_id];\n                if (!callbackData) {\n                        this.logger.info(\"zs.hpd.0 no callbackData \" + msg.header.cmd + \" session: \" + msg.header.session_id);\n                        return;\n                }\n\n                if (callbackData.callback) {\n                        callbackData.callback(msg.header.seq, msg.header.session_id, msg.body);\n                }\n        }\n\n\n        /*\n         *    \"zs.hprsd.0\": \"ZegoSignal.handlePushResetSessionData\"\n         */\n        handlePushResetSessionData(msg) {\n                this.logger.debug(\"zs.hprsd.0 call \");\n\n                let sessionList = [];\n                if (msg.body.cResetType == 0) {\n                        sessionList = Object.keys(this.sessionInfos);\n                } else if (msg.body.cResetType == 1) {\n                        for (let i = 0; i < msg.body.session_ids.length; i++) {\n                                sessionList.push(msg.body.session_ids[i]);\n                        }\n                }\n\n                //send ack\n                this.sendResetSessionAck(msg.header.seq, 0, 0);\n\n                if (sessionList.length == 0) {\n                        this.logger.info(\"zs.hprsd.0 no session to callback\");\n                        return;\n                }\n\n                for (let j = 0; j < sessionList.length; j++) {\n                        let callbackData = this.pushCallback[msg.header.cmd + sessionList[j]];\n                        if (callbackData == null) {\n                                this.logger.info(\"zs.hprsd.0 no callbackData \" + sessionList[j]);\n                        }\n                        else {\n                                if (callbackData.callback) {\n                                        callbackData.callback(callbackData.object, msg.header.seq, sessionList[j], msg.body);\n                                }\n                        }\n                }\n        }\n\n\n        /*\n         *    \"zs.smd.0\": \"ZegoSignal.sendMediaDesc\"\n         */\n        //type 0: offer  1: answer\n        sendMediaDesc(seq: number, sessionId: number, type: number, desc: {\n                sdp: any,\n                width?: number,\n                height?: number,\n                frameRate?: number,\n                video_min_kpbs?: number,\n                video_max_kpbs?: number,\n                audio_kpbs?: number\n        }, success: Function, error: Function) {\n                this.logger.debug(\"zs.smd.0 call: \", sessionId);\n\n                let cmd = \"MediaDescReq\";\n                let body = {\n                        'type': type,\n                        'sdp': desc.sdp,\n                };\n\n                if (desc.width != undefined) {\n                        body['width'] = desc.width;\n                }\n\n                if (desc.height != undefined) {\n                        body['height'] = desc.height;\n                }\n\n                if (desc.frameRate != undefined) {\n                        body['framerate'] = desc.frameRate;\n                }\n\n                if (desc.video_min_kpbs != undefined) {\n                        body['video_min_kpbs'] = desc.video_min_kpbs;\n                }\n\n                if (desc.video_max_kpbs != undefined) {\n                        body['video_max_kpbs'] = desc.video_max_kpbs;\n                }\n\n                if (desc.audio_kpbs != undefined) {\n                        body['audio_kpbs'] = desc.audio_kpbs;\n                }\n\n                this.sendMessageWithCallback(cmd, seq, sessionId, body, success, error);\n        };\n\n        /*\n         *    \"zs.sci.0\": \"ZegoSignal.sendCandidateInfo\"\n         */\n        sendCandidateInfo(seq, sessionId, candidateList, success, error) {\n                this.logger.debug(\"zs.sci.0 call: \", sessionId);\n\n                let cmd = \"CandidateInfoReq\";\n                let dataList = [];\n                for (let i = 0; i < candidateList.length; i++) {\n                        let info = {\n                                'candidate': candidateList[i].candidate,\n                                'sdpMid': candidateList[i].sdpMid,\n                                'sdpMLineIndex': candidateList[i].sdpMLineIndex\n                        };\n\n                        dataList.push(info);\n                }\n\n                let body = {\n                        'infos': dataList\n                };\n\n                this.sendMessageWithCallback(cmd, seq, sessionId, body, success, error);\n        };\n\n\n        /*\n         *    \"zs.smda.0\": \"ZegoSignal.sendMediaDescAck\"\n         */\n        sendMediaDescAck(seq, sessionId, result) {\n                this.logger.debug(\"zs.smda.0 call: \", sessionId);\n\n                let cmd = \"MediaDescAck\";\n                let body = {\n                        'result': result\n                };\n\n                this.sendMessage(cmd, seq, sessionId, body);\n        };\n\n        /*\n         *    \"zs.scia.0\": \"ZegoSignal.sendCandidateInfoAck\"\n         */\n        sendCandidateInfoAck(seq, sessionId, result) {\n                this.logger.debug(\"zs.scia.0 call: \", sessionId);\n\n                let cmd = \"CandidateInfoAck\";\n                let body = {\n                        'result': result\n                };\n\n                this.sendMessage(cmd, seq, sessionId, body);\n        };\n\n        /*\n         *    \"zs.scsa.0\": \"ZegoSignal.sendCloseSessionAck\"\n         */\n        sendCloseSessionAck(seq, sessionId, result) {\n                this.logger.debug(\"zs.scsa.0 call: \", sessionId);\n\n                let cmd = \"CloseSessionAck\";\n                let body = {\n                        'result': result\n                };\n\n                this.sendMessage(cmd, seq, sessionId, body);\n        };\n\n        /*\n         *    \"zs.ssra.0\": \"ZegoSignal.sendResetSessionAck\"\n         */\n        sendResetSessionAck(seq, sessionId, result) {\n                this.logger.debug(\"zs.ssra.0 call: \", sessionId);\n\n                let cmd = \"SessionResetAck\";\n                let body = {\n                        'result': result\n                };\n\n                this.sendMessage(cmd, seq, sessionId, body);\n        };\n\n        /*\n         *    \"zs.rpc.0\": \"ZegoSignal.registerPushCallback\"\n         */\n        registerPushCallback(cmd:string, sessionId:number, callback:Function) {\n                //this.logger.debug(\"zs.rpc.0 call: \", cmd);\n\n                if (callback && (typeof callback === 'function')) {\n                        this.logger.debug(\"zs.rpc.0 setcallback\");\n                        this.pushCallback[cmd + sessionId] = {callback: callback};\n                }\n        };\n\n        /*\n         *    \"zs.upc.0\": \"ZegoSignal.unregisterPushCallback\"\n         */\n        unregisterPushCallback(cmd, sessionId) {\n                //this.logger.info(\"zs.urpc.0 call: \", cmd);\n\n                delete this.pushCallback[cmd + sessionId];\n        };\n\n        /*\n         *    \"zs.cmt.0\": \"ZegoSignal.checkMessageTimeout\"\n         */\n        checkMessageTimeout() {\n\n                let head = this.sendDataList.getFirst();\n                let timestamp = Date.parse(new Date() + '');\n                let checkCount = 0;\n                let timeoutMsgCount = 0;\n                let dropMsgCount = 0;\n\n                //this.logger.debug('zs.cmt.0 call ' + timestamp);\n\n                while (head != null) {\n                        if ((head._data.time + this.sendDataTimeout) > timestamp) {\n                                break;\n                        }\n\n                        delete this.sendDataMap[head._data.seq];\n                        this.sendDataList.remove(head);\n                        ++timeoutMsgCount;\n\n                        if (head._data.error == null ||\n                                (this.sendDataDropTimeout > 0 &&\n                                        (head._data.time + this.sendDataDropTimeout) < timestamp)) {\n                                ++dropMsgCount;\n                        }\n                        else {\n                                if (head._data.error)\n                                        head._data.error(SEND_MSG_TIMEOUT, head._data.seq);\n                        }\n\n                        ++checkCount;\n                        if (checkCount >= this.sendDataCheckOnceCount) {\n                                break;\n                        }\n\n                        head = this.sendDataList.getFirst();\n                }\n\n                // this.sendDataCheckTimer = setTimeout(function() {\n                //     checkMessageTimeout(this);\n                // }, this.sendDataCheckInterval);\n\n                if (timeoutMsgCount != 0 || dropMsgCount != 0) {\n                        this.logger.debug(\"zs.cmt.0 call success, state: timeout=\", timeoutMsgCount, \" drop=\", dropMsgCount);\n                }\n        };\n\n        /*\n         *    \"zs.shb.0\": \"ZegoSignal.signalHeartbeat\"\n         */\n        sendHeartbeat() {\n                this.logger.debug(\"zs.shb.0 call\");\n\n                if (Object.keys(this.sessionInfos).length == 0) {\n                        this.logger.info(\"zs.shb.0 no need to heartbeat\");\n                        return;\n                }\n\n                if (++this.tryHeartbeatCount > MAX_TRY_HEARTBEAT_COUNT) {\n                        this.logger.error(\"zs.shb.0 heartbeat try limit\");\n\n                        this.disconnectCallback();\n                        return;\n                }\n\n                let sessionIdList = [];\n                for (let sessionId in this.sessionInfos) {\n                        sessionIdList.push(parseInt(sessionId));\n                }\n\n                let body = {\n                        'session_ids': sessionIdList\n                };\n\n                this.sendMessageWithCallback(\"ClientHBReq\", getSeq(), 0, body, (seq, sessionId, data) => {\n                        if (this.heartbeatInterval != data.hb_interval) {\n                                this.heartbeatInterval = data.hb_interval;\n\n                                this.onUpdateHeartBeartInterval(data.hb_interval);\n                        }\n\n                        this.tryHeartbeatCount = 0;\n                },  (err, seq) =>{\n                        this.tryHeartbeatCount += 1;\n                });\n        };\n\n        /*\n         *    \"zs.qr.0\": \"ZegoSignal.QualityReport\"\n         */\n        QualityReport(seq, sessionId, qualityStat, success, error) {\n                this.logger.debug(\"zs.qr.0 call\");\n\n                let cmd = \"QualityReportReq\";\n                let body = {\n                        streams: [qualityStat]\n                };\n\n                this.sendMessageWithCallback(cmd, seq, sessionId, body, success, error);\n        };\n\n\n}\n","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","(function (f) {\n    if (typeof exports === \"object\" && typeof module !== \"undefined\") {\n        module.exports = f()\n    } else if (typeof define === \"function\" && define.amd) {\n        define([], f)\n    } else {\n        var g;\n        if (typeof window !== \"undefined\") {\n            g = window\n        } else if (typeof global !== \"undefined\") {\n            g = global\n        } else if (typeof self !== \"undefined\") {\n            g = self\n        } else {\n            g = this\n        }\n        g.adapter = f()\n    }\n})(function () {\n    var define, module, exports;\n    return (function e(t, n, r) {\n        function s(o, u) {\n            if (!n[o]) {\n                if (!t[o]) {\n                    var a = typeof require == \"function\" && require;\n                    if (!u && a) return a(o, !0);\n                    if (i) return i(o, !0);\n                    var f = new Error(\"Cannot find module '\" + o + \"'\");\n                    throw f.code = \"MODULE_NOT_FOUND\", f\n                }\n                var l = n[o] = {exports: {}};\n                t[o][0].call(l.exports, function (e) {\n                    var n = t[o][1][e];\n                    return s(n ? n : e)\n                }, l, l.exports, e, t, n, r)\n            }\n            return n[o].exports\n        }\n\n        var i = typeof require == \"function\" && require;\n        for (var o = 0; o < r.length; o++) s(r[o]);\n        return s\n    })({\n        1: [function (require, module, exports) {\n            /*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n            /* eslint-env node */\n            'use strict';\n\n            var SDPUtils = require('sdp');\n\n            function fixStatsType(stat) {\n                return {\n                    inboundrtp: 'inbound-rtp',\n                    outboundrtp: 'outbound-rtp',\n                    candidatepair: 'candidate-pair',\n                    localcandidate: 'local-candidate',\n                    remotecandidate: 'remote-candidate'\n                }[stat.type] || stat.type;\n            }\n\n            function writeMediaSection(transceiver, caps, type, stream, dtlsRole) {\n                var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n                // Map ICE parameters (ufrag, pwd) to SDP.\n                sdp += SDPUtils.writeIceParameters(\n                    transceiver.iceGatherer.getLocalParameters());\n\n                // Map DTLS parameters to SDP.\n                sdp += SDPUtils.writeDtlsParameters(\n                    transceiver.dtlsTransport.getLocalParameters(),\n                    type === 'offer' ? 'actpass' : dtlsRole || 'active');\n\n                sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n                if (transceiver.rtpSender && transceiver.rtpReceiver) {\n                    sdp += 'a=sendrecv\\r\\n';\n                } else if (transceiver.rtpSender) {\n                    sdp += 'a=sendonly\\r\\n';\n                } else if (transceiver.rtpReceiver) {\n                    sdp += 'a=recvonly\\r\\n';\n                } else {\n                    sdp += 'a=inactive\\r\\n';\n                }\n\n                if (transceiver.rtpSender) {\n                    var trackId = transceiver.rtpSender._initialTrackId ||\n                        transceiver.rtpSender.track.id;\n                    transceiver.rtpSender._initialTrackId = trackId;\n                    // spec.\n                    var msid = 'msid:' + (stream ? stream.id : '-') + ' ' +\n                        trackId + '\\r\\n';\n                    sdp += 'a=' + msid;\n                    // for Chrome. Legacy should no longer be required.\n                    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n                        ' ' + msid;\n\n                    // RTX\n                    if (transceiver.sendEncodingParameters[0].rtx) {\n                        sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n                            ' ' + msid;\n                        sdp += 'a=ssrc-group:FID ' +\n                            transceiver.sendEncodingParameters[0].ssrc + ' ' +\n                            transceiver.sendEncodingParameters[0].rtx.ssrc +\n                            '\\r\\n';\n                    }\n                }\n                // FIXME: this should be written by writeRtpDescription.\n                sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n                    ' cname:' + SDPUtils.localCName + '\\r\\n';\n                if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n                    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n                        ' cname:' + SDPUtils.localCName + '\\r\\n';\n                }\n                return sdp;\n            }\n\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\n            function filterIceServers(iceServers, edgeVersion) {\n                var hasTurn = false;\n                iceServers = JSON.parse(JSON.stringify(iceServers));\n                return iceServers.filter(function (server) {\n                    if (server && (server.urls || server.url)) {\n                        var urls = server.urls || server.url;\n                        if (server.url && !server.urls) {\n                            console.warn('RTCIceServer.url is deprecated! Use urls instead.');\n                        }\n                        var isString = typeof urls === 'string';\n                        if (isString) {\n                            urls = [urls];\n                        }\n                        urls = urls.filter(function (url) {\n                            var validTurn = url.indexOf('turn:') === 0 &&\n                                url.indexOf('transport=udp') !== -1 &&\n                                url.indexOf('turn:[') === -1 &&\n                                !hasTurn;\n\n                            if (validTurn) {\n                                hasTurn = true;\n                                return true;\n                            }\n                            return url.indexOf('stun:') === 0 && edgeVersion >= 14393 &&\n                                url.indexOf('?transport=udp') === -1;\n                        });\n\n                        delete server.url;\n                        server.urls = isString ? urls[0] : urls;\n                        return !!urls.length;\n                    }\n                });\n            }\n\n// Determines the intersection of local and remote capabilities.\n            function getCommonCapabilities(localCapabilities, remoteCapabilities) {\n                var commonCapabilities = {\n                    codecs: [],\n                    headerExtensions: [],\n                    fecMechanisms: []\n                };\n\n                var findCodecByPayloadType = function (pt, codecs) {\n                    pt = parseInt(pt, 10);\n                    for (var i = 0; i < codecs.length; i++) {\n                        if (codecs[i].payloadType === pt ||\n                            codecs[i].preferredPayloadType === pt) {\n                            return codecs[i];\n                        }\n                    }\n                };\n\n                var rtxCapabilityMatches = function (lRtx, rRtx, lCodecs, rCodecs) {\n                    var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\n                    var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\n                    return lCodec && rCodec &&\n                        lCodec.name.toLowerCase() === rCodec.name.toLowerCase();\n                };\n\n                localCapabilities.codecs.forEach(function (lCodec) {\n                    for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n                        var rCodec = remoteCapabilities.codecs[i];\n                        if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n                            lCodec.clockRate === rCodec.clockRate) {\n                            if (lCodec.name.toLowerCase() === 'rtx' &&\n                                lCodec.parameters && rCodec.parameters.apt) {\n                                // for RTX we need to find the local rtx that has a apt\n                                // which points to the same local codec as the remote one.\n                                if (!rtxCapabilityMatches(lCodec, rCodec,\n                                    localCapabilities.codecs, remoteCapabilities.codecs)) {\n                                    continue;\n                                }\n                            }\n                            rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\n                            // number of channels is the highest common number of channels\n                            rCodec.numChannels = Math.min(lCodec.numChannels,\n                                rCodec.numChannels);\n                            // push rCodec so we reply with offerer payload type\n                            commonCapabilities.codecs.push(rCodec);\n\n                            // determine common feedback mechanisms\n                            rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function (fb) {\n                                for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n                                    if (lCodec.rtcpFeedback[j].type === fb.type &&\n                                        lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n                                        return true;\n                                    }\n                                }\n                                return false;\n                            });\n                            // FIXME: also need to determine .parameters\n                            //  see https://github.com/openpeer/ortc/issues/569\n                            break;\n                        }\n                    }\n                });\n\n                localCapabilities.headerExtensions.forEach(function (lHeaderExtension) {\n                    for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n                         i++) {\n                        var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n                        if (lHeaderExtension.uri === rHeaderExtension.uri) {\n                            commonCapabilities.headerExtensions.push(rHeaderExtension);\n                            break;\n                        }\n                    }\n                });\n\n                // FIXME: fecMechanisms\n                return commonCapabilities;\n            }\n\n// is action=setLocalDescription with type allowed in signalingState\n            function isActionAllowedInSignalingState(action, type, signalingState) {\n                return {\n                    offer: {\n                        setLocalDescription: ['stable', 'have-local-offer'],\n                        setRemoteDescription: ['stable', 'have-remote-offer']\n                    },\n                    answer: {\n                        setLocalDescription: ['have-remote-offer', 'have-local-pranswer'],\n                        setRemoteDescription: ['have-local-offer', 'have-remote-pranswer']\n                    }\n                }[type][action].indexOf(signalingState) !== -1;\n            }\n\n            function maybeAddCandidate(iceTransport, candidate) {\n                // Edge's internal representation adds some fields therefore\n                // not all fieldѕ are taken into account.\n                var alreadyAdded = iceTransport.getRemoteCandidates()\n                    .find(function (remoteCandidate) {\n                        return candidate.foundation === remoteCandidate.foundation &&\n                            candidate.ip === remoteCandidate.ip &&\n                            candidate.port === remoteCandidate.port &&\n                            candidate.priority === remoteCandidate.priority &&\n                            candidate.protocol === remoteCandidate.protocol &&\n                            candidate.type === remoteCandidate.type;\n                    });\n                if (!alreadyAdded) {\n                    iceTransport.addRemoteCandidate(candidate);\n                }\n                return !alreadyAdded;\n            }\n\n\n            function makeError(name, description) {\n                var e = new Error(description);\n                e.name = name;\n                // legacy error codes from https://heycam.github.io/webidl/#idl-DOMException-error-names\n                e.code = {\n                    NotSupportedError: 9,\n                    InvalidStateError: 11,\n                    InvalidAccessError: 15,\n                    TypeError: undefined,\n                    OperationError: undefined\n                }[name];\n                return e;\n            }\n\n            module.exports = function (window, edgeVersion) {\n                // https://w3c.github.io/mediacapture-main/#mediastream\n                // Helper function to add the track to the stream and\n                // dispatch the event ourselves.\n                function addTrackToStreamAndFireEvent(track, stream) {\n                    stream.addTrack(track);\n                    stream.dispatchEvent(new window.MediaStreamTrackEvent('addtrack',\n                        {track: track}));\n                }\n\n                function removeTrackFromStreamAndFireEvent(track, stream) {\n                    stream.removeTrack(track);\n                    stream.dispatchEvent(new window.MediaStreamTrackEvent('removetrack',\n                        {track: track}));\n                }\n\n                function fireAddTrack(pc, track, receiver, streams) {\n                    var trackEvent = new Event('track');\n                    trackEvent.track = track;\n                    trackEvent.receiver = receiver;\n                    trackEvent.transceiver = {receiver: receiver};\n                    trackEvent.streams = streams;\n                    window.setTimeout(function () {\n                        pc._dispatchEvent('track', trackEvent);\n                    });\n                }\n\n                var RTCPeerConnection = function (config) {\n                    var pc = this;\n\n                    var _eventTarget = document.createDocumentFragment();\n                    ['addEventListener', 'removeEventListener', 'dispatchEvent']\n                        .forEach(function (method) {\n                            pc[method] = _eventTarget[method].bind(_eventTarget);\n                        });\n\n                    this.canTrickleIceCandidates = null;\n\n                    this.needNegotiation = false;\n\n                    this.localStreams = [];\n                    this.remoteStreams = [];\n\n                    this.localDescription = null;\n                    this.remoteDescription = null;\n\n                    this.signalingState = 'stable';\n                    this.iceConnectionState = 'new';\n                    this.connectionState = 'new';\n                    this.iceGatheringState = 'new';\n\n                    config = JSON.parse(JSON.stringify(config || {}));\n\n                    this.usingBundle = config.bundlePolicy === 'max-bundle';\n                    if (config.rtcpMuxPolicy === 'negotiate') {\n                        throw(makeError('NotSupportedError',\n                            'rtcpMuxPolicy \\'negotiate\\' is not supported'));\n                    } else if (!config.rtcpMuxPolicy) {\n                        config.rtcpMuxPolicy = 'require';\n                    }\n\n                    switch (config.iceTransportPolicy) {\n                        case 'all':\n                        case 'relay':\n                            break;\n                        default:\n                            config.iceTransportPolicy = 'all';\n                            break;\n                    }\n\n                    switch (config.bundlePolicy) {\n                        case 'balanced':\n                        case 'max-compat':\n                        case 'max-bundle':\n                            break;\n                        default:\n                            config.bundlePolicy = 'balanced';\n                            break;\n                    }\n\n                    config.iceServers = filterIceServers(config.iceServers || [], edgeVersion);\n\n                    this._iceGatherers = [];\n                    if (config.iceCandidatePoolSize) {\n                        for (var i = config.iceCandidatePoolSize; i > 0; i--) {\n                            this._iceGatherers.push(new window.RTCIceGatherer({\n                                iceServers: config.iceServers,\n                                gatherPolicy: config.iceTransportPolicy\n                            }));\n                        }\n                    } else {\n                        config.iceCandidatePoolSize = 0;\n                    }\n\n                    this._config = config;\n\n                    // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n                    // everything that is needed to describe a SDP m-line.\n                    this.transceivers = [];\n\n                    this._sdpSessionId = SDPUtils.generateSessionId();\n                    this._sdpSessionVersion = 0;\n\n                    this._dtlsRole = undefined; // role for a=setup to use in answers.\n\n                    this._isClosed = false;\n                };\n\n                // set up event handlers on prototype\n                RTCPeerConnection.prototype.onicecandidate = null;\n                RTCPeerConnection.prototype.onaddstream = null;\n                RTCPeerConnection.prototype.ontrack = null;\n                RTCPeerConnection.prototype.onremovestream = null;\n                RTCPeerConnection.prototype.onsignalingstatechange = null;\n                RTCPeerConnection.prototype.oniceconnectionstatechange = null;\n                RTCPeerConnection.prototype.onconnectionstatechange = null;\n                RTCPeerConnection.prototype.onicegatheringstatechange = null;\n                RTCPeerConnection.prototype.onnegotiationneeded = null;\n                RTCPeerConnection.prototype.ondatachannel = null;\n\n                RTCPeerConnection.prototype._dispatchEvent = function (name, event) {\n                    if (this._isClosed) {\n                        return;\n                    }\n                    this.dispatchEvent(event);\n                    if (typeof this['on' + name] === 'function') {\n                        this['on' + name](event);\n                    }\n                };\n\n                RTCPeerConnection.prototype._emitGatheringStateChange = function () {\n                    var event = new Event('icegatheringstatechange');\n                    this._dispatchEvent('icegatheringstatechange', event);\n                };\n\n                RTCPeerConnection.prototype.getConfiguration = function () {\n                    return this._config;\n                };\n\n                RTCPeerConnection.prototype.getLocalStreams = function () {\n                    return this.localStreams;\n                };\n\n                RTCPeerConnection.prototype.getRemoteStreams = function () {\n                    return this.remoteStreams;\n                };\n\n                // internal helper to create a transceiver object.\n                // (which is not yet the same as the WebRTC 1.0 transceiver)\n                RTCPeerConnection.prototype._createTransceiver = function (kind, doNotAdd) {\n                    var hasBundleTransport = this.transceivers.length > 0;\n                    var transceiver = {\n                        track: null,\n                        iceGatherer: null,\n                        iceTransport: null,\n                        dtlsTransport: null,\n                        localCapabilities: null,\n                        remoteCapabilities: null,\n                        rtpSender: null,\n                        rtpReceiver: null,\n                        kind: kind,\n                        mid: null,\n                        sendEncodingParameters: null,\n                        recvEncodingParameters: null,\n                        stream: null,\n                        associatedRemoteMediaStreams: [],\n                        wantReceive: true\n                    };\n                    if (this.usingBundle && hasBundleTransport) {\n                        transceiver.iceTransport = this.transceivers[0].iceTransport;\n                        transceiver.dtlsTransport = this.transceivers[0].dtlsTransport;\n                    } else {\n                        var transports = this._createIceAndDtlsTransports();\n                        transceiver.iceTransport = transports.iceTransport;\n                        transceiver.dtlsTransport = transports.dtlsTransport;\n                    }\n                    if (!doNotAdd) {\n                        this.transceivers.push(transceiver);\n                    }\n                    return transceiver;\n                };\n\n                RTCPeerConnection.prototype.addTrack = function (track, stream) {\n                    if (this._isClosed) {\n                        throw makeError('InvalidStateError',\n                            'Attempted to call addTrack on a closed peerconnection.');\n                    }\n\n                    var alreadyExists = this.transceivers.find(function (s) {\n                        return s.track === track;\n                    });\n\n                    if (alreadyExists) {\n                        throw makeError('InvalidAccessError', 'Track already exists.');\n                    }\n\n                    var transceiver;\n                    for (var i = 0; i < this.transceivers.length; i++) {\n                        if (!this.transceivers[i].track &&\n                            this.transceivers[i].kind === track.kind) {\n                            transceiver = this.transceivers[i];\n                        }\n                    }\n                    if (!transceiver) {\n                        transceiver = this._createTransceiver(track.kind);\n                    }\n\n                    this._maybeFireNegotiationNeeded();\n\n                    if (this.localStreams.indexOf(stream) === -1) {\n                        this.localStreams.push(stream);\n                    }\n\n                    transceiver.track = track;\n                    transceiver.stream = stream;\n                    transceiver.rtpSender = new window.RTCRtpSender(track,\n                        transceiver.dtlsTransport);\n                    return transceiver.rtpSender;\n                };\n\n                RTCPeerConnection.prototype.addStream = function (stream) {\n                    var pc = this;\n                    if (edgeVersion >= 15025) {\n                        stream.getTracks().forEach(function (track) {\n                            pc.addTrack(track, stream);\n                        });\n                    } else {\n                        // Clone is necessary for local demos mostly, attaching directly\n                        // to two different senders does not work (build 10547).\n                        // Fixed in 15025 (or earlier)\n                        var clonedStream = stream.clone();\n                        stream.getTracks().forEach(function (track, idx) {\n                            var clonedTrack = clonedStream.getTracks()[idx];\n                            track.addEventListener('enabled', function (event) {\n                                clonedTrack.enabled = event.enabled;\n                            });\n                        });\n                        clonedStream.getTracks().forEach(function (track) {\n                            pc.addTrack(track, clonedStream);\n                        });\n                    }\n                };\n\n                RTCPeerConnection.prototype.removeTrack = function (sender) {\n                    if (this._isClosed) {\n                        throw makeError('InvalidStateError',\n                            'Attempted to call removeTrack on a closed peerconnection.');\n                    }\n\n                    if (!(sender instanceof window.RTCRtpSender)) {\n                        throw new TypeError('Argument 1 of RTCPeerConnection.removeTrack ' +\n                            'does not implement interface RTCRtpSender.');\n                    }\n\n                    var transceiver = this.transceivers.find(function (t) {\n                        return t.rtpSender === sender;\n                    });\n\n                    if (!transceiver) {\n                        throw makeError('InvalidAccessError',\n                            'Sender was not created by this connection.');\n                    }\n                    var stream = transceiver.stream;\n\n                    transceiver.rtpSender.stop();\n                    transceiver.rtpSender = null;\n                    transceiver.track = null;\n                    transceiver.stream = null;\n\n                    // remove the stream from the set of local streams\n                    var localStreams = this.transceivers.map(function (t) {\n                        return t.stream;\n                    });\n                    if (localStreams.indexOf(stream) === -1 &&\n                        this.localStreams.indexOf(stream) > -1) {\n                        this.localStreams.splice(this.localStreams.indexOf(stream), 1);\n                    }\n\n                    this._maybeFireNegotiationNeeded();\n                };\n\n                RTCPeerConnection.prototype.removeStream = function (stream) {\n                    var pc = this;\n                    stream.getTracks().forEach(function (track) {\n                        var sender = pc.getSenders().find(function (s) {\n                            return s.track === track;\n                        });\n                        if (sender) {\n                            pc.removeTrack(sender);\n                        }\n                    });\n                };\n\n                RTCPeerConnection.prototype.getSenders = function () {\n                    return this.transceivers.filter(function (transceiver) {\n                        return !!transceiver.rtpSender;\n                    })\n                        .map(function (transceiver) {\n                            return transceiver.rtpSender;\n                        });\n                };\n\n                RTCPeerConnection.prototype.getReceivers = function () {\n                    return this.transceivers.filter(function (transceiver) {\n                        return !!transceiver.rtpReceiver;\n                    })\n                        .map(function (transceiver) {\n                            return transceiver.rtpReceiver;\n                        });\n                };\n\n\n                RTCPeerConnection.prototype._createIceGatherer = function (sdpMLineIndex,\n                                                                           usingBundle) {\n                    var pc = this;\n                    if (usingBundle && sdpMLineIndex > 0) {\n                        return this.transceivers[0].iceGatherer;\n                    } else if (this._iceGatherers.length) {\n                        return this._iceGatherers.shift();\n                    }\n                    var iceGatherer = new window.RTCIceGatherer({\n                        iceServers: this._config.iceServers,\n                        gatherPolicy: this._config.iceTransportPolicy\n                    });\n                    Object.defineProperty(iceGatherer, 'state',\n                        {value: 'new', writable: true}\n                    );\n\n                    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = [];\n                    this.transceivers[sdpMLineIndex].bufferCandidates = function (event) {\n                        var end = !event.candidate || Object.keys(event.candidate).length === 0;\n                        // polyfill since RTCIceGatherer.state is not implemented in\n                        // Edge 10547 yet.\n                        iceGatherer.state = end ? 'completed' : 'gathering';\n                        if (pc.transceivers[sdpMLineIndex].bufferedCandidateEvents !== null) {\n                            pc.transceivers[sdpMLineIndex].bufferedCandidateEvents.push(event);\n                        }\n                    };\n                    iceGatherer.addEventListener('localcandidate',\n                        this.transceivers[sdpMLineIndex].bufferCandidates);\n                    return iceGatherer;\n                };\n\n                // start gathering from an RTCIceGatherer.\n                RTCPeerConnection.prototype._gather = function (mid, sdpMLineIndex) {\n                    var pc = this;\n                    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n                    if (iceGatherer.onlocalcandidate) {\n                        return;\n                    }\n                    var bufferedCandidateEvents =\n                        this.transceivers[sdpMLineIndex].bufferedCandidateEvents;\n                    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = null;\n                    iceGatherer.removeEventListener('localcandidate',\n                        this.transceivers[sdpMLineIndex].bufferCandidates);\n                    iceGatherer.onlocalcandidate = function (evt) {\n                        if (pc.usingBundle && sdpMLineIndex > 0) {\n                            // if we know that we use bundle we can drop candidates with\n                            // ѕdpMLineIndex > 0. If we don't do this then our state gets\n                            // confused since we dispose the extra ice gatherer.\n                            return;\n                        }\n                        var event = new Event('icecandidate');\n                        event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n                        var cand = evt.candidate;\n                        // Edge emits an empty object for RTCIceCandidateComplete‥\n                        var end = !cand || Object.keys(cand).length === 0;\n                        if (end) {\n                            // polyfill since RTCIceGatherer.state is not implemented in\n                            // Edge 10547 yet.\n                            if (iceGatherer.state === 'new' || iceGatherer.state === 'gathering') {\n                                iceGatherer.state = 'completed';\n                            }\n                        } else {\n                            if (iceGatherer.state === 'new') {\n                                iceGatherer.state = 'gathering';\n                            }\n                            // RTCIceCandidate doesn't have a component, needs to be added\n                            cand.component = 1;\n                            // also the usernameFragment. TODO: update SDP to take both variants.\n                            cand.ufrag = iceGatherer.getLocalParameters().usernameFragment;\n\n                            var serializedCandidate = SDPUtils.writeCandidate(cand);\n                            event.candidate = Object.assign(event.candidate,\n                                SDPUtils.parseCandidate(serializedCandidate));\n\n                            event.candidate.candidate = serializedCandidate;\n                            event.candidate.toJSON = function () {\n                                return {\n                                    candidate: event.candidate.candidate,\n                                    sdpMid: event.candidate.sdpMid,\n                                    sdpMLineIndex: event.candidate.sdpMLineIndex,\n                                    usernameFragment: event.candidate.usernameFragment\n                                };\n                            };\n                        }\n\n                        // update local description.\n                        var sections = SDPUtils.getMediaSections(pc.localDescription.sdp);\n                        if (!end) {\n                            sections[event.candidate.sdpMLineIndex] +=\n                                'a=' + event.candidate.candidate + '\\r\\n';\n                        } else {\n                            sections[event.candidate.sdpMLineIndex] +=\n                                'a=end-of-candidates\\r\\n';\n                        }\n                        pc.localDescription.sdp =\n                            SDPUtils.getDescription(pc.localDescription.sdp) +\n                            sections.join('');\n                        var complete = pc.transceivers.every(function (transceiver) {\n                            return transceiver.iceGatherer &&\n                                transceiver.iceGatherer.state === 'completed';\n                        });\n\n                        if (pc.iceGatheringState !== 'gathering') {\n                            pc.iceGatheringState = 'gathering';\n                            pc._emitGatheringStateChange();\n                        }\n\n                        // Emit candidate. Also emit null candidate when all gatherers are\n                        // complete.\n                        if (!end) {\n                            pc._dispatchEvent('icecandidate', event);\n                        }\n                        if (complete) {\n                            pc._dispatchEvent('icecandidate', new Event('icecandidate'));\n                            pc.iceGatheringState = 'complete';\n                            pc._emitGatheringStateChange();\n                        }\n                    };\n\n                    // emit already gathered candidates.\n                    window.setTimeout(function () {\n                        bufferedCandidateEvents.forEach(function (e) {\n                            iceGatherer.onlocalcandidate(e);\n                        });\n                    }, 0);\n                };\n\n                // Create ICE transport and DTLS transport.\n                RTCPeerConnection.prototype._createIceAndDtlsTransports = function () {\n                    var pc = this;\n                    var iceTransport = new window.RTCIceTransport(null);\n                    iceTransport.onicestatechange = function () {\n                        pc._updateIceConnectionState();\n                        pc._updateConnectionState();\n                    };\n\n                    var dtlsTransport = new window.RTCDtlsTransport(iceTransport);\n                    dtlsTransport.ondtlsstatechange = function () {\n                        pc._updateConnectionState();\n                    };\n                    dtlsTransport.onerror = function () {\n                        // onerror does not set state to failed by itself.\n                        Object.defineProperty(dtlsTransport, 'state',\n                            {value: 'failed', writable: true});\n                        pc._updateConnectionState();\n                    };\n\n                    return {\n                        iceTransport: iceTransport,\n                        dtlsTransport: dtlsTransport\n                    };\n                };\n\n                // Destroy ICE gatherer, ICE transport and DTLS transport.\n                // Without triggering the callbacks.\n                RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function (\n                    sdpMLineIndex) {\n                    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n                    if (iceGatherer) {\n                        delete iceGatherer.onlocalcandidate;\n                        delete this.transceivers[sdpMLineIndex].iceGatherer;\n                    }\n                    var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;\n                    if (iceTransport) {\n                        delete iceTransport.onicestatechange;\n                        delete this.transceivers[sdpMLineIndex].iceTransport;\n                    }\n                    var dtlsTransport = this.transceivers[sdpMLineIndex].dtlsTransport;\n                    if (dtlsTransport) {\n                        delete dtlsTransport.ondtlsstatechange;\n                        delete dtlsTransport.onerror;\n                        delete this.transceivers[sdpMLineIndex].dtlsTransport;\n                    }\n                };\n\n                // Start the RTP Sender and Receiver for a transceiver.\n                RTCPeerConnection.prototype._transceive = function (transceiver,\n                                                                    send, recv) {\n                    var params = getCommonCapabilities(transceiver.localCapabilities,\n                        transceiver.remoteCapabilities);\n                    if (send && transceiver.rtpSender) {\n                        params.encodings = transceiver.sendEncodingParameters;\n                        params.rtcp = {\n                            cname: SDPUtils.localCName,\n                            compound: transceiver.rtcpParameters.compound\n                        };\n                        if (transceiver.recvEncodingParameters.length) {\n                            params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n                        }\n                        transceiver.rtpSender.send(params);\n                    }\n                    if (recv && transceiver.rtpReceiver && params.codecs.length > 0) {\n                        // remove RTX field in Edge 14942\n                        if (transceiver.kind === 'video'\n                            && transceiver.recvEncodingParameters\n                            && edgeVersion < 15019) {\n                            transceiver.recvEncodingParameters.forEach(function (p) {\n                                delete p.rtx;\n                            });\n                        }\n                        if (transceiver.recvEncodingParameters.length) {\n                            params.encodings = transceiver.recvEncodingParameters;\n                        } else {\n                            params.encodings = [{}];\n                        }\n                        params.rtcp = {\n                            compound: transceiver.rtcpParameters.compound\n                        };\n                        if (transceiver.rtcpParameters.cname) {\n                            params.rtcp.cname = transceiver.rtcpParameters.cname;\n                        }\n                        if (transceiver.sendEncodingParameters.length) {\n                            params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n                        }\n                        transceiver.rtpReceiver.receive(params);\n                    }\n                };\n\n                RTCPeerConnection.prototype.setLocalDescription = function (description) {\n                    var pc = this;\n\n                    // Note: pranswer is not supported.\n                    if (['offer', 'answer'].indexOf(description.type) === -1) {\n                        return Promise.reject(makeError('TypeError',\n                            'Unsupported type \"' + description.type + '\"'));\n                    }\n\n                    if (!isActionAllowedInSignalingState('setLocalDescription',\n                        description.type, pc.signalingState) || pc._isClosed) {\n                        return Promise.reject(makeError('InvalidStateError',\n                            'Can not set local ' + description.type +\n                            ' in state ' + pc.signalingState));\n                    }\n\n                    var sections;\n                    var sessionpart;\n                    if (description.type === 'offer') {\n                        // VERY limited support for SDP munging. Limited to:\n                        // * changing the order of codecs\n                        sections = SDPUtils.splitSections(description.sdp);\n                        sessionpart = sections.shift();\n                        sections.forEach(function (mediaSection, sdpMLineIndex) {\n                            var caps = SDPUtils.parseRtpParameters(mediaSection);\n                            pc.transceivers[sdpMLineIndex].localCapabilities = caps;\n                        });\n\n                        pc.transceivers.forEach(function (transceiver, sdpMLineIndex) {\n                            pc._gather(transceiver.mid, sdpMLineIndex);\n                        });\n                    } else if (description.type === 'answer') {\n                        sections = SDPUtils.splitSections(pc.remoteDescription.sdp);\n                        sessionpart = sections.shift();\n                        var isIceLite = SDPUtils.matchPrefix(sessionpart,\n                            'a=ice-lite').length > 0;\n                        sections.forEach(function (mediaSection, sdpMLineIndex) {\n                            var transceiver = pc.transceivers[sdpMLineIndex];\n                            var iceGatherer = transceiver.iceGatherer;\n                            var iceTransport = transceiver.iceTransport;\n                            var dtlsTransport = transceiver.dtlsTransport;\n                            var localCapabilities = transceiver.localCapabilities;\n                            var remoteCapabilities = transceiver.remoteCapabilities;\n\n                            // treat bundle-only as not-rejected.\n                            var rejected = SDPUtils.isRejected(mediaSection) &&\n                                SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n\n                            if (!rejected && !transceiver.rejected) {\n                                var remoteIceParameters = SDPUtils.getIceParameters(\n                                    mediaSection, sessionpart);\n                                var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n                                    mediaSection, sessionpart);\n                                if (isIceLite) {\n                                    remoteDtlsParameters.role = 'server';\n                                }\n\n                                if (!pc.usingBundle || sdpMLineIndex === 0) {\n                                    pc._gather(transceiver.mid, sdpMLineIndex);\n                                    if (iceTransport.state === 'new') {\n                                        iceTransport.start(iceGatherer, remoteIceParameters,\n                                            isIceLite ? 'controlling' : 'controlled');\n                                    }\n                                    if (dtlsTransport.state === 'new') {\n                                        dtlsTransport.start(remoteDtlsParameters);\n                                    }\n                                }\n\n                                // Calculate intersection of capabilities.\n                                var params = getCommonCapabilities(localCapabilities,\n                                    remoteCapabilities);\n\n                                // Start the RTCRtpSender. The RTCRtpReceiver for this\n                                // transceiver has already been started in setRemoteDescription.\n                                pc._transceive(transceiver,\n                                    params.codecs.length > 0,\n                                    false);\n                            }\n                        });\n                    }\n\n                    pc.localDescription = {\n                        type: description.type,\n                        sdp: description.sdp\n                    };\n                    if (description.type === 'offer') {\n                        pc._updateSignalingState('have-local-offer');\n                    } else {\n                        pc._updateSignalingState('stable');\n                    }\n\n                    return Promise.resolve();\n                };\n\n                RTCPeerConnection.prototype.setRemoteDescription = function (description) {\n                    var pc = this;\n\n                    // Note: pranswer is not supported.\n                    if (['offer', 'answer'].indexOf(description.type) === -1) {\n                        return Promise.reject(makeError('TypeError',\n                            'Unsupported type \"' + description.type + '\"'));\n                    }\n\n                    if (!isActionAllowedInSignalingState('setRemoteDescription',\n                        description.type, pc.signalingState) || pc._isClosed) {\n                        return Promise.reject(makeError('InvalidStateError',\n                            'Can not set remote ' + description.type +\n                            ' in state ' + pc.signalingState));\n                    }\n\n                    var streams = {};\n                    pc.remoteStreams.forEach(function (stream) {\n                        streams[stream.id] = stream;\n                    });\n                    var receiverList = [];\n                    var sections = SDPUtils.splitSections(description.sdp);\n                    var sessionpart = sections.shift();\n                    var isIceLite = SDPUtils.matchPrefix(sessionpart,\n                        'a=ice-lite').length > 0;\n                    var usingBundle = SDPUtils.matchPrefix(sessionpart,\n                        'a=group:BUNDLE ').length > 0;\n                    pc.usingBundle = usingBundle;\n                    var iceOptions = SDPUtils.matchPrefix(sessionpart,\n                        'a=ice-options:')[0];\n                    if (iceOptions) {\n                        pc.canTrickleIceCandidates = iceOptions.substr(14).split(' ')\n                            .indexOf('trickle') >= 0;\n                    } else {\n                        pc.canTrickleIceCandidates = false;\n                    }\n\n                    sections.forEach(function (mediaSection, sdpMLineIndex) {\n                        var lines = SDPUtils.splitLines(mediaSection);\n                        var kind = SDPUtils.getKind(mediaSection);\n                        // treat bundle-only as not-rejected.\n                        var rejected = SDPUtils.isRejected(mediaSection) &&\n                            SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n                        var protocol = lines[0].substr(2).split(' ')[2];\n\n                        var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n                        var remoteMsid = SDPUtils.parseMsid(mediaSection);\n\n                        var mid = SDPUtils.getMid(mediaSection) || SDPUtils.generateIdentifier();\n\n                        // Reject datachannels which are not implemented yet.\n                        if ((kind === 'application' && protocol === 'DTLS/SCTP') || rejected) {\n                            // TODO: this is dangerous in the case where a non-rejected m-line\n                            //     becomes rejected.\n                            pc.transceivers[sdpMLineIndex] = {\n                                mid: mid,\n                                kind: kind,\n                                rejected: true\n                            };\n                            return;\n                        }\n\n                        if (!rejected && pc.transceivers[sdpMLineIndex] &&\n                            pc.transceivers[sdpMLineIndex].rejected) {\n                            // recycle a rejected transceiver.\n                            pc.transceivers[sdpMLineIndex] = pc._createTransceiver(kind, true);\n                        }\n\n                        var transceiver;\n                        var iceGatherer;\n                        var iceTransport;\n                        var dtlsTransport;\n                        var rtpReceiver;\n                        var sendEncodingParameters;\n                        var recvEncodingParameters;\n                        var localCapabilities;\n\n                        var track;\n                        // FIXME: ensure the mediaSection has rtcp-mux set.\n                        var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n                        var remoteIceParameters;\n                        var remoteDtlsParameters;\n                        if (!rejected) {\n                            remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n                                sessionpart);\n                            remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n                                sessionpart);\n                            remoteDtlsParameters.role = 'client';\n                        }\n                        recvEncodingParameters =\n                            SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n                        var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);\n\n                        var isComplete = SDPUtils.matchPrefix(mediaSection,\n                            'a=end-of-candidates', sessionpart).length > 0;\n                        var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n                            .map(function (cand) {\n                                return SDPUtils.parseCandidate(cand);\n                            })\n                            .filter(function (cand) {\n                                return cand.component === 1;\n                            });\n\n                        // Check if we can use BUNDLE and dispose transports.\n                        if ((description.type === 'offer' || description.type === 'answer') &&\n                            !rejected && usingBundle && sdpMLineIndex > 0 &&\n                            pc.transceivers[sdpMLineIndex]) {\n                            pc._disposeIceAndDtlsTransports(sdpMLineIndex);\n                            pc.transceivers[sdpMLineIndex].iceGatherer =\n                                pc.transceivers[0].iceGatherer;\n                            pc.transceivers[sdpMLineIndex].iceTransport =\n                                pc.transceivers[0].iceTransport;\n                            pc.transceivers[sdpMLineIndex].dtlsTransport =\n                                pc.transceivers[0].dtlsTransport;\n                            if (pc.transceivers[sdpMLineIndex].rtpSender) {\n                                pc.transceivers[sdpMLineIndex].rtpSender.setTransport(\n                                    pc.transceivers[0].dtlsTransport);\n                            }\n                            if (pc.transceivers[sdpMLineIndex].rtpReceiver) {\n                                pc.transceivers[sdpMLineIndex].rtpReceiver.setTransport(\n                                    pc.transceivers[0].dtlsTransport);\n                            }\n                        }\n                        if (description.type === 'offer' && !rejected) {\n                            transceiver = pc.transceivers[sdpMLineIndex] ||\n                                pc._createTransceiver(kind);\n                            transceiver.mid = mid;\n\n                            if (!transceiver.iceGatherer) {\n                                transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n                                    usingBundle);\n                            }\n\n                            if (cands.length && transceiver.iceTransport.state === 'new') {\n                                if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {\n                                    transceiver.iceTransport.setRemoteCandidates(cands);\n                                } else {\n                                    cands.forEach(function (candidate) {\n                                        maybeAddCandidate(transceiver.iceTransport, candidate);\n                                    });\n                                }\n                            }\n\n                            localCapabilities = window.RTCRtpReceiver.getCapabilities(kind);\n\n                            // filter RTX until additional stuff needed for RTX is implemented\n                            // in adapter.js\n                            if (edgeVersion < 15019) {\n                                localCapabilities.codecs = localCapabilities.codecs.filter(\n                                    function (codec) {\n                                        return codec.name !== 'rtx';\n                                    });\n                            }\n\n                            sendEncodingParameters = transceiver.sendEncodingParameters || [{\n                                ssrc: (2 * sdpMLineIndex + 2) * 1001\n                            }];\n\n                            // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n                            var isNewTrack = false;\n                            if (direction === 'sendrecv' || direction === 'sendonly') {\n                                isNewTrack = !transceiver.rtpReceiver;\n                                rtpReceiver = transceiver.rtpReceiver ||\n                                    new window.RTCRtpReceiver(transceiver.dtlsTransport, kind);\n\n                                if (isNewTrack) {\n                                    var stream;\n                                    track = rtpReceiver.track;\n                                    // FIXME: does not work with Plan B.\n                                    if (remoteMsid && remoteMsid.stream === '-') {\n                                        // no-op. a stream id of '-' means: no associated stream.\n                                    } else if (remoteMsid) {\n                                        if (!streams[remoteMsid.stream]) {\n                                            streams[remoteMsid.stream] = new window.MediaStream();\n                                            Object.defineProperty(streams[remoteMsid.stream], 'id', {\n                                                get: function () {\n                                                    return remoteMsid.stream;\n                                                }\n                                            });\n                                        }\n                                        Object.defineProperty(track, 'id', {\n                                            get: function () {\n                                                return remoteMsid.track;\n                                            }\n                                        });\n                                        stream = streams[remoteMsid.stream];\n                                    } else {\n                                        if (!streams.default) {\n                                            streams.default = new window.MediaStream();\n                                        }\n                                        stream = streams.default;\n                                    }\n                                    if (stream) {\n                                        addTrackToStreamAndFireEvent(track, stream);\n                                        transceiver.associatedRemoteMediaStreams.push(stream);\n                                    }\n                                    receiverList.push([track, rtpReceiver, stream]);\n                                }\n                            } else if (transceiver.rtpReceiver && transceiver.rtpReceiver.track) {\n                                transceiver.associatedRemoteMediaStreams.forEach(function (s) {\n                                    var nativeTrack = s.getTracks().find(function (t) {\n                                        return t.id === transceiver.rtpReceiver.track.id;\n                                    });\n                                    if (nativeTrack) {\n                                        removeTrackFromStreamAndFireEvent(nativeTrack, s);\n                                    }\n                                });\n                                transceiver.associatedRemoteMediaStreams = [];\n                            }\n\n                            transceiver.localCapabilities = localCapabilities;\n                            transceiver.remoteCapabilities = remoteCapabilities;\n                            transceiver.rtpReceiver = rtpReceiver;\n                            transceiver.rtcpParameters = rtcpParameters;\n                            transceiver.sendEncodingParameters = sendEncodingParameters;\n                            transceiver.recvEncodingParameters = recvEncodingParameters;\n\n                            // Start the RTCRtpReceiver now. The RTPSender is started in\n                            // setLocalDescription.\n                            pc._transceive(pc.transceivers[sdpMLineIndex],\n                                false,\n                                isNewTrack);\n                        } else if (description.type === 'answer' && !rejected) {\n                            transceiver = pc.transceivers[sdpMLineIndex];\n                            iceGatherer = transceiver.iceGatherer;\n                            iceTransport = transceiver.iceTransport;\n                            dtlsTransport = transceiver.dtlsTransport;\n                            rtpReceiver = transceiver.rtpReceiver;\n                            sendEncodingParameters = transceiver.sendEncodingParameters;\n                            localCapabilities = transceiver.localCapabilities;\n\n                            pc.transceivers[sdpMLineIndex].recvEncodingParameters =\n                                recvEncodingParameters;\n                            pc.transceivers[sdpMLineIndex].remoteCapabilities =\n                                remoteCapabilities;\n                            pc.transceivers[sdpMLineIndex].rtcpParameters = rtcpParameters;\n\n                            if (cands.length && iceTransport.state === 'new') {\n                                if ((isIceLite || isComplete) &&\n                                    (!usingBundle || sdpMLineIndex === 0)) {\n                                    iceTransport.setRemoteCandidates(cands);\n                                } else {\n                                    cands.forEach(function (candidate) {\n                                        maybeAddCandidate(transceiver.iceTransport, candidate);\n                                    });\n                                }\n                            }\n\n                            if (!usingBundle || sdpMLineIndex === 0) {\n                                if (iceTransport.state === 'new') {\n                                    iceTransport.start(iceGatherer, remoteIceParameters,\n                                        'controlling');\n                                }\n                                if (dtlsTransport.state === 'new') {\n                                    dtlsTransport.start(remoteDtlsParameters);\n                                }\n                            }\n\n                            pc._transceive(transceiver,\n                                direction === 'sendrecv' || direction === 'recvonly',\n                                direction === 'sendrecv' || direction === 'sendonly');\n\n                            // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n                            if (rtpReceiver &&\n                                (direction === 'sendrecv' || direction === 'sendonly')) {\n                                track = rtpReceiver.track;\n                                if (remoteMsid) {\n                                    if (!streams[remoteMsid.stream]) {\n                                        streams[remoteMsid.stream] = new window.MediaStream();\n                                    }\n                                    addTrackToStreamAndFireEvent(track, streams[remoteMsid.stream]);\n                                    receiverList.push([track, rtpReceiver, streams[remoteMsid.stream]]);\n                                } else {\n                                    if (!streams.default) {\n                                        streams.default = new window.MediaStream();\n                                    }\n                                    addTrackToStreamAndFireEvent(track, streams.default);\n                                    receiverList.push([track, rtpReceiver, streams.default]);\n                                }\n                            } else {\n                                // FIXME: actually the receiver should be created later.\n                                delete transceiver.rtpReceiver;\n                            }\n                        }\n                    });\n\n                    if (pc._dtlsRole === undefined) {\n                        pc._dtlsRole = description.type === 'offer' ? 'active' : 'passive';\n                    }\n\n                    pc.remoteDescription = {\n                        type: description.type,\n                        sdp: description.sdp\n                    };\n                    if (description.type === 'offer') {\n                        pc._updateSignalingState('have-remote-offer');\n                    } else {\n                        pc._updateSignalingState('stable');\n                    }\n                    Object.keys(streams).forEach(function (sid) {\n                        var stream = streams[sid];\n                        if (stream.getTracks().length) {\n                            if (pc.remoteStreams.indexOf(stream) === -1) {\n                                pc.remoteStreams.push(stream);\n                                var event = new Event('addstream');\n                                event.stream = stream;\n                                window.setTimeout(function () {\n                                    pc._dispatchEvent('addstream', event);\n                                });\n                            }\n\n                            receiverList.forEach(function (item) {\n                                var track = item[0];\n                                var receiver = item[1];\n                                if (stream.id !== item[2].id) {\n                                    return;\n                                }\n                                fireAddTrack(pc, track, receiver, [stream]);\n                            });\n                        }\n                    });\n                    receiverList.forEach(function (item) {\n                        if (item[2]) {\n                            return;\n                        }\n                        fireAddTrack(pc, item[0], item[1], []);\n                    });\n\n                    // check whether addIceCandidate({}) was called within four seconds after\n                    // setRemoteDescription.\n                    window.setTimeout(function () {\n                        if (!(pc && pc.transceivers)) {\n                            return;\n                        }\n                        pc.transceivers.forEach(function (transceiver) {\n                            if (transceiver.iceTransport &&\n                                transceiver.iceTransport.state === 'new' &&\n                                transceiver.iceTransport.getRemoteCandidates().length > 0) {\n                                console.warn('Timeout for addRemoteCandidate. Consider sending ' +\n                                    'an end-of-candidates notification');\n                                transceiver.iceTransport.addRemoteCandidate({});\n                            }\n                        });\n                    }, 4000);\n\n                    return Promise.resolve();\n                };\n\n                RTCPeerConnection.prototype.close = function () {\n                    this.transceivers.forEach(function (transceiver) {\n                        /* not yet\n      if (transceiver.iceGatherer) {\n        transceiver.iceGatherer.close();\n      }\n      */\n                        if (transceiver.iceTransport) {\n                            transceiver.iceTransport.stop();\n                        }\n                        if (transceiver.dtlsTransport) {\n                            transceiver.dtlsTransport.stop();\n                        }\n                        if (transceiver.rtpSender) {\n                            transceiver.rtpSender.stop();\n                        }\n                        if (transceiver.rtpReceiver) {\n                            transceiver.rtpReceiver.stop();\n                        }\n                    });\n                    // FIXME: clean up tracks, local streams, remote streams, etc\n                    this._isClosed = true;\n                    this._updateSignalingState('closed');\n                };\n\n                // Update the signaling state.\n                RTCPeerConnection.prototype._updateSignalingState = function (newState) {\n                    this.signalingState = newState;\n                    var event = new Event('signalingstatechange');\n                    this._dispatchEvent('signalingstatechange', event);\n                };\n\n                // Determine whether to fire the negotiationneeded event.\n                RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function () {\n                    var pc = this;\n                    if (this.signalingState !== 'stable' || this.needNegotiation === true) {\n                        return;\n                    }\n                    this.needNegotiation = true;\n                    window.setTimeout(function () {\n                        if (pc.needNegotiation) {\n                            pc.needNegotiation = false;\n                            var event = new Event('negotiationneeded');\n                            pc._dispatchEvent('negotiationneeded', event);\n                        }\n                    }, 0);\n                };\n\n                // Update the ice connection state.\n                RTCPeerConnection.prototype._updateIceConnectionState = function () {\n                    var newState;\n                    var states = {\n                        'new': 0,\n                        closed: 0,\n                        checking: 0,\n                        connected: 0,\n                        completed: 0,\n                        disconnected: 0,\n                        failed: 0\n                    };\n                    this.transceivers.forEach(function (transceiver) {\n                        states[transceiver.iceTransport.state]++;\n                    });\n\n                    newState = 'new';\n                    if (states.failed > 0) {\n                        newState = 'failed';\n                    } else if (states.checking > 0) {\n                        newState = 'checking';\n                    } else if (states.disconnected > 0) {\n                        newState = 'disconnected';\n                    } else if (states.new > 0) {\n                        newState = 'new';\n                    } else if (states.connected > 0) {\n                        newState = 'connected';\n                    } else if (states.completed > 0) {\n                        newState = 'completed';\n                    }\n\n                    if (newState !== this.iceConnectionState) {\n                        this.iceConnectionState = newState;\n                        var event = new Event('iceconnectionstatechange');\n                        this._dispatchEvent('iceconnectionstatechange', event);\n                    }\n                };\n\n                // Update the connection state.\n                RTCPeerConnection.prototype._updateConnectionState = function () {\n                    var newState;\n                    var states = {\n                        'new': 0,\n                        closed: 0,\n                        connecting: 0,\n                        connected: 0,\n                        completed: 0,\n                        disconnected: 0,\n                        failed: 0\n                    };\n                    this.transceivers.forEach(function (transceiver) {\n                        states[transceiver.iceTransport.state]++;\n                        states[transceiver.dtlsTransport.state]++;\n                    });\n                    // ICETransport.completed and connected are the same for this purpose.\n                    states.connected += states.completed;\n\n                    newState = 'new';\n                    if (states.failed > 0) {\n                        newState = 'failed';\n                    } else if (states.connecting > 0) {\n                        newState = 'connecting';\n                    } else if (states.disconnected > 0) {\n                        newState = 'disconnected';\n                    } else if (states.new > 0) {\n                        newState = 'new';\n                    } else if (states.connected > 0) {\n                        newState = 'connected';\n                    }\n\n                    if (newState !== this.connectionState) {\n                        this.connectionState = newState;\n                        var event = new Event('connectionstatechange');\n                        this._dispatchEvent('connectionstatechange', event);\n                    }\n                };\n\n                RTCPeerConnection.prototype.createOffer = function () {\n                    var pc = this;\n\n                    if (pc._isClosed) {\n                        return Promise.reject(makeError('InvalidStateError',\n                            'Can not call createOffer after close'));\n                    }\n\n                    var numAudioTracks = pc.transceivers.filter(function (t) {\n                        return t.kind === 'audio';\n                    }).length;\n                    var numVideoTracks = pc.transceivers.filter(function (t) {\n                        return t.kind === 'video';\n                    }).length;\n\n                    // Determine number of audio and video tracks we need to send/recv.\n                    var offerOptions = arguments[0];\n                    if (offerOptions) {\n                        // Reject Chrome legacy constraints.\n                        if (offerOptions.mandatory || offerOptions.optional) {\n                            throw new TypeError(\n                                'Legacy mandatory/optional constraints not supported.');\n                        }\n                        if (offerOptions.offerToReceiveAudio !== undefined) {\n                            if (offerOptions.offerToReceiveAudio === true) {\n                                numAudioTracks = 1;\n                            } else if (offerOptions.offerToReceiveAudio === false) {\n                                numAudioTracks = 0;\n                            } else {\n                                numAudioTracks = offerOptions.offerToReceiveAudio;\n                            }\n                        }\n                        if (offerOptions.offerToReceiveVideo !== undefined) {\n                            if (offerOptions.offerToReceiveVideo === true) {\n                                numVideoTracks = 1;\n                            } else if (offerOptions.offerToReceiveVideo === false) {\n                                numVideoTracks = 0;\n                            } else {\n                                numVideoTracks = offerOptions.offerToReceiveVideo;\n                            }\n                        }\n                    }\n\n                    pc.transceivers.forEach(function (transceiver) {\n                        if (transceiver.kind === 'audio') {\n                            numAudioTracks--;\n                            if (numAudioTracks < 0) {\n                                transceiver.wantReceive = false;\n                            }\n                        } else if (transceiver.kind === 'video') {\n                            numVideoTracks--;\n                            if (numVideoTracks < 0) {\n                                transceiver.wantReceive = false;\n                            }\n                        }\n                    });\n\n                    // Create M-lines for recvonly streams.\n                    while (numAudioTracks > 0 || numVideoTracks > 0) {\n                        if (numAudioTracks > 0) {\n                            pc._createTransceiver('audio');\n                            numAudioTracks--;\n                        }\n                        if (numVideoTracks > 0) {\n                            pc._createTransceiver('video');\n                            numVideoTracks--;\n                        }\n                    }\n\n                    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n                        pc._sdpSessionVersion++);\n                    pc.transceivers.forEach(function (transceiver, sdpMLineIndex) {\n                        // For each track, create an ice gatherer, ice transport,\n                        // dtls transport, potentially rtpsender and rtpreceiver.\n                        var track = transceiver.track;\n                        var kind = transceiver.kind;\n                        var mid = transceiver.mid || SDPUtils.generateIdentifier();\n                        transceiver.mid = mid;\n\n                        if (!transceiver.iceGatherer) {\n                            transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n                                pc.usingBundle);\n                        }\n\n                        var localCapabilities = window.RTCRtpSender.getCapabilities(kind);\n                        // filter RTX until additional stuff needed for RTX is implemented\n                        // in adapter.js\n                        if (edgeVersion < 15019) {\n                            localCapabilities.codecs = localCapabilities.codecs.filter(\n                                function (codec) {\n                                    return codec.name !== 'rtx';\n                                });\n                        }\n                        localCapabilities.codecs.forEach(function (codec) {\n                            // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n                            // by adding level-asymmetry-allowed=1\n                            if (codec.name === 'H264' &&\n                                codec.parameters['level-asymmetry-allowed'] === undefined) {\n                                codec.parameters['level-asymmetry-allowed'] = '1';\n                            }\n\n                            // for subsequent offers, we might have to re-use the payload\n                            // type of the last offer.\n                            if (transceiver.remoteCapabilities &&\n                                transceiver.remoteCapabilities.codecs) {\n                                transceiver.remoteCapabilities.codecs.forEach(function (remoteCodec) {\n                                    if (codec.name.toLowerCase() === remoteCodec.name.toLowerCase() &&\n                                        codec.clockRate === remoteCodec.clockRate) {\n                                        codec.preferredPayloadType = remoteCodec.payloadType;\n                                    }\n                                });\n                            }\n                        });\n                        localCapabilities.headerExtensions.forEach(function (hdrExt) {\n                            var remoteExtensions = transceiver.remoteCapabilities &&\n                                transceiver.remoteCapabilities.headerExtensions || [];\n                            remoteExtensions.forEach(function (rHdrExt) {\n                                if (hdrExt.uri === rHdrExt.uri) {\n                                    hdrExt.id = rHdrExt.id;\n                                }\n                            });\n                        });\n\n                        // generate an ssrc now, to be used later in rtpSender.send\n                        var sendEncodingParameters = transceiver.sendEncodingParameters || [{\n                            ssrc: (2 * sdpMLineIndex + 1) * 1001\n                        }];\n                        if (track) {\n                            // add RTX\n                            if (edgeVersion >= 15019 && kind === 'video' &&\n                                !sendEncodingParameters[0].rtx) {\n                                sendEncodingParameters[0].rtx = {\n                                    ssrc: sendEncodingParameters[0].ssrc + 1\n                                };\n                            }\n                        }\n\n                        if (transceiver.wantReceive) {\n                            transceiver.rtpReceiver = new window.RTCRtpReceiver(\n                                transceiver.dtlsTransport, kind);\n                        }\n\n                        transceiver.localCapabilities = localCapabilities;\n                        transceiver.sendEncodingParameters = sendEncodingParameters;\n                    });\n\n                    // always offer BUNDLE and dispose on return if not supported.\n                    if (pc._config.bundlePolicy !== 'max-compat') {\n                        sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function (t) {\n                            return t.mid;\n                        }).join(' ') + '\\r\\n';\n                    }\n                    sdp += 'a=ice-options:trickle\\r\\n';\n\n                    pc.transceivers.forEach(function (transceiver, sdpMLineIndex) {\n                        sdp += writeMediaSection(transceiver, transceiver.localCapabilities,\n                            'offer', transceiver.stream, pc._dtlsRole);\n                        sdp += 'a=rtcp-rsize\\r\\n';\n\n                        if (transceiver.iceGatherer && pc.iceGatheringState !== 'new' &&\n                            (sdpMLineIndex === 0 || !pc.usingBundle)) {\n                            transceiver.iceGatherer.getLocalCandidates().forEach(function (cand) {\n                                cand.component = 1;\n                                sdp += 'a=' + SDPUtils.writeCandidate(cand) + '\\r\\n';\n                            });\n\n                            if (transceiver.iceGatherer.state === 'completed') {\n                                sdp += 'a=end-of-candidates\\r\\n';\n                            }\n                        }\n                    });\n\n                    var desc = new window.RTCSessionDescription({\n                        type: 'offer',\n                        sdp: sdp\n                    });\n                    return Promise.resolve(desc);\n                };\n\n                RTCPeerConnection.prototype.createAnswer = function () {\n                    var pc = this;\n\n                    if (pc._isClosed) {\n                        return Promise.reject(makeError('InvalidStateError',\n                            'Can not call createAnswer after close'));\n                    }\n\n                    if (!(pc.signalingState === 'have-remote-offer' ||\n                        pc.signalingState === 'have-local-pranswer')) {\n                        return Promise.reject(makeError('InvalidStateError',\n                            'Can not call createAnswer in signalingState ' + pc.signalingState));\n                    }\n\n                    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n                        pc._sdpSessionVersion++);\n                    if (pc.usingBundle) {\n                        sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function (t) {\n                            return t.mid;\n                        }).join(' ') + '\\r\\n';\n                    }\n                    var mediaSectionsInOffer = SDPUtils.getMediaSections(\n                        pc.remoteDescription.sdp).length;\n                    pc.transceivers.forEach(function (transceiver, sdpMLineIndex) {\n                        if (sdpMLineIndex + 1 > mediaSectionsInOffer) {\n                            return;\n                        }\n                        if (transceiver.rejected) {\n                            if (transceiver.kind === 'application') {\n                                sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n';\n                            } else if (transceiver.kind === 'audio') {\n                                sdp += 'm=audio 0 UDP/TLS/RTP/SAVPF 0\\r\\n' +\n                                    'a=rtpmap:0 PCMU/8000\\r\\n';\n                            } else if (transceiver.kind === 'video') {\n                                sdp += 'm=video 0 UDP/TLS/RTP/SAVPF 120\\r\\n' +\n                                    'a=rtpmap:120 VP8/90000\\r\\n';\n                            }\n                            sdp += 'c=IN IP4 0.0.0.0\\r\\n' +\n                                'a=inactive\\r\\n' +\n                                'a=mid:' + transceiver.mid + '\\r\\n';\n                            return;\n                        }\n\n                        // FIXME: look at direction.\n                        if (transceiver.stream) {\n                            var localTrack;\n                            if (transceiver.kind === 'audio') {\n                                localTrack = transceiver.stream.getAudioTracks()[0];\n                            } else if (transceiver.kind === 'video') {\n                                localTrack = transceiver.stream.getVideoTracks()[0];\n                            }\n                            if (localTrack) {\n                                // add RTX\n                                if (edgeVersion >= 15019 && transceiver.kind === 'video' &&\n                                    !transceiver.sendEncodingParameters[0].rtx) {\n                                    transceiver.sendEncodingParameters[0].rtx = {\n                                        ssrc: transceiver.sendEncodingParameters[0].ssrc + 1\n                                    };\n                                }\n                            }\n                        }\n\n                        // Calculate intersection of capabilities.\n                        var commonCapabilities = getCommonCapabilities(\n                            transceiver.localCapabilities,\n                            transceiver.remoteCapabilities);\n\n                        var hasRtx = commonCapabilities.codecs.filter(function (c) {\n                            return c.name.toLowerCase() === 'rtx';\n                        }).length;\n                        if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n                            delete transceiver.sendEncodingParameters[0].rtx;\n                        }\n\n                        sdp += writeMediaSection(transceiver, commonCapabilities,\n                            'answer', transceiver.stream, pc._dtlsRole);\n                        if (transceiver.rtcpParameters &&\n                            transceiver.rtcpParameters.reducedSize) {\n                            sdp += 'a=rtcp-rsize\\r\\n';\n                        }\n                    });\n\n                    var desc = new window.RTCSessionDescription({\n                        type: 'answer',\n                        sdp: sdp\n                    });\n                    return Promise.resolve(desc);\n                };\n\n                RTCPeerConnection.prototype.addIceCandidate = function (candidate) {\n                    var pc = this;\n                    var sections;\n                    if (candidate && !(candidate.sdpMLineIndex !== undefined ||\n                        candidate.sdpMid)) {\n                        return Promise.reject(new TypeError('sdpMLineIndex or sdpMid required'));\n                    }\n\n                    // TODO: needs to go into ops queue.\n                    return new Promise(function (resolve, reject) {\n                        if (!pc.remoteDescription) {\n                            return reject(makeError('InvalidStateError',\n                                'Can not add ICE candidate without a remote description'));\n                        } else if (!candidate || candidate.candidate === '') {\n                            for (var j = 0; j < pc.transceivers.length; j++) {\n                                if (pc.transceivers[j].rejected) {\n                                    continue;\n                                }\n                                pc.transceivers[j].iceTransport.addRemoteCandidate({});\n                                sections = SDPUtils.getMediaSections(pc.remoteDescription.sdp);\n                                sections[j] += 'a=end-of-candidates\\r\\n';\n                                pc.remoteDescription.sdp =\n                                    SDPUtils.getDescription(pc.remoteDescription.sdp) +\n                                    sections.join('');\n                                if (pc.usingBundle) {\n                                    break;\n                                }\n                            }\n                        } else {\n                            var sdpMLineIndex = candidate.sdpMLineIndex;\n                            if (candidate.sdpMid) {\n                                for (var i = 0; i < pc.transceivers.length; i++) {\n                                    if (pc.transceivers[i].mid === candidate.sdpMid) {\n                                        sdpMLineIndex = i;\n                                        break;\n                                    }\n                                }\n                            }\n                            var transceiver = pc.transceivers[sdpMLineIndex];\n                            if (transceiver) {\n                                if (transceiver.rejected) {\n                                    return resolve();\n                                }\n                                var cand = Object.keys(candidate.candidate).length > 0 ?\n                                    SDPUtils.parseCandidate(candidate.candidate) : {};\n                                // Ignore Chrome's invalid candidates since Edge does not like them.\n                                if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n                                    return resolve();\n                                }\n                                // Ignore RTCP candidates, we assume RTCP-MUX.\n                                if (cand.component && cand.component !== 1) {\n                                    return resolve();\n                                }\n                                // when using bundle, avoid adding candidates to the wrong\n                                // ice transport. And avoid adding candidates added in the SDP.\n                                if (sdpMLineIndex === 0 || (sdpMLineIndex > 0 &&\n                                    transceiver.iceTransport !== pc.transceivers[0].iceTransport)) {\n                                    if (!maybeAddCandidate(transceiver.iceTransport, cand)) {\n                                        return reject(makeError('OperationError',\n                                            'Can not add ICE candidate'));\n                                    }\n                                }\n\n                                // update the remoteDescription.\n                                var candidateString = candidate.candidate.trim();\n                                if (candidateString.indexOf('a=') === 0) {\n                                    candidateString = candidateString.substr(2);\n                                }\n                                sections = SDPUtils.getMediaSections(pc.remoteDescription.sdp);\n                                sections[sdpMLineIndex] += 'a=' +\n                                    (cand.type ? candidateString : 'end-of-candidates')\n                                    + '\\r\\n';\n                                pc.remoteDescription.sdp =\n                                    SDPUtils.getDescription(pc.remoteDescription.sdp) +\n                                    sections.join('');\n                            } else {\n                                return reject(makeError('OperationError',\n                                    'Can not add ICE candidate'));\n                            }\n                        }\n                        resolve();\n                    });\n                };\n\n                RTCPeerConnection.prototype.getStats = function (selector) {\n                    if (selector && selector instanceof window.MediaStreamTrack) {\n                        var senderOrReceiver = null;\n                        this.transceivers.forEach(function (transceiver) {\n                            if (transceiver.rtpSender &&\n                                transceiver.rtpSender.track === selector) {\n                                senderOrReceiver = transceiver.rtpSender;\n                            } else if (transceiver.rtpReceiver &&\n                                transceiver.rtpReceiver.track === selector) {\n                                senderOrReceiver = transceiver.rtpReceiver;\n                            }\n                        });\n                        if (!senderOrReceiver) {\n                            throw makeError('InvalidAccessError', 'Invalid selector.');\n                        }\n                        return senderOrReceiver.getStats();\n                    }\n\n                    var promises = [];\n                    this.transceivers.forEach(function (transceiver) {\n                        ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n                            'dtlsTransport'].forEach(function (method) {\n                            if (transceiver[method]) {\n                                promises.push(transceiver[method].getStats());\n                            }\n                        });\n                    });\n                    return Promise.all(promises).then(function (allStats) {\n                        var results = new Map();\n                        allStats.forEach(function (stats) {\n                            stats.forEach(function (stat) {\n                                results.set(stat.id, stat);\n                            });\n                        });\n                        return results;\n                    });\n                };\n\n                // fix low-level stat names and return Map instead of object.\n                var ortcObjects = ['RTCRtpSender', 'RTCRtpReceiver', 'RTCIceGatherer',\n                    'RTCIceTransport', 'RTCDtlsTransport'];\n                ortcObjects.forEach(function (ortcObjectName) {\n                    var obj = window[ortcObjectName];\n                    if (obj && obj.prototype && obj.prototype.getStats) {\n                        var nativeGetstats = obj.prototype.getStats;\n                        obj.prototype.getStats = function () {\n                            return nativeGetstats.apply(this)\n                                .then(function (nativeStats) {\n                                    var mapStats = new Map();\n                                    Object.keys(nativeStats).forEach(function (id) {\n                                        nativeStats[id].type = fixStatsType(nativeStats[id]);\n                                        mapStats.set(id, nativeStats[id]);\n                                    });\n                                    return mapStats;\n                                });\n                        };\n                    }\n                });\n\n                // legacy callback shims. Should be moved to adapter.js some days.\n                var methods = ['createOffer', 'createAnswer'];\n                methods.forEach(function (method) {\n                    var nativeMethod = RTCPeerConnection.prototype[method];\n                    RTCPeerConnection.prototype[method] = function () {\n                        var args = arguments;\n                        if (typeof args[0] === 'function' ||\n                            typeof args[1] === 'function') { // legacy\n                            return nativeMethod.apply(this, [arguments[2]])\n                                .then(function (description) {\n                                    if (typeof args[0] === 'function') {\n                                        args[0].apply(null, [description]);\n                                    }\n                                }, function (error) {\n                                    if (typeof args[1] === 'function') {\n                                        args[1].apply(null, [error]);\n                                    }\n                                });\n                        }\n                        return nativeMethod.apply(this, arguments);\n                    };\n                });\n\n                methods = ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'];\n                methods.forEach(function (method) {\n                    var nativeMethod = RTCPeerConnection.prototype[method];\n                    RTCPeerConnection.prototype[method] = function () {\n                        var args = arguments;\n                        if (typeof args[1] === 'function' ||\n                            typeof args[2] === 'function') { // legacy\n                            return nativeMethod.apply(this, arguments)\n                                .then(function () {\n                                    if (typeof args[1] === 'function') {\n                                        args[1].apply(null);\n                                    }\n                                }, function (error) {\n                                    if (typeof args[2] === 'function') {\n                                        args[2].apply(null, [error]);\n                                    }\n                                });\n                        }\n                        return nativeMethod.apply(this, arguments);\n                    };\n                });\n\n                // getStats is special. It doesn't have a spec legacy method yet we support\n                // getStats(something, cb) without error callbacks.\n                ['getStats'].forEach(function (method) {\n                    var nativeMethod = RTCPeerConnection.prototype[method];\n                    RTCPeerConnection.prototype[method] = function () {\n                        var args = arguments;\n                        if (typeof args[1] === 'function') {\n                            return nativeMethod.apply(this, arguments)\n                                .then(function () {\n                                    if (typeof args[1] === 'function') {\n                                        args[1].apply(null);\n                                    }\n                                });\n                        }\n                        return nativeMethod.apply(this, arguments);\n                    };\n                });\n\n                return RTCPeerConnection;\n            };\n\n        }, {\"sdp\": 2}],\n        2: [function (require, module, exports) {\n            /* eslint-env node */\n            'use strict';\n\n// SDP helpers.\n            var SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\n            SDPUtils.generateIdentifier = function () {\n                return Math.random().toString(36).substr(2, 10);\n            };\n\n// The RTCP CNAME used by all peerconnections from the same JS.\n            SDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\n            SDPUtils.splitLines = function (blob) {\n                return blob.trim().split('\\n').map(function (line) {\n                    return line.trim();\n                });\n            };\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\n            SDPUtils.splitSections = function (blob) {\n                var parts = blob.split('\\nm=');\n                return parts.map(function (part, index) {\n                    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n                });\n            };\n\n// returns the session description.\n            SDPUtils.getDescription = function (blob) {\n                var sections = SDPUtils.splitSections(blob);\n                return sections && sections[0];\n            };\n\n// returns the individual media sections.\n            SDPUtils.getMediaSections = function (blob) {\n                var sections = SDPUtils.splitSections(blob);\n                sections.shift();\n                return sections;\n            };\n\n// Returns lines that start with a certain prefix.\n            SDPUtils.matchPrefix = function (blob, prefix) {\n                return SDPUtils.splitLines(blob).filter(function (line) {\n                    return line.indexOf(prefix) === 0;\n                });\n            };\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\n            SDPUtils.parseCandidate = function (line) {\n                var parts;\n                // Parse both variants.\n                if (line.indexOf('a=candidate:') === 0) {\n                    parts = line.substring(12).split(' ');\n                } else {\n                    parts = line.substring(10).split(' ');\n                }\n\n                var candidate = {\n                    foundation: parts[0],\n                    component: parseInt(parts[1], 10),\n                    protocol: parts[2].toLowerCase(),\n                    priority: parseInt(parts[3], 10),\n                    ip: parts[4],\n                    port: parseInt(parts[5], 10),\n                    // skip parts[6] == 'typ'\n                    type: parts[7]\n                };\n\n                for (var i = 8; i < parts.length; i += 2) {\n                    switch (parts[i]) {\n                        case 'raddr':\n                            candidate.relatedAddress = parts[i + 1];\n                            break;\n                        case 'rport':\n                            candidate.relatedPort = parseInt(parts[i + 1], 10);\n                            break;\n                        case 'tcptype':\n                            candidate.tcpType = parts[i + 1];\n                            break;\n                        case 'ufrag':\n                            candidate.ufrag = parts[i + 1]; // for backward compability.\n                            candidate.usernameFragment = parts[i + 1];\n                            break;\n                        default: // extension handling, in particular ufrag\n                            candidate[parts[i]] = parts[i + 1];\n                            break;\n                    }\n                }\n                return candidate;\n            };\n\n// Translates a candidate object into SDP candidate attribute.\n            SDPUtils.writeCandidate = function (candidate) {\n                var sdp = [];\n                sdp.push(candidate.foundation);\n                sdp.push(candidate.component);\n                sdp.push(candidate.protocol.toUpperCase());\n                sdp.push(candidate.priority);\n                sdp.push(candidate.ip);\n                sdp.push(candidate.port);\n\n                var type = candidate.type;\n                sdp.push('typ');\n                sdp.push(type);\n                if (type !== 'host' && candidate.relatedAddress &&\n                    candidate.relatedPort) {\n                    sdp.push('raddr');\n                    sdp.push(candidate.relatedAddress); // was: relAddr\n                    sdp.push('rport');\n                    sdp.push(candidate.relatedPort); // was: relPort\n                }\n                if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n                    sdp.push('tcptype');\n                    sdp.push(candidate.tcpType);\n                }\n                if (candidate.usernameFragment || candidate.ufrag) {\n                    sdp.push('ufrag');\n                    sdp.push(candidate.usernameFragment || candidate.ufrag);\n                }\n                return 'candidate:' + sdp.join(' ');\n            };\n\n// Parses an ice-options line, returns an array of option tags.\n// a=ice-options:foo bar\n            SDPUtils.parseIceOptions = function (line) {\n                return line.substr(14).split(' ');\n            }\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\n            SDPUtils.parseRtpMap = function (line) {\n                var parts = line.substr(9).split(' ');\n                var parsed = {\n                    payloadType: parseInt(parts.shift(), 10) // was: id\n                };\n\n                parts = parts[0].split('/');\n\n                parsed.name = parts[0];\n                parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n                // was: channels\n                parsed.numChannels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n                return parsed;\n            };\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\n            SDPUtils.writeRtpMap = function (codec) {\n                var pt = codec.payloadType;\n                if (codec.preferredPayloadType !== undefined) {\n                    pt = codec.preferredPayloadType;\n                }\n                return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n                    (codec.numChannels !== 1 ? '/' + codec.numChannels : '') + '\\r\\n';\n            };\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\n            SDPUtils.parseExtmap = function (line) {\n                var parts = line.substr(9).split(' ');\n                return {\n                    id: parseInt(parts[0], 10),\n                    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n                    uri: parts[1]\n                };\n            };\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\n            SDPUtils.writeExtmap = function (headerExtension) {\n                return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n                    (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n                        ? '/' + headerExtension.direction\n                        : '') +\n                    ' ' + headerExtension.uri + '\\r\\n';\n            };\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\n            SDPUtils.parseFmtp = function (line) {\n                var parsed = {};\n                var kv;\n                var parts = line.substr(line.indexOf(' ') + 1).split(';');\n                for (var j = 0; j < parts.length; j++) {\n                    kv = parts[j].trim().split('=');\n                    parsed[kv[0].trim()] = kv[1];\n                }\n                return parsed;\n            };\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\n            SDPUtils.writeFmtp = function (codec) {\n                var line = '';\n                var pt = codec.payloadType;\n                if (codec.preferredPayloadType !== undefined) {\n                    pt = codec.preferredPayloadType;\n                }\n                if (codec.parameters && Object.keys(codec.parameters).length) {\n                    var params = [];\n                    Object.keys(codec.parameters).forEach(function (param) {\n                        params.push(param + '=' + codec.parameters[param]);\n                    });\n                    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n                }\n                return line;\n            };\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\n            SDPUtils.parseRtcpFb = function (line) {\n                var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n                return {\n                    type: parts.shift(),\n                    parameter: parts.join(' ')\n                };\n            };\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\n            SDPUtils.writeRtcpFb = function (codec) {\n                var lines = '';\n                var pt = codec.payloadType;\n                if (codec.preferredPayloadType !== undefined) {\n                    pt = codec.preferredPayloadType;\n                }\n                if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n                    // FIXME: special handling for trr-int?\n                    codec.rtcpFeedback.forEach(function (fb) {\n                        lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n                            (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n                            '\\r\\n';\n                    });\n                }\n                return lines;\n            };\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\n            SDPUtils.parseSsrcMedia = function (line) {\n                var sp = line.indexOf(' ');\n                var parts = {\n                    ssrc: parseInt(line.substr(7, sp - 7), 10)\n                };\n                var colon = line.indexOf(':', sp);\n                if (colon > -1) {\n                    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n                    parts.value = line.substr(colon + 1);\n                } else {\n                    parts.attribute = line.substr(sp + 1);\n                }\n                return parts;\n            };\n\n// Extracts the MID (RFC 5888) from a media section.\n// returns the MID or undefined if no mid line was found.\n            SDPUtils.getMid = function (mediaSection) {\n                var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n                if (mid) {\n                    return mid.substr(6);\n                }\n            }\n\n            SDPUtils.parseFingerprint = function (line) {\n                var parts = line.substr(14).split(' ');\n                return {\n                    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n                    value: parts[1]\n                };\n            };\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\n            SDPUtils.getDtlsParameters = function (mediaSection, sessionpart) {\n                var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n                    'a=fingerprint:');\n                // Note: a=setup line is ignored since we use the 'auto' role.\n                // Note2: 'algorithm' is not case sensitive except in Edge.\n                return {\n                    role: 'auto',\n                    fingerprints: lines.map(SDPUtils.parseFingerprint)\n                };\n            };\n\n// Serializes DTLS parameters to SDP.\n            SDPUtils.writeDtlsParameters = function (params, setupType) {\n                var sdp = 'a=setup:' + setupType + '\\r\\n';\n                params.fingerprints.forEach(function (fp) {\n                    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n                });\n                return sdp;\n            };\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\n            SDPUtils.getIceParameters = function (mediaSection, sessionpart) {\n                var lines = SDPUtils.splitLines(mediaSection);\n                // Search in session part, too.\n                lines = lines.concat(SDPUtils.splitLines(sessionpart));\n                var iceParameters = {\n                    usernameFragment: lines.filter(function (line) {\n                        return line.indexOf('a=ice-ufrag:') === 0;\n                    })[0].substr(12),\n                    password: lines.filter(function (line) {\n                        return line.indexOf('a=ice-pwd:') === 0;\n                    })[0].substr(10)\n                };\n                return iceParameters;\n            };\n\n// Serializes ICE parameters to SDP.\n            SDPUtils.writeIceParameters = function (params) {\n                return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n                    'a=ice-pwd:' + params.password + '\\r\\n';\n            };\n\n// Parses the SDP media section and returns RTCRtpParameters.\n            SDPUtils.parseRtpParameters = function (mediaSection) {\n                var description = {\n                    codecs: [],\n                    headerExtensions: [],\n                    fecMechanisms: [],\n                    rtcp: []\n                };\n                var lines = SDPUtils.splitLines(mediaSection);\n                var mline = lines[0].split(' ');\n                for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n                    var pt = mline[i];\n                    var rtpmapline = SDPUtils.matchPrefix(\n                        mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n                    if (rtpmapline) {\n                        var codec = SDPUtils.parseRtpMap(rtpmapline);\n                        var fmtps = SDPUtils.matchPrefix(\n                            mediaSection, 'a=fmtp:' + pt + ' ');\n                        // Only the first a=fmtp:<pt> is considered.\n                        codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n                        codec.rtcpFeedback = SDPUtils.matchPrefix(\n                            mediaSection, 'a=rtcp-fb:' + pt + ' ')\n                            .map(SDPUtils.parseRtcpFb);\n                        description.codecs.push(codec);\n                        // parse FEC mechanisms from rtpmap lines.\n                        switch (codec.name.toUpperCase()) {\n                            case 'RED':\n                            case 'ULPFEC':\n                                description.fecMechanisms.push(codec.name.toUpperCase());\n                                break;\n                            default: // only RED and ULPFEC are recognized as FEC mechanisms.\n                                break;\n                        }\n                    }\n                }\n                SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function (line) {\n                    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n                });\n                // FIXME: parse rtcp.\n                return description;\n            };\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\n            SDPUtils.writeRtpDescription = function (kind, caps) {\n                var sdp = '';\n\n                // Build the mline.\n                sdp += 'm=' + kind + ' ';\n                sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n                sdp += ' UDP/TLS/RTP/SAVPF ';\n                sdp += caps.codecs.map(function (codec) {\n                    if (codec.preferredPayloadType !== undefined) {\n                        return codec.preferredPayloadType;\n                    }\n                    return codec.payloadType;\n                }).join(' ') + '\\r\\n';\n\n                sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n                sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n                // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n                caps.codecs.forEach(function (codec) {\n                    sdp += SDPUtils.writeRtpMap(codec);\n                    sdp += SDPUtils.writeFmtp(codec);\n                    sdp += SDPUtils.writeRtcpFb(codec);\n                });\n                var maxptime = 0;\n                caps.codecs.forEach(function (codec) {\n                    if (codec.maxptime > maxptime) {\n                        maxptime = codec.maxptime;\n                    }\n                });\n                if (maxptime > 0) {\n                    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n                }\n                sdp += 'a=rtcp-mux\\r\\n';\n\n                caps.headerExtensions.forEach(function (extension) {\n                    sdp += SDPUtils.writeExtmap(extension);\n                });\n                // FIXME: write fecMechanisms.\n                return sdp;\n            };\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\n            SDPUtils.parseRtpEncodingParameters = function (mediaSection) {\n                var encodingParameters = [];\n                var description = SDPUtils.parseRtpParameters(mediaSection);\n                var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n                var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n                // filter a=ssrc:... cname:, ignore PlanB-msid\n                var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n                    .map(function (line) {\n                        return SDPUtils.parseSsrcMedia(line);\n                    })\n                    .filter(function (parts) {\n                        return parts.attribute === 'cname';\n                    });\n                var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n                var secondarySsrc;\n\n                var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n                    .map(function (line) {\n                        var parts = line.split(' ');\n                        parts.shift();\n                        return parts.map(function (part) {\n                            return parseInt(part, 10);\n                        });\n                    });\n                if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n                    secondarySsrc = flows[0][1];\n                }\n\n                description.codecs.forEach(function (codec) {\n                    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n                        var encParam = {\n                            ssrc: primarySsrc,\n                            codecPayloadType: parseInt(codec.parameters.apt, 10),\n                            rtx: {\n                                ssrc: secondarySsrc\n                            }\n                        };\n                        encodingParameters.push(encParam);\n                        if (hasRed) {\n                            encParam = JSON.parse(JSON.stringify(encParam));\n                            encParam.fec = {\n                                ssrc: secondarySsrc,\n                                mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n                            };\n                            encodingParameters.push(encParam);\n                        }\n                    }\n                });\n                if (encodingParameters.length === 0 && primarySsrc) {\n                    encodingParameters.push({\n                        ssrc: primarySsrc\n                    });\n                }\n\n                // we support both b=AS and b=TIAS but interpret AS as TIAS.\n                var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n                if (bandwidth.length) {\n                    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n                        bandwidth = parseInt(bandwidth[0].substr(7), 10);\n                    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n                        // use formula from JSEP to convert b=AS to TIAS value.\n                        bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\n                            - (50 * 40 * 8);\n                    } else {\n                        bandwidth = undefined;\n                    }\n                    encodingParameters.forEach(function (params) {\n                        params.maxBitrate = bandwidth;\n                    });\n                }\n                return encodingParameters;\n            };\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\n            SDPUtils.parseRtcpParameters = function (mediaSection) {\n                var rtcpParameters = {};\n\n                var cname;\n                // Gets the first SSRC. Note that with RTX there might be multiple\n                // SSRCs.\n                var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n                    .map(function (line) {\n                        return SDPUtils.parseSsrcMedia(line);\n                    })\n                    .filter(function (obj) {\n                        return obj.attribute === 'cname';\n                    })[0];\n                if (remoteSsrc) {\n                    rtcpParameters.cname = remoteSsrc.value;\n                    rtcpParameters.ssrc = remoteSsrc.ssrc;\n                }\n\n                // Edge uses the compound attribute instead of reducedSize\n                // compound is !reducedSize\n                var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n                rtcpParameters.reducedSize = rsize.length > 0;\n                rtcpParameters.compound = rsize.length === 0;\n\n                // parses the rtcp-mux attrіbute.\n                // Note that Edge does not support unmuxed RTCP.\n                var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n                rtcpParameters.mux = mux.length > 0;\n\n                return rtcpParameters;\n            };\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\n            SDPUtils.parseMsid = function (mediaSection) {\n                var parts;\n                var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n                if (spec.length === 1) {\n                    parts = spec[0].substr(7).split(' ');\n                    return {stream: parts[0], track: parts[1]};\n                }\n                var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n                    .map(function (line) {\n                        return SDPUtils.parseSsrcMedia(line);\n                    })\n                    .filter(function (parts) {\n                        return parts.attribute === 'msid';\n                    });\n                if (planB.length > 0) {\n                    parts = planB[0].value.split(' ');\n                    return {stream: parts[0], track: parts[1]};\n                }\n            };\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\n            SDPUtils.generateSessionId = function () {\n                return Math.random().toString().substr(2, 21);\n            };\n\n// Write boilder plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\n            SDPUtils.writeSessionBoilerplate = function (sessId, sessVer) {\n                var sessionId;\n                var version = sessVer !== undefined ? sessVer : 2;\n                if (sessId) {\n                    sessionId = sessId;\n                } else {\n                    sessionId = SDPUtils.generateSessionId();\n                }\n                // FIXME: sess-id should be an NTP timestamp.\n                return 'v=0\\r\\n' +\n                    'o=thisisadapterortc ' + sessionId + ' ' + version + ' IN IP4 127.0.0.1\\r\\n' +\n                    's=-\\r\\n' +\n                    't=0 0\\r\\n';\n            };\n\n            SDPUtils.writeMediaSection = function (transceiver, caps, type, stream) {\n                var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n                // Map ICE parameters (ufrag, pwd) to SDP.\n                sdp += SDPUtils.writeIceParameters(\n                    transceiver.iceGatherer.getLocalParameters());\n\n                // Map DTLS parameters to SDP.\n                sdp += SDPUtils.writeDtlsParameters(\n                    transceiver.dtlsTransport.getLocalParameters(),\n                    type === 'offer' ? 'actpass' : 'active');\n\n                sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n                if (transceiver.direction) {\n                    sdp += 'a=' + transceiver.direction + '\\r\\n';\n                } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n                    sdp += 'a=sendrecv\\r\\n';\n                } else if (transceiver.rtpSender) {\n                    sdp += 'a=sendonly\\r\\n';\n                } else if (transceiver.rtpReceiver) {\n                    sdp += 'a=recvonly\\r\\n';\n                } else {\n                    sdp += 'a=inactive\\r\\n';\n                }\n\n                if (transceiver.rtpSender) {\n                    // spec.\n                    var msid = 'msid:' + stream.id + ' ' +\n                        transceiver.rtpSender.track.id + '\\r\\n';\n                    sdp += 'a=' + msid;\n\n                    // for Chrome.\n                    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n                        ' ' + msid;\n                    if (transceiver.sendEncodingParameters[0].rtx) {\n                        sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n                            ' ' + msid;\n                        sdp += 'a=ssrc-group:FID ' +\n                            transceiver.sendEncodingParameters[0].ssrc + ' ' +\n                            transceiver.sendEncodingParameters[0].rtx.ssrc +\n                            '\\r\\n';\n                    }\n                }\n                // FIXME: this should be written by writeRtpDescription.\n                sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n                    ' cname:' + SDPUtils.localCName + '\\r\\n';\n                if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n                    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n                        ' cname:' + SDPUtils.localCName + '\\r\\n';\n                }\n                return sdp;\n            };\n\n// Gets the direction from the mediaSection or the sessionpart.\n            SDPUtils.getDirection = function (mediaSection, sessionpart) {\n                // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n                var lines = SDPUtils.splitLines(mediaSection);\n                for (var i = 0; i < lines.length; i++) {\n                    switch (lines[i]) {\n                        case 'a=sendrecv':\n                        case 'a=sendonly':\n                        case 'a=recvonly':\n                        case 'a=inactive':\n                            return lines[i].substr(2);\n                        default:\n                        // FIXME: What should happen here?\n                    }\n                }\n                if (sessionpart) {\n                    return SDPUtils.getDirection(sessionpart);\n                }\n                return 'sendrecv';\n            };\n\n            SDPUtils.getKind = function (mediaSection) {\n                var lines = SDPUtils.splitLines(mediaSection);\n                var mline = lines[0].split(' ');\n                return mline[0].substr(2);\n            };\n\n            SDPUtils.isRejected = function (mediaSection) {\n                return mediaSection.split(' ', 2)[1] === '0';\n            };\n\n            SDPUtils.parseMLine = function (mediaSection) {\n                var lines = SDPUtils.splitLines(mediaSection);\n                var parts = lines[0].substr(2).split(' ');\n                return {\n                    kind: parts[0],\n                    port: parseInt(parts[1], 10),\n                    protocol: parts[2],\n                    fmt: parts.slice(3).join(' ')\n                };\n            };\n\n            SDPUtils.parseOLine = function (mediaSection) {\n                var line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n                var parts = line.substr(2).split(' ');\n                return {\n                    username: parts[0],\n                    sessionId: parts[1],\n                    sessionVersion: parseInt(parts[2], 10),\n                    netType: parts[3],\n                    addressType: parts[4],\n                    address: parts[5],\n                };\n            }\n\n// Expose public methods.\n            if (typeof module === 'object') {\n                module.exports = SDPUtils;\n            }\n\n        }, {}],\n        3: [function (require, module, exports) {\n            (function (global) {\n                /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n                /* eslint-env node */\n\n                'use strict';\n\n                var adapterFactory = require('./adapter_factory.js');\n                module.exports = adapterFactory({window: global.window});\n\n            }).call(this, typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n        }, {\"./adapter_factory.js\": 4}],\n        4: [function (require, module, exports) {\n            /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n            /* eslint-env node */\n\n            'use strict';\n\n            var utils = require('./utils');\n// Shimming starts here.\n            module.exports = function (dependencies, opts) {\n                var window = dependencies && dependencies.window;\n\n                var options = {\n                    shimChrome: true,\n                    shimFirefox: true,\n                    shimEdge: true,\n                    shimSafari: true,\n                };\n\n                for (var key in opts) {\n                    if (hasOwnProperty.call(opts, key)) {\n                        options[key] = opts[key];\n                    }\n                }\n\n                // Utils.\n                var logging = utils.log;\n                var browserDetails = utils.detectBrowser(window);\n\n                // Uncomment the line below if you want logging to occur, including logging\n                // for the switch statement below. Can also be turned on in the browser via\n                // adapter.disableLog(false), but then logging from the switch statement below\n                // will not appear.\n                // require('./utils').disableLog(false);\n\n                // Browser shims.\n                var chromeShim = require('./chrome/chrome_shim') || null;\n                var edgeShim = require('./edge/edge_shim') || null;\n                var firefoxShim = require('./firefox/firefox_shim') || null;\n                var safariShim = require('./safari/safari_shim') || null;\n                var commonShim = require('./common_shim') || null;\n\n                // Export to the adapter global object visible in the browser.\n                var adapter = {\n                    browserDetails: browserDetails,\n                    commonShim: commonShim,\n                    extractVersion: utils.extractVersion,\n                    disableLog: utils.disableLog,\n                    disableWarnings: utils.disableWarnings\n                };\n\n                // Shim browser if found.\n                switch (browserDetails.browser) {\n                    case 'chrome':\n                        if (!chromeShim || !chromeShim.shimPeerConnection ||\n                            !options.shimChrome) {\n                            logging('Chrome shim is not included in this adapter release.');\n                            return adapter;\n                        }\n                        logging('adapter.js shimming chrome.');\n                        // Export to the adapter global object visible in the browser.\n                        adapter.browserShim = chromeShim;\n                        commonShim.shimCreateObjectURL(window);\n\n                        chromeShim.shimGetUserMedia(window);\n                        chromeShim.shimMediaStream(window);\n                        chromeShim.shimSourceObject(window);\n                        chromeShim.shimPeerConnection(window);\n                        chromeShim.shimOnTrack(window);\n                        chromeShim.shimAddTrackRemoveTrack(window);\n                        chromeShim.shimGetSendersWithDtmf(window);\n\n                        commonShim.shimRTCIceCandidate(window);\n                        commonShim.shimMaxMessageSize(window);\n                        commonShim.shimSendThrowTypeError(window);\n                        break;\n                    case 'firefox':\n                        if (!firefoxShim || !firefoxShim.shimPeerConnection ||\n                            !options.shimFirefox) {\n                            logging('Firefox shim is not included in this adapter release.');\n                            return adapter;\n                        }\n                        logging('adapter.js shimming firefox.');\n                        // Export to the adapter global object visible in the browser.\n                        adapter.browserShim = firefoxShim;\n                        commonShim.shimCreateObjectURL(window);\n\n                        firefoxShim.shimGetUserMedia(window);\n                        firefoxShim.shimSourceObject(window);\n                        firefoxShim.shimPeerConnection(window);\n                        firefoxShim.shimOnTrack(window);\n                        firefoxShim.shimRemoveStream(window);\n\n                        commonShim.shimRTCIceCandidate(window);\n                        commonShim.shimMaxMessageSize(window);\n                        commonShim.shimSendThrowTypeError(window);\n                        break;\n                    case 'edge':\n                        if (!edgeShim || !edgeShim.shimPeerConnection || !options.shimEdge) {\n                            logging('MS edge shim is not included in this adapter release.');\n                            return adapter;\n                        }\n                        logging('adapter.js shimming edge.');\n                        // Export to the adapter global object visible in the browser.\n                        adapter.browserShim = edgeShim;\n                        commonShim.shimCreateObjectURL(window);\n\n                        edgeShim.shimGetUserMedia(window);\n                        edgeShim.shimPeerConnection(window);\n                        edgeShim.shimReplaceTrack(window);\n\n                        // the edge shim implements the full RTCIceCandidate object.\n\n                        commonShim.shimMaxMessageSize(window);\n                        commonShim.shimSendThrowTypeError(window);\n                        break;\n                    case 'safari':\n                        if (!safariShim || !options.shimSafari) {\n                            logging('Safari shim is not included in this adapter release.');\n                            return adapter;\n                        }\n                        logging('adapter.js shimming safari.');\n                        // Export to the adapter global object visible in the browser.\n                        adapter.browserShim = safariShim;\n                        commonShim.shimCreateObjectURL(window);\n\n                        safariShim.shimRTCIceServerUrls(window);\n                        safariShim.shimCallbacksAPI(window);\n                        safariShim.shimLocalStreamsAPI(window);\n                        safariShim.shimRemoteStreamsAPI(window);\n                        safariShim.shimTrackEventTransceiver(window);\n                        safariShim.shimGetUserMedia(window);\n                        safariShim.shimCreateOfferLegacy(window);\n\n                        commonShim.shimRTCIceCandidate(window);\n                        commonShim.shimMaxMessageSize(window);\n                        commonShim.shimSendThrowTypeError(window);\n                        break;\n                    default:\n                        logging('Unsupported browser!');\n                        break;\n                }\n\n                return adapter;\n            };\n\n        }, {\n            \"./chrome/chrome_shim\": 5,\n            \"./common_shim\": 7,\n            \"./edge/edge_shim\": 8,\n            \"./firefox/firefox_shim\": 10,\n            \"./safari/safari_shim\": 12,\n            \"./utils\": 13\n        }],\n        5: [function (require, module, exports) {\n\n            /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n            /* eslint-env node */\n            'use strict';\n            var utils = require('../utils.js');\n            var logging = utils.log;\n\n            module.exports = {\n                shimGetUserMedia: require('./getusermedia'),\n                shimMediaStream: function (window) {\n                    window.MediaStream = window.MediaStream || window.webkitMediaStream;\n                },\n\n                shimOnTrack: function (window) {\n                    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n                        window.RTCPeerConnection.prototype)) {\n                        Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n                            get: function () {\n                                return this._ontrack;\n                            },\n                            set: function (f) {\n                                if (this._ontrack) {\n                                    this.removeEventListener('track', this._ontrack);\n                                }\n                                this.addEventListener('track', this._ontrack = f);\n                            }\n                        });\n                        var origSetRemoteDescription =\n                            window.RTCPeerConnection.prototype.setRemoteDescription;\n                        window.RTCPeerConnection.prototype.setRemoteDescription = function () {\n                            var pc = this;\n                            if (!pc._ontrackpoly) {\n                                pc._ontrackpoly = function (e) {\n                                    // onaddstream does not fire when a track is added to an existing\n                                    // stream. But stream.onaddtrack is implemented so we use that.\n                                    e.stream.addEventListener('addtrack', function (te) {\n                                        var receiver;\n                                        if (window.RTCPeerConnection.prototype.getReceivers) {\n                                            receiver = pc.getReceivers().find(function (r) {\n                                                return r.track && r.track.id === te.track.id;\n                                            });\n                                        } else {\n                                            receiver = {track: te.track};\n                                        }\n\n                                        var event = new Event('track');\n                                        event.track = te.track;\n                                        event.receiver = receiver;\n                                        event.transceiver = {receiver: receiver};\n                                        event.streams = [e.stream];\n                                        pc.dispatchEvent(event);\n                                    });\n                                    e.stream.getTracks().forEach(function (track) {\n                                        var receiver;\n                                        if (window.RTCPeerConnection.prototype.getReceivers) {\n                                            receiver = pc.getReceivers().find(function (r) {\n                                                return r.track && r.track.id === track.id;\n                                            });\n                                        } else {\n                                            receiver = {track: track};\n                                        }\n                                        var event = new Event('track');\n                                        event.track = track;\n                                        event.receiver = receiver;\n                                        event.transceiver = {receiver: receiver};\n                                        event.streams = [e.stream];\n                                        pc.dispatchEvent(event);\n                                    });\n                                };\n                                pc.addEventListener('addstream', pc._ontrackpoly);\n                            }\n                            return origSetRemoteDescription.apply(pc, arguments);\n                        };\n                    } else if (!('RTCRtpTransceiver' in window)) {\n                        utils.wrapPeerConnectionEvent(window, 'track', function (e) {\n                            if (!e.transceiver) {\n                                e.transceiver = {receiver: e.receiver};\n                            }\n                            return e;\n                        });\n                    }\n                },\n\n                shimGetSendersWithDtmf: function (window) {\n                    // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n                    if (typeof window === 'object' && window.RTCPeerConnection &&\n                        !('getSenders' in window.RTCPeerConnection.prototype) &&\n                        'createDTMFSender' in window.RTCPeerConnection.prototype) {\n                        var shimSenderWithDtmf = function (pc, track) {\n                            return {\n                                track: track,\n                                get dtmf() {\n                                    if (this._dtmf === undefined) {\n                                        if (track.kind === 'audio') {\n                                            this._dtmf = pc.createDTMFSender(track);\n                                        } else {\n                                            this._dtmf = null;\n                                        }\n                                    }\n                                    return this._dtmf;\n                                },\n                                _pc: pc\n                            };\n                        };\n\n                        // augment addTrack when getSenders is not available.\n                        if (!window.RTCPeerConnection.prototype.getSenders) {\n                            window.RTCPeerConnection.prototype.getSenders = function () {\n                                this._senders = this._senders || [];\n                                return this._senders.slice(); // return a copy of the internal state.\n                            };\n                            var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n                            window.RTCPeerConnection.prototype.addTrack = function (track, stream) {\n                                var pc = this;\n                                var sender = origAddTrack.apply(pc, arguments);\n                                if (!sender) {\n                                    sender = shimSenderWithDtmf(pc, track);\n                                    pc._senders.push(sender);\n                                }\n                                return sender;\n                            };\n\n                            var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n                            window.RTCPeerConnection.prototype.removeTrack = function (sender) {\n                                var pc = this;\n                                origRemoveTrack.apply(pc, arguments);\n                                var idx = pc._senders.indexOf(sender);\n                                if (idx !== -1) {\n                                    pc._senders.splice(idx, 1);\n                                }\n                            };\n                        }\n                        var origAddStream = window.RTCPeerConnection.prototype.addStream;\n                        window.RTCPeerConnection.prototype.addStream = function (stream) {\n                            var pc = this;\n                            pc._senders = pc._senders || [];\n                            origAddStream.apply(pc, [stream]);\n                            stream.getTracks().forEach(function (track) {\n                                pc._senders.push(shimSenderWithDtmf(pc, track));\n                            });\n                        };\n\n                        var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n                        window.RTCPeerConnection.prototype.removeStream = function (stream) {\n                            var pc = this;\n                            pc._senders = pc._senders || [];\n                            origRemoveStream.apply(pc, [stream]);\n\n                            stream.getTracks().forEach(function (track) {\n                                var sender = pc._senders.find(function (s) {\n                                    return s.track === track;\n                                });\n                                if (sender) {\n                                    pc._senders.splice(pc._senders.indexOf(sender), 1); // remove sender\n                                }\n                            });\n                        };\n                    } else if (typeof window === 'object' && window.RTCPeerConnection &&\n                        'getSenders' in window.RTCPeerConnection.prototype &&\n                        'createDTMFSender' in window.RTCPeerConnection.prototype &&\n                        window.RTCRtpSender &&\n                        !('dtmf' in window.RTCRtpSender.prototype)) {\n                        var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n                        window.RTCPeerConnection.prototype.getSenders = function () {\n                            var pc = this;\n                            var senders = origGetSenders.apply(pc, []);\n                            senders.forEach(function (sender) {\n                                sender._pc = pc;\n                            });\n                            return senders;\n                        };\n\n                        Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n                            get: function () {\n                                if (this._dtmf === undefined) {\n                                    if (this.track.kind === 'audio') {\n                                        this._dtmf = this._pc.createDTMFSender(this.track);\n                                    } else {\n                                        this._dtmf = null;\n                                    }\n                                }\n                                return this._dtmf;\n                            }\n                        });\n                    }\n                },\n\n                shimSourceObject: function (window) {\n                    var URL = window && window.URL;\n\n                    if (typeof window === 'object') {\n                        if (window.HTMLMediaElement &&\n                            !('srcObject' in window.HTMLMediaElement.prototype)) {\n                            // Shim the srcObject property, once, when HTMLMediaElement is found.\n                            Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n                                get: function () {\n                                    return this._srcObject;\n                                },\n                                set: function (stream) {\n                                    var self = this;\n                                    // Use _srcObject as a private property for this shim\n                                    this._srcObject = stream;\n                                    if (this.src) {\n                                        URL.revokeObjectURL(this.src);\n                                    }\n\n                                    if (!stream) {\n                                        this.src = '';\n                                        return undefined;\n                                    }\n                                    this.src = URL.createObjectURL(stream);\n                                    // We need to recreate the blob url when a track is added or\n                                    // removed. Doing it manually since we want to avoid a recursion.\n                                    stream.addEventListener('addtrack', function () {\n                                        if (self.src) {\n                                            URL.revokeObjectURL(self.src);\n                                        }\n                                        self.src = URL.createObjectURL(stream);\n                                    });\n                                    stream.addEventListener('removetrack', function () {\n                                        if (self.src) {\n                                            URL.revokeObjectURL(self.src);\n                                        }\n                                        self.src = URL.createObjectURL(stream);\n                                    });\n                                }\n                            });\n                        }\n                    }\n                },\n\n                shimAddTrackRemoveTrackWithNative: function (window) {\n                    // shim addTrack/removeTrack with native variants in order to make\n                    // the interactions with legacy getLocalStreams behave as in other browsers.\n                    // Keeps a mapping stream.id => [stream, rtpsenders...]\n                    window.RTCPeerConnection.prototype.getLocalStreams = function () {\n                        var pc = this;\n                        this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n                        return Object.keys(this._shimmedLocalStreams).map(function (streamId) {\n                            return pc._shimmedLocalStreams[streamId][0];\n                        });\n                    };\n\n                    var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n                    window.RTCPeerConnection.prototype.addTrack = function (track, stream) {\n                        if (!stream) {\n                            return origAddTrack.apply(this, arguments);\n                        }\n                        this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n                        var sender = origAddTrack.apply(this, arguments);\n                        if (!this._shimmedLocalStreams[stream.id]) {\n                            this._shimmedLocalStreams[stream.id] = [stream, sender];\n                        } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n                            this._shimmedLocalStreams[stream.id].push(sender);\n                        }\n                        return sender;\n                    };\n\n                    var origAddStream = window.RTCPeerConnection.prototype.addStream;\n                    window.RTCPeerConnection.prototype.addStream = function (stream) {\n                        var pc = this;\n                        this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n                        stream.getTracks().forEach(function (track) {\n                            var alreadyExists = pc.getSenders().find(function (s) {\n                                return s.track === track;\n                            });\n                            if (alreadyExists) {\n                                throw new DOMException('Track already exists.',\n                                    'InvalidAccessError');\n                            }\n                        });\n                        var existingSenders = pc.getSenders();\n                        origAddStream.apply(this, arguments);\n                        var newSenders = pc.getSenders().filter(function (newSender) {\n                            return existingSenders.indexOf(newSender) === -1;\n                        });\n                        this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n                    };\n\n                    var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n                    window.RTCPeerConnection.prototype.removeStream = function (stream) {\n                        this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n                        delete this._shimmedLocalStreams[stream.id];\n                        return origRemoveStream.apply(this, arguments);\n                    };\n\n                    var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n                    window.RTCPeerConnection.prototype.removeTrack = function (sender) {\n                        var pc = this;\n                        this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n                        if (sender) {\n                            Object.keys(this._shimmedLocalStreams).forEach(function (streamId) {\n                                var idx = pc._shimmedLocalStreams[streamId].indexOf(sender);\n                                if (idx !== -1) {\n                                    pc._shimmedLocalStreams[streamId].splice(idx, 1);\n                                }\n                                if (pc._shimmedLocalStreams[streamId].length === 1) {\n                                    delete pc._shimmedLocalStreams[streamId];\n                                }\n                            });\n                        }\n                        return origRemoveTrack.apply(this, arguments);\n                    };\n                },\n\n                shimAddTrackRemoveTrack: function (window) {\n                    var browserDetails = utils.detectBrowser(window);\n                    // shim addTrack and removeTrack.\n                    if (window.RTCPeerConnection.prototype.addTrack &&\n                        browserDetails.version >= 65) {\n                        return this.shimAddTrackRemoveTrackWithNative(window);\n                    }\n\n                    // also shim pc.getLocalStreams when addTrack is shimmed\n                    // to return the original streams.\n                    var origGetLocalStreams = window.RTCPeerConnection.prototype\n                        .getLocalStreams;\n                    window.RTCPeerConnection.prototype.getLocalStreams = function () {\n                        var pc = this;\n                        var nativeStreams = origGetLocalStreams.apply(this);\n                        pc._reverseStreams = pc._reverseStreams || {};\n                        return nativeStreams.map(function (stream) {\n                            return pc._reverseStreams[stream.id];\n                        });\n                    };\n\n                    var origAddStream = window.RTCPeerConnection.prototype.addStream;\n                    window.RTCPeerConnection.prototype.addStream = function (stream) {\n                        var pc = this;\n                        pc._streams = pc._streams || {};\n                        pc._reverseStreams = pc._reverseStreams || {};\n\n                        stream.getTracks().forEach(function (track) {\n                            var alreadyExists = pc.getSenders().find(function (s) {\n                                return s.track === track;\n                            });\n                            if (alreadyExists) {\n                                throw new DOMException('Track already exists.',\n                                    'InvalidAccessError');\n                            }\n                        });\n                        // Add identity mapping for consistency with addTrack.\n                        // Unless this is being used with a stream from addTrack.\n                        if (!pc._reverseStreams[stream.id]) {\n                            var newStream = new window.MediaStream(stream.getTracks());\n                            pc._streams[stream.id] = newStream;\n                            pc._reverseStreams[newStream.id] = stream;\n                            stream = newStream;\n                        }\n                        origAddStream.apply(pc, [stream]);\n                    };\n\n                    var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n                    window.RTCPeerConnection.prototype.removeStream = function (stream) {\n                        var pc = this;\n                        pc._streams = pc._streams || {};\n                        pc._reverseStreams = pc._reverseStreams || {};\n\n                        origRemoveStream.apply(pc, [(pc._streams[stream.id] || stream)]);\n                        delete pc._reverseStreams[(pc._streams[stream.id] ?\n                            pc._streams[stream.id].id : stream.id)];\n                        delete pc._streams[stream.id];\n                    };\n\n                    window.RTCPeerConnection.prototype.addTrack = function (track, stream) {\n                        var pc = this;\n                        if (pc.signalingState === 'closed') {\n                            throw new DOMException(\n                                'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n                                'InvalidStateError');\n                        }\n                        var streams = [].slice.call(arguments, 1);\n                        if (streams.length !== 1 ||\n                            !streams[0].getTracks().find(function (t) {\n                                return t === track;\n                            })) {\n                            // this is not fully correct but all we can manage without\n                            // [[associated MediaStreams]] internal slot.\n                            throw new DOMException(\n                                'The adapter.js addTrack polyfill only supports a single ' +\n                                ' stream which is associated with the specified track.',\n                                'NotSupportedError');\n                        }\n\n                        var alreadyExists = pc.getSenders().find(function (s) {\n                            return s.track === track;\n                        });\n                        if (alreadyExists) {\n                            throw new DOMException('Track already exists.',\n                                'InvalidAccessError');\n                        }\n\n                        pc._streams = pc._streams || {};\n                        pc._reverseStreams = pc._reverseStreams || {};\n                        var oldStream = pc._streams[stream.id];\n                        if (oldStream) {\n                            // this is using odd Chrome behaviour, use with caution:\n                            // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n                            // Note: we rely on the high-level addTrack/dtmf shim to\n                            // create the sender with a dtmf sender.\n                            oldStream.addTrack(track);\n\n                            // Trigger ONN async.\n                            Promise.resolve().then(function () {\n                                pc.dispatchEvent(new Event('negotiationneeded'));\n                            });\n                        } else {\n                            var newStream = new window.MediaStream([track]);\n                            pc._streams[stream.id] = newStream;\n                            pc._reverseStreams[newStream.id] = stream;\n                            pc.addStream(newStream);\n                        }\n                        return pc.getSenders().find(function (s) {\n                            return s.track === track;\n                        });\n                    };\n\n                    // replace the internal stream id with the external one and\n                    // vice versa.\n                    function replaceInternalStreamId(pc, description) {\n                        var sdp = description.sdp;\n                        Object.keys(pc._reverseStreams || []).forEach(function (internalId) {\n                            var externalStream = pc._reverseStreams[internalId];\n                            var internalStream = pc._streams[externalStream.id];\n                            sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\n                                externalStream.id);\n                        });\n                        return new RTCSessionDescription({\n                            type: description.type,\n                            sdp: sdp\n                        });\n                    }\n\n                    function replaceExternalStreamId(pc, description) {\n                        var sdp = description.sdp;\n                        Object.keys(pc._reverseStreams || []).forEach(function (internalId) {\n                            var externalStream = pc._reverseStreams[internalId];\n                            var internalStream = pc._streams[externalStream.id];\n                            sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\n                                internalStream.id);\n                        });\n                        return new RTCSessionDescription({\n                            type: description.type,\n                            sdp: sdp\n                        });\n                    }\n\n                    ['createOffer', 'createAnswer'].forEach(function (method) {\n                        var nativeMethod = window.RTCPeerConnection.prototype[method];\n                        window.RTCPeerConnection.prototype[method] = function () {\n                            var pc = this;\n                            var args = arguments;\n                            var isLegacyCall = arguments.length &&\n                                typeof arguments[0] === 'function';\n                            if (isLegacyCall) {\n                                return nativeMethod.apply(pc, [\n                                    function (description) {\n                                        var desc = replaceInternalStreamId(pc, description);\n                                        args[0].apply(null, [desc]);\n                                    },\n                                    function (err) {\n                                        if (args[1]) {\n                                            args[1].apply(null, err);\n                                        }\n                                    }, arguments[2]\n                                ]);\n                            }\n                            return nativeMethod.apply(pc, arguments)\n                                .then(function (description) {\n                                    return replaceInternalStreamId(pc, description);\n                                });\n                        };\n                    });\n\n                    var origSetLocalDescription =\n                        window.RTCPeerConnection.prototype.setLocalDescription;\n                    window.RTCPeerConnection.prototype.setLocalDescription = function () {\n                        var pc = this;\n                        if (!arguments.length || !arguments[0].type) {\n                            return origSetLocalDescription.apply(pc, arguments);\n                        }\n                        arguments[0] = replaceExternalStreamId(pc, arguments[0]);\n                        return origSetLocalDescription.apply(pc, arguments);\n                    };\n\n                    // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n                    var origLocalDescription = Object.getOwnPropertyDescriptor(\n                        window.RTCPeerConnection.prototype, 'localDescription');\n                    Object.defineProperty(window.RTCPeerConnection.prototype,\n                        'localDescription', {\n                            get: function () {\n                                var pc = this;\n                                var description = origLocalDescription.get.apply(this);\n                                if (description.type === '') {\n                                    return description;\n                                }\n                                return replaceInternalStreamId(pc, description);\n                            }\n                        });\n\n                    window.RTCPeerConnection.prototype.removeTrack = function (sender) {\n                        var pc = this;\n                        if (pc.signalingState === 'closed') {\n                            throw new DOMException(\n                                'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n                                'InvalidStateError');\n                        }\n                        // We can not yet check for sender instanceof RTCRtpSender\n                        // since we shim RTPSender. So we check if sender._pc is set.\n                        if (!sender._pc) {\n                            throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n                                'does not implement interface RTCRtpSender.', 'TypeError');\n                        }\n                        var isLocal = sender._pc === pc;\n                        if (!isLocal) {\n                            throw new DOMException('Sender was not created by this connection.',\n                                'InvalidAccessError');\n                        }\n\n                        // Search for the native stream the senders track belongs to.\n                        pc._streams = pc._streams || {};\n                        var stream;\n                        Object.keys(pc._streams).forEach(function (streamid) {\n                            var hasTrack = pc._streams[streamid].getTracks().find(function (track) {\n                                return sender.track === track;\n                            });\n                            if (hasTrack) {\n                                stream = pc._streams[streamid];\n                            }\n                        });\n\n                        if (stream) {\n                            if (stream.getTracks().length === 1) {\n                                // if this is the last track of the stream, remove the stream. This\n                                // takes care of any shimmed _senders.\n                                pc.removeStream(pc._reverseStreams[stream.id]);\n                            } else {\n                                // relying on the same odd chrome behaviour as above.\n                                stream.removeTrack(sender.track);\n                            }\n                            pc.dispatchEvent(new Event('negotiationneeded'));\n                        }\n                    };\n                },\n\n                shimPeerConnection: function (window) {\n                    var browserDetails = utils.detectBrowser(window);\n\n                    // The RTCPeerConnection object.\n                    if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n                        window.RTCPeerConnection = function (pcConfig, pcConstraints) {\n                            // Translate iceTransportPolicy to iceTransports,\n                            // see https://code.google.com/p/webrtc/issues/detail?id=4869\n                            // this was fixed in M56 along with unprefixing RTCPeerConnection.\n                            logging('PeerConnection');\n                            if (pcConfig && pcConfig.iceTransportPolicy) {\n                                pcConfig.iceTransports = pcConfig.iceTransportPolicy;\n                            }\n\n                            return new window.webkitRTCPeerConnection(pcConfig, pcConstraints);\n                        };\n                        window.RTCPeerConnection.prototype =\n                            window.webkitRTCPeerConnection.prototype;\n                        // wrap static methods. Currently just generateCertificate.\n                        if (window.webkitRTCPeerConnection.generateCertificate) {\n                            Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n                                get: function () {\n                                    return window.webkitRTCPeerConnection.generateCertificate;\n                                }\n                            });\n                        }\n                    } else {\n                        // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n                        var OrigPeerConnection = window.RTCPeerConnection;\n                        window.RTCPeerConnection = function (pcConfig, pcConstraints) {\n                            if (pcConfig && pcConfig.iceServers) {\n                                var newIceServers = [];\n                                for (var i = 0; i < pcConfig.iceServers.length; i++) {\n                                    var server = pcConfig.iceServers[i];\n                                    if (!server.hasOwnProperty('urls') &&\n                                        server.hasOwnProperty('url')) {\n                                        utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n                                        server = JSON.parse(JSON.stringify(server));\n                                        server.urls = server.url;\n                                        newIceServers.push(server);\n                                    } else {\n                                        newIceServers.push(pcConfig.iceServers[i]);\n                                    }\n                                }\n                                pcConfig.iceServers = newIceServers;\n                            }\n                            return new OrigPeerConnection(pcConfig, pcConstraints);\n                        };\n                        window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n                        // wrap static methods. Currently just generateCertificate.\n                        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n                            get: function () {\n                                return OrigPeerConnection.generateCertificate;\n                            }\n                        });\n                    }\n\n                    var origGetStats = window.RTCPeerConnection.prototype.getStats;\n                    window.RTCPeerConnection.prototype.getStats = function (selector,\n                                                                            successCallback, errorCallback) {\n                        var pc = this;\n                        var args = arguments;\n\n                        // If selector is a function then we are in the old style stats so just\n                        // pass back the original getStats format to avoid breaking old users.\n                        if (arguments.length > 0 && typeof selector === 'function') {\n                            return origGetStats.apply(this, arguments);\n                        }\n\n                        // When spec-style getStats is supported, return those when called with\n                        // either no arguments or the selector argument is null.\n                        if (origGetStats.length === 0 && (arguments.length === 0 ||\n                            typeof arguments[0] !== 'function')) {\n                            return origGetStats.apply(this, []);\n                        }\n\n                        var fixChromeStats_ = function (response) {\n                            var standardReport = {};\n                            var reports = response.result();\n                            reports.forEach(function (report) {\n                                var standardStats = {\n                                    id: report.id,\n                                    timestamp: report.timestamp,\n                                    type: {\n                                        localcandidate: 'local-candidate',\n                                        remotecandidate: 'remote-candidate'\n                                    }[report.type] || report.type\n                                };\n                                report.names().forEach(function (name) {\n                                    standardStats[name] = report.stat(name);\n                                });\n                                standardReport[standardStats.id] = standardStats;\n                            });\n\n                            return standardReport;\n                        };\n\n                        // shim getStats with maplike support\n                        var makeMapStats = function (stats) {\n                            return new Map(Object.keys(stats).map(function (key) {\n                                return [key, stats[key]];\n                            }));\n                        };\n\n                        if (arguments.length >= 2) {\n                            var successCallbackWrapper_ = function (response) {\n                                args[1](makeMapStats(fixChromeStats_(response)));\n                            };\n\n                            return origGetStats.apply(this, [successCallbackWrapper_,\n                                arguments[0]]);\n                        }\n\n                        // promise-support\n                        return new Promise(function (resolve, reject) {\n                            origGetStats.apply(pc, [\n                                function (response) {\n                                    resolve(makeMapStats(fixChromeStats_(response)));\n                                }, reject]);\n                        }).then(successCallback, errorCallback);\n                    };\n\n                    // add promise support -- natively available in Chrome 51\n                    if (browserDetails.version < 51) {\n                        ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n                            .forEach(function (method) {\n                                var nativeMethod = window.RTCPeerConnection.prototype[method];\n                                window.RTCPeerConnection.prototype[method] = function () {\n                                    var args = arguments;\n                                    var pc = this;\n                                    var promise = new Promise(function (resolve, reject) {\n                                        nativeMethod.apply(pc, [args[0], resolve, reject]);\n                                    });\n                                    if (args.length < 2) {\n                                        return promise;\n                                    }\n                                    return promise.then(function () {\n                                            args[1].apply(null, []);\n                                        },\n                                        function (err) {\n                                            if (args.length >= 3) {\n                                                args[2].apply(null, [err]);\n                                            }\n                                        });\n                                };\n                            });\n                    }\n\n                    // promise support for createOffer and createAnswer. Available (without\n                    // bugs) since M52: crbug/619289\n                    if (browserDetails.version < 52) {\n                        ['createOffer', 'createAnswer'].forEach(function (method) {\n                            var nativeMethod = window.RTCPeerConnection.prototype[method];\n                            window.RTCPeerConnection.prototype[method] = function () {\n                                var pc = this;\n                                if (arguments.length < 1 || (arguments.length === 1 &&\n                                    typeof arguments[0] === 'object')) {\n                                    var opts = arguments.length === 1 ? arguments[0] : undefined;\n                                    return new Promise(function (resolve, reject) {\n                                        nativeMethod.apply(pc, [resolve, reject, opts]);\n                                    });\n                                }\n                                return nativeMethod.apply(this, arguments);\n                            };\n                        });\n                    }\n\n                    // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n                    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n                        .forEach(function (method) {\n                            var nativeMethod = window.RTCPeerConnection.prototype[method];\n                            window.RTCPeerConnection.prototype[method] = function () {\n                                arguments[0] = new ((method === 'addIceCandidate') ?\n                                    window.RTCIceCandidate :\n                                    window.RTCSessionDescription)(arguments[0]);\n                                return nativeMethod.apply(this, arguments);\n                            };\n                        });\n\n                    // support for addIceCandidate(null or undefined)\n                    var nativeAddIceCandidate =\n                        window.RTCPeerConnection.prototype.addIceCandidate;\n                    window.RTCPeerConnection.prototype.addIceCandidate = function () {\n                        if (!arguments[0]) {\n                            if (arguments[1]) {\n                                arguments[1].apply(null);\n                            }\n                            return Promise.resolve();\n                        }\n                        return nativeAddIceCandidate.apply(this, arguments);\n                    };\n                }\n            };\n\n        }, {\"../utils.js\": 13, \"./getusermedia\": 6}],\n        6: [function (require, module, exports) {\n            /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n            /* eslint-env node */\n            'use strict';\n            var utils = require('../utils.js');\n            var logging = utils.log;\n\n// Expose public methods.\n            module.exports = function (window) {\n                var browserDetails = utils.detectBrowser(window);\n                var navigator = window && window.navigator;\n\n                var constraintsToChrome_ = function (c) {\n                    if (typeof c !== 'object' || c.mandatory || c.optional) {\n                        return c;\n                    }\n                    var cc = {};\n                    Object.keys(c).forEach(function (key) {\n                        if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n                            return;\n                        }\n                        var r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n                        if (r.exact !== undefined && typeof r.exact === 'number') {\n                            r.min = r.max = r.exact;\n                        }\n                        var oldname_ = function (prefix, name) {\n                            if (prefix) {\n                                return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n                            }\n                            return (name === 'deviceId') ? 'sourceId' : name;\n                        };\n                        if (r.ideal !== undefined) {\n                            cc.optional = cc.optional || [];\n                            var oc = {};\n                            if (typeof r.ideal === 'number') {\n                                oc[oldname_('min', key)] = r.ideal;\n                                cc.optional.push(oc);\n                                oc = {};\n                                oc[oldname_('max', key)] = r.ideal;\n                                cc.optional.push(oc);\n                            } else {\n                                oc[oldname_('', key)] = r.ideal;\n                                cc.optional.push(oc);\n                            }\n                        }\n                        if (r.exact !== undefined && typeof r.exact !== 'number') {\n                            cc.mandatory = cc.mandatory || {};\n                            cc.mandatory[oldname_('', key)] = r.exact;\n                        } else {\n                            ['min', 'max'].forEach(function (mix) {\n                                if (r[mix] !== undefined) {\n                                    cc.mandatory = cc.mandatory || {};\n                                    cc.mandatory[oldname_(mix, key)] = r[mix];\n                                }\n                            });\n                        }\n                    });\n                    if (c.advanced) {\n                        cc.optional = (cc.optional || []).concat(c.advanced);\n                    }\n                    return cc;\n                };\n\n                var shimConstraints_ = function (constraints, func) {\n                    if (browserDetails.version >= 61) {\n                        return func(constraints);\n                    }\n                    constraints = JSON.parse(JSON.stringify(constraints));\n                    if (constraints && typeof constraints.audio === 'object') {\n                        var remap = function (obj, a, b) {\n                            if (a in obj && !(b in obj)) {\n                                obj[b] = obj[a];\n                                delete obj[a];\n                            }\n                        };\n                        constraints = JSON.parse(JSON.stringify(constraints));\n                        remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n                        remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n                        constraints.audio = constraintsToChrome_(constraints.audio);\n                    }\n                    if (constraints && typeof constraints.video === 'object') {\n                        // Shim facingMode for mobile & surface pro.\n                        var face = constraints.video.facingMode;\n                        face = face && ((typeof face === 'object') ? face : {ideal: face});\n                        var getSupportedFacingModeLies = browserDetails.version < 66;\n\n                        if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                            face.ideal === 'user' || face.ideal === 'environment')) &&\n                            !(navigator.mediaDevices.getSupportedConstraints &&\n                                navigator.mediaDevices.getSupportedConstraints().facingMode &&\n                                !getSupportedFacingModeLies)) {\n                            delete constraints.video.facingMode;\n                            var matches;\n                            if (face.exact === 'environment' || face.ideal === 'environment') {\n                                matches = ['back', 'rear'];\n                            } else if (face.exact === 'user' || face.ideal === 'user') {\n                                matches = ['front'];\n                            }\n                            if (matches) {\n                                // Look for matches in label, or use last cam for back (typical).\n                                return navigator.mediaDevices.enumerateDevices()\n                                    .then(function (devices) {\n                                        devices = devices.filter(function (d) {\n                                            return d.kind === 'videoinput';\n                                        });\n                                        var dev = devices.find(function (d) {\n                                            return matches.some(function (match) {\n                                                return d.label.toLowerCase().indexOf(match) !== -1;\n                                            });\n                                        });\n                                        if (!dev && devices.length && matches.indexOf('back') !== -1) {\n                                            dev = devices[devices.length - 1]; // more likely the back cam\n                                        }\n                                        if (dev) {\n                                            constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :\n                                                {ideal: dev.deviceId};\n                                        }\n                                        constraints.video = constraintsToChrome_(constraints.video);\n                                        logging('chrome: ' + JSON.stringify(constraints));\n                                        return func(constraints);\n                                    });\n                            }\n                        }\n                        constraints.video = constraintsToChrome_(constraints.video);\n                    }\n                    logging('chrome: ' + JSON.stringify(constraints));\n                    return func(constraints);\n                };\n\n                var shimError_ = function (e) {\n                    return {\n                        name: {\n                            PermissionDeniedError: 'NotAllowedError',\n                            PermissionDismissedError: 'NotAllowedError',\n                            InvalidStateError: 'NotAllowedError',\n                            DevicesNotFoundError: 'NotFoundError',\n                            ConstraintNotSatisfiedError: 'OverconstrainedError',\n                            TrackStartError: 'NotReadableError',\n                            MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n                            MediaDeviceKillSwitchOn: 'NotAllowedError',\n                            TabCaptureError: 'AbortError',\n                            ScreenCaptureError: 'AbortError',\n                            DeviceCaptureError: 'AbortError'\n                        }[e.name] || e.name,\n                        message: e.message,\n                        constraint: e.constraintName,\n                        toString: function () {\n                            return this.name + (this.message && ': ') + this.message;\n                        }\n                    };\n                };\n\n                var getUserMedia_ = function (constraints, onSuccess, onError) {\n                    shimConstraints_(constraints, function (c) {\n                        navigator.webkitGetUserMedia(c, onSuccess, function (e) {\n                            if (onError) {\n                                onError(shimError_(e));\n                            }\n                        });\n                    });\n                };\n\n                navigator.getUserMedia = getUserMedia_;\n\n                // Returns the result of getUserMedia as a Promise.\n                var getUserMediaPromise_ = function (constraints) {\n                    return new Promise(function (resolve, reject) {\n                        navigator.getUserMedia(constraints, resolve, reject);\n                    });\n                };\n\n                if (!navigator.mediaDevices) {\n                    navigator.mediaDevices = {\n                        getUserMedia: getUserMediaPromise_,\n                        enumerateDevices: function () {\n                            return new Promise(function (resolve) {\n                                var kinds = {audio: 'audioinput', video: 'videoinput'};\n                                return window.MediaStreamTrack.getSources(function (devices) {\n                                    resolve(devices.map(function (device) {\n                                        return {\n                                            label: device.label,\n                                            kind: kinds[device.kind],\n                                            deviceId: device.id,\n                                            groupId: ''\n                                        };\n                                    }));\n                                });\n                            });\n                        },\n                        getSupportedConstraints: function () {\n                            return {\n                                deviceId: true, echoCancellation: true, facingMode: true,\n                                frameRate: true, height: true, width: true\n                            };\n                        }\n                    };\n                }\n\n                // A shim for getUserMedia method on the mediaDevices object.\n                // TODO(KaptenJansson) remove once implemented in Chrome stable.\n                if (!navigator.mediaDevices.getUserMedia) {\n                    navigator.mediaDevices.getUserMedia = function (constraints) {\n                        return getUserMediaPromise_(constraints);\n                    };\n                } else {\n                    // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n                    // function which returns a Promise, it does not accept spec-style\n                    // constraints.\n                    var origGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n                    navigator.mediaDevices.getUserMedia = function (cs) {\n                        return shimConstraints_(cs, function (c) {\n                            return origGetUserMedia(c).then(function (stream) {\n                                if (c.audio && !stream.getAudioTracks().length ||\n                                    c.video && !stream.getVideoTracks().length) {\n                                    stream.getTracks().forEach(function (track) {\n                                        track.stop();\n                                    });\n                                    throw new DOMException('', 'NotFoundError');\n                                }\n                                return stream;\n                            }, function (e) {\n                                return Promise.reject(shimError_(e));\n                            });\n                        });\n                    };\n                }\n\n                // Dummy devicechange event methods.\n                // TODO(KaptenJansson) remove once implemented in Chrome stable.\n                if (typeof navigator.mediaDevices.addEventListener === 'undefined') {\n                    navigator.mediaDevices.addEventListener = function () {\n                        logging('Dummy mediaDevices.addEventListener called.');\n                    };\n                }\n                if (typeof navigator.mediaDevices.removeEventListener === 'undefined') {\n                    navigator.mediaDevices.removeEventListener = function () {\n                        logging('Dummy mediaDevices.removeEventListener called.');\n                    };\n                }\n            };\n\n        }, {\"../utils.js\": 13}],\n        7: [function (require, module, exports) {\n            /*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n            /* eslint-env node */\n            'use strict';\n\n            var SDPUtils = require('sdp');\n            var utils = require('./utils');\n\n            module.exports = {\n                shimRTCIceCandidate: function (window) {\n                    // foundation is arbitrarily chosen as an indicator for full support for\n                    // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n                    if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'foundation' in\n                        window.RTCIceCandidate.prototype)) {\n                        return;\n                    }\n\n                    var NativeRTCIceCandidate = window.RTCIceCandidate;\n                    window.RTCIceCandidate = function (args) {\n                        // Remove the a= which shouldn't be part of the candidate string.\n                        if (typeof args === 'object' && args.candidate &&\n                            args.candidate.indexOf('a=') === 0) {\n                            args = JSON.parse(JSON.stringify(args));\n                            args.candidate = args.candidate.substr(2);\n                        }\n\n                        if (args.candidate && args.candidate.length) {\n                            // Augment the native candidate with the parsed fields.\n                            var nativeCandidate = new NativeRTCIceCandidate(args);\n                            var parsedCandidate = SDPUtils.parseCandidate(args.candidate);\n                            var augmentedCandidate = Object.assign(nativeCandidate,\n                                parsedCandidate);\n\n                            // Add a serializer that does not serialize the extra attributes.\n                            augmentedCandidate.toJSON = function () {\n                                return {\n                                    candidate: augmentedCandidate.candidate,\n                                    sdpMid: augmentedCandidate.sdpMid,\n                                    sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n                                    usernameFragment: augmentedCandidate.usernameFragment,\n                                };\n                            };\n                            return augmentedCandidate;\n                        }\n                        return new NativeRTCIceCandidate(args);\n                    };\n                    window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n                    // Hook up the augmented candidate in onicecandidate and\n                    // addEventListener('icecandidate', ...)\n                    utils.wrapPeerConnectionEvent(window, 'icecandidate', function (e) {\n                        if (e.candidate) {\n                            Object.defineProperty(e, 'candidate', {\n                                value: new window.RTCIceCandidate(e.candidate),\n                                writable: 'false'\n                            });\n                        }\n                        return e;\n                    });\n                },\n\n                // shimCreateObjectURL must be called before shimSourceObject to avoid loop.\n\n                shimCreateObjectURL: function (window) {\n                    var URL = window && window.URL;\n\n                    if (!(typeof window === 'object' && window.HTMLMediaElement &&\n                        'srcObject' in window.HTMLMediaElement.prototype &&\n                        URL.createObjectURL && URL.revokeObjectURL)) {\n                        // Only shim CreateObjectURL using srcObject if srcObject exists.\n                        return undefined;\n                    }\n\n                    var nativeCreateObjectURL = URL.createObjectURL.bind(URL);\n                    var nativeRevokeObjectURL = URL.revokeObjectURL.bind(URL);\n                    var streams = new Map(), newId = 0;\n\n                    URL.createObjectURL = function (stream) {\n                        if ('getTracks' in stream) {\n                            var url = 'polyblob:' + (++newId);\n                            streams.set(url, stream);\n                            utils.deprecated('URL.createObjectURL(stream)',\n                                'elem.srcObject = stream');\n                            return url;\n                        }\n                        return nativeCreateObjectURL(stream);\n                    };\n                    URL.revokeObjectURL = function (url) {\n                        nativeRevokeObjectURL(url);\n                        streams.delete(url);\n                    };\n\n                    var dsc = Object.getOwnPropertyDescriptor(window.HTMLMediaElement.prototype,\n                        'src');\n                    Object.defineProperty(window.HTMLMediaElement.prototype, 'src', {\n                        get: function () {\n                            return dsc.get.apply(this);\n                        },\n                        set: function (url) {\n                            this.srcObject = streams.get(url) || null;\n                            return dsc.set.apply(this, [url]);\n                        }\n                    });\n\n                    var nativeSetAttribute = window.HTMLMediaElement.prototype.setAttribute;\n                    window.HTMLMediaElement.prototype.setAttribute = function () {\n                        if (arguments.length === 2 &&\n                            ('' + arguments[0]).toLowerCase() === 'src') {\n                            this.srcObject = streams.get(arguments[1]) || null;\n                        }\n                        return nativeSetAttribute.apply(this, arguments);\n                    };\n                },\n\n                shimMaxMessageSize: function (window) {\n                    if (window.RTCSctpTransport || !window.RTCPeerConnection) {\n                        return;\n                    }\n                    var browserDetails = utils.detectBrowser(window);\n\n                    if (!('sctp' in window.RTCPeerConnection.prototype)) {\n                        Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n                            get: function () {\n                                return typeof this._sctp === 'undefined' ? null : this._sctp;\n                            }\n                        });\n                    }\n\n                    var sctpInDescription = function (description) {\n                        var sections = SDPUtils.splitSections(description.sdp);\n                        sections.shift();\n                        return sections.some(function (mediaSection) {\n                            var mLine = SDPUtils.parseMLine(mediaSection);\n                            return mLine && mLine.kind === 'application'\n                                && mLine.protocol.indexOf('SCTP') !== -1;\n                        });\n                    };\n\n                    var getRemoteFirefoxVersion = function (description) {\n                        // TODO: Is there a better solution for detecting Firefox?\n                        var match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n                        if (match === null || match.length < 2) {\n                            return -1;\n                        }\n                        var version = parseInt(match[1], 10);\n                        // Test for NaN (yes, this is ugly)\n                        return version !== version ? -1 : version;\n                    };\n\n                    var getCanSendMaxMessageSize = function (remoteIsFirefox) {\n                        // Every implementation we know can send at least 64 KiB.\n                        // Note: Although Chrome is technically able to send up to 256 KiB, the\n                        //       data does not reach the other peer reliably.\n                        //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n                        var canSendMaxMessageSize = 65536;\n                        if (browserDetails.browser === 'firefox') {\n                            if (browserDetails.version < 57) {\n                                if (remoteIsFirefox === -1) {\n                                    // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n                                    // fragmentation.\n                                    canSendMaxMessageSize = 16384;\n                                } else {\n                                    // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n                                    // messages. Thus, supporting ~2 GiB when sending.\n                                    canSendMaxMessageSize = 2147483637;\n                                }\n                            } else {\n                                // Currently, all FF >= 57 will reset the remote maximum message size\n                                // to the default value when a data channel is created at a later\n                                // stage. :(\n                                // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n                                canSendMaxMessageSize =\n                                    browserDetails.version === 57 ? 65535 : 65536;\n                            }\n                        }\n                        return canSendMaxMessageSize;\n                    };\n\n                    var getMaxMessageSize = function (description, remoteIsFirefox) {\n                        // Note: 65536 bytes is the default value from the SDP spec. Also,\n                        //       every implementation we know supports receiving 65536 bytes.\n                        var maxMessageSize = 65536;\n\n                        // FF 57 has a slightly incorrect default remote max message size, so\n                        // we need to adjust it here to avoid a failure when sending.\n                        // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n                        if (browserDetails.browser === 'firefox'\n                            && browserDetails.version === 57) {\n                            maxMessageSize = 65535;\n                        }\n\n                        var match = SDPUtils.matchPrefix(description.sdp, 'a=max-message-size:');\n                        if (match.length > 0) {\n                            maxMessageSize = parseInt(match[0].substr(19), 10);\n                        } else if (browserDetails.browser === 'firefox' &&\n                            remoteIsFirefox !== -1) {\n                            // If the maximum message size is not present in the remote SDP and\n                            // both local and remote are Firefox, the remote peer can receive\n                            // ~2 GiB.\n                            maxMessageSize = 2147483637;\n                        }\n                        return maxMessageSize;\n                    };\n\n                    var origSetRemoteDescription =\n                        window.RTCPeerConnection.prototype.setRemoteDescription;\n                    window.RTCPeerConnection.prototype.setRemoteDescription = function () {\n                        var pc = this;\n                        pc._sctp = null;\n\n                        if (sctpInDescription(arguments[0])) {\n                            // Check if the remote is FF.\n                            var isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n                            // Get the maximum message size the local peer is capable of sending\n                            var canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n                            // Get the maximum message size of the remote peer.\n                            var remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n                            // Determine final maximum message size\n                            var maxMessageSize;\n                            if (canSendMMS === 0 && remoteMMS === 0) {\n                                maxMessageSize = Number.POSITIVE_INFINITY;\n                            } else if (canSendMMS === 0 || remoteMMS === 0) {\n                                maxMessageSize = Math.max(canSendMMS, remoteMMS);\n                            } else {\n                                maxMessageSize = Math.min(canSendMMS, remoteMMS);\n                            }\n\n                            // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n                            // attribute.\n                            var sctp = {};\n                            Object.defineProperty(sctp, 'maxMessageSize', {\n                                get: function () {\n                                    return maxMessageSize;\n                                }\n                            });\n                            pc._sctp = sctp;\n                        }\n\n                        return origSetRemoteDescription.apply(pc, arguments);\n                    };\n                },\n\n                shimSendThrowTypeError: function (window) {\n                    if (!(window.RTCPeerConnection &&\n                        'createDataChannel' in window.RTCPeerConnection.prototype)) {\n                        return;\n                    }\n\n                    // Note: Although Firefox >= 57 has a native implementation, the maximum\n                    //       message size can be reset for all data channels at a later stage.\n                    //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n                    var origCreateDataChannel =\n                        window.RTCPeerConnection.prototype.createDataChannel;\n                    window.RTCPeerConnection.prototype.createDataChannel = function () {\n                        var pc = this;\n                        var dataChannel = origCreateDataChannel.apply(pc, arguments);\n                        var origDataChannelSend = dataChannel.send;\n\n                        // Patch 'send' method\n                        dataChannel.send = function () {\n                            var dc = this;\n                            var data = arguments[0];\n                            var length = data.length || data.size || data.byteLength;\n                            if (length > pc.sctp.maxMessageSize) {\n                                throw new DOMException('Message too large (can send a maximum of ' +\n                                    pc.sctp.maxMessageSize + ' bytes)', 'TypeError');\n                            }\n                            return origDataChannelSend.apply(dc, arguments);\n                        };\n\n                        return dataChannel;\n                    };\n                }\n            };\n\n        }, {\"./utils\": 13, \"sdp\": 2}],\n        8: [function (require, module, exports) {\n            /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n            /* eslint-env node */\n            'use strict';\n\n            var utils = require('../utils');\n            var shimRTCPeerConnection = require('rtcpeerconnection-shim');\n\n            module.exports = {\n                shimGetUserMedia: require('./getusermedia'),\n                shimPeerConnection: function (window) {\n                    var browserDetails = utils.detectBrowser(window);\n\n                    if (window.RTCIceGatherer) {\n                        if (!window.RTCIceCandidate) {\n                            window.RTCIceCandidate = function (args) {\n                                return args;\n                            };\n                        }\n                        if (!window.RTCSessionDescription) {\n                            window.RTCSessionDescription = function (args) {\n                                return args;\n                            };\n                        }\n                        // this adds an additional event listener to MediaStrackTrack that signals\n                        // when a tracks enabled property was changed. Workaround for a bug in\n                        // addStream, see below. No longer required in 15025+\n                        if (browserDetails.version < 15025) {\n                            var origMSTEnabled = Object.getOwnPropertyDescriptor(\n                                window.MediaStreamTrack.prototype, 'enabled');\n                            Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {\n                                set: function (value) {\n                                    origMSTEnabled.set.call(this, value);\n                                    var ev = new Event('enabled');\n                                    ev.enabled = value;\n                                    this.dispatchEvent(ev);\n                                }\n                            });\n                        }\n                    }\n\n                    // ORTC defines the DTMF sender a bit different.\n                    // https://github.com/w3c/ortc/issues/714\n                    if (window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n                        Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n                            get: function () {\n                                if (this._dtmf === undefined) {\n                                    if (this.track.kind === 'audio') {\n                                        this._dtmf = new window.RTCDtmfSender(this);\n                                    } else if (this.track.kind === 'video') {\n                                        this._dtmf = null;\n                                    }\n                                }\n                                return this._dtmf;\n                            }\n                        });\n                    }\n                    // Edge currently only implements the RTCDtmfSender, not the\n                    // RTCDTMFSender alias. See http://draft.ortc.org/#rtcdtmfsender2*\n                    if (window.RTCDtmfSender && !window.RTCDTMFSender) {\n                        window.RTCDTMFSender = window.RTCDtmfSender;\n                    }\n\n                    window.RTCPeerConnection =\n                        shimRTCPeerConnection(window, browserDetails.version);\n                },\n                shimReplaceTrack: function (window) {\n                    // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\n                    if (window.RTCRtpSender &&\n                        !('replaceTrack' in window.RTCRtpSender.prototype)) {\n                        window.RTCRtpSender.prototype.replaceTrack =\n                            window.RTCRtpSender.prototype.setTrack;\n                    }\n                }\n            };\n\n        }, {\"../utils\": 13, \"./getusermedia\": 9, \"rtcpeerconnection-shim\": 1}],\n        9: [function (require, module, exports) {\n            /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n            /* eslint-env node */\n            'use strict';\n\n// Expose public methods.\n            module.exports = function (window) {\n                var navigator = window && window.navigator;\n\n                var shimError_ = function (e) {\n                    return {\n                        name: {PermissionDeniedError: 'NotAllowedError'}[e.name] || e.name,\n                        message: e.message,\n                        constraint: e.constraint,\n                        toString: function () {\n                            return this.name;\n                        }\n                    };\n                };\n\n                // getUserMedia error shim.\n                var origGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n                navigator.mediaDevices.getUserMedia = function (c) {\n                    return origGetUserMedia(c).catch(function (e) {\n                        return Promise.reject(shimError_(e));\n                    });\n                };\n            };\n\n        }, {}],\n        10: [function (require, module, exports) {\n            /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n            /* eslint-env node */\n            'use strict';\n\n            var utils = require('../utils');\n\n            module.exports = {\n                shimGetUserMedia: require('./getusermedia'),\n                shimOnTrack: function (window) {\n                    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n                        window.RTCPeerConnection.prototype)) {\n                        Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n                            get: function () {\n                                return this._ontrack;\n                            },\n                            set: function (f) {\n                                if (this._ontrack) {\n                                    this.removeEventListener('track', this._ontrack);\n                                    this.removeEventListener('addstream', this._ontrackpoly);\n                                }\n                                this.addEventListener('track', this._ontrack = f);\n                                this.addEventListener('addstream', this._ontrackpoly = function (e) {\n                                    e.stream.getTracks().forEach(function (track) {\n                                        var event = new Event('track');\n                                        event.track = track;\n                                        event.receiver = {track: track};\n                                        event.transceiver = {receiver: event.receiver};\n                                        event.streams = [e.stream];\n                                        this.dispatchEvent(event);\n                                    }.bind(this));\n                                }.bind(this));\n                            }\n                        });\n                    }\n                    if (typeof window === 'object' && window.RTCTrackEvent &&\n                        ('receiver' in window.RTCTrackEvent.prototype) &&\n                        !('transceiver' in window.RTCTrackEvent.prototype)) {\n                        Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n                            get: function () {\n                                return {receiver: this.receiver};\n                            }\n                        });\n                    }\n                },\n\n                shimSourceObject: function (window) {\n                    // Firefox has supported mozSrcObject since FF22, unprefixed in 42.\n                    if (typeof window === 'object') {\n                        if (window.HTMLMediaElement &&\n                            !('srcObject' in window.HTMLMediaElement.prototype)) {\n                            // Shim the srcObject property, once, when HTMLMediaElement is found.\n                            Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n                                get: function () {\n                                    return this.mozSrcObject;\n                                },\n                                set: function (stream) {\n                                    this.mozSrcObject = stream;\n                                }\n                            });\n                        }\n                    }\n                },\n\n                shimPeerConnection: function (window) {\n                    var browserDetails = utils.detectBrowser(window);\n\n                    if (typeof window !== 'object' || !(window.RTCPeerConnection ||\n                        window.mozRTCPeerConnection)) {\n                        return; // probably media.peerconnection.enabled=false in about:config\n                    }\n                    // The RTCPeerConnection object.\n                    if (!window.RTCPeerConnection) {\n                        window.RTCPeerConnection = function (pcConfig, pcConstraints) {\n                            if (browserDetails.version < 38) {\n                                // .urls is not supported in FF < 38.\n                                // create RTCIceServers with a single url.\n                                if (pcConfig && pcConfig.iceServers) {\n                                    var newIceServers = [];\n                                    for (var i = 0; i < pcConfig.iceServers.length; i++) {\n                                        var server = pcConfig.iceServers[i];\n                                        if (server.hasOwnProperty('urls')) {\n                                            for (var j = 0; j < server.urls.length; j++) {\n                                                var newServer = {\n                                                    url: server.urls[j]\n                                                };\n                                                if (server.urls[j].indexOf('turn') === 0) {\n                                                    newServer.username = server.username;\n                                                    newServer.credential = server.credential;\n                                                }\n                                                newIceServers.push(newServer);\n                                            }\n                                        } else {\n                                            newIceServers.push(pcConfig.iceServers[i]);\n                                        }\n                                    }\n                                    pcConfig.iceServers = newIceServers;\n                                }\n                            }\n                            return new window.mozRTCPeerConnection(pcConfig, pcConstraints);\n                        };\n                        window.RTCPeerConnection.prototype =\n                            window.mozRTCPeerConnection.prototype;\n\n                        // wrap static methods. Currently just generateCertificate.\n                        if (window.mozRTCPeerConnection.generateCertificate) {\n                            Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n                                get: function () {\n                                    return window.mozRTCPeerConnection.generateCertificate;\n                                }\n                            });\n                        }\n\n                        window.RTCSessionDescription = window.mozRTCSessionDescription;\n                        window.RTCIceCandidate = window.mozRTCIceCandidate;\n                    }\n\n                    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n                    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n                        .forEach(function (method) {\n                            var nativeMethod = window.RTCPeerConnection.prototype[method];\n                            window.RTCPeerConnection.prototype[method] = function () {\n                                arguments[0] = new ((method === 'addIceCandidate') ?\n                                    window.RTCIceCandidate :\n                                    window.RTCSessionDescription)(arguments[0]);\n                                return nativeMethod.apply(this, arguments);\n                            };\n                        });\n\n                    // support for addIceCandidate(null or undefined)\n                    var nativeAddIceCandidate =\n                        window.RTCPeerConnection.prototype.addIceCandidate;\n                    window.RTCPeerConnection.prototype.addIceCandidate = function () {\n                        if (!arguments[0]) {\n                            if (arguments[1]) {\n                                arguments[1].apply(null);\n                            }\n                            return Promise.resolve();\n                        }\n                        return nativeAddIceCandidate.apply(this, arguments);\n                    };\n\n                    // shim getStats with maplike support\n                    var makeMapStats = function (stats) {\n                        var map = new Map();\n                        Object.keys(stats).forEach(function (key) {\n                            map.set(key, stats[key]);\n                            map[key] = stats[key];\n                        });\n                        return map;\n                    };\n\n                    var modernStatsTypes = {\n                        inboundrtp: 'inbound-rtp',\n                        outboundrtp: 'outbound-rtp',\n                        candidatepair: 'candidate-pair',\n                        localcandidate: 'local-candidate',\n                        remotecandidate: 'remote-candidate'\n                    };\n\n                    var nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n                    window.RTCPeerConnection.prototype.getStats = function (\n                        selector,\n                        onSucc,\n                        onErr\n                    ) {\n                        return nativeGetStats.apply(this, [selector || null])\n                            .then(function (stats) {\n                                if (browserDetails.version < 48) {\n                                    stats = makeMapStats(stats);\n                                }\n                                if (browserDetails.version < 53 && !onSucc) {\n                                    // Shim only promise getStats with spec-hyphens in type names\n                                    // Leave callback version alone; misc old uses of forEach before Map\n                                    try {\n                                        stats.forEach(function (stat) {\n                                            stat.type = modernStatsTypes[stat.type] || stat.type;\n                                        });\n                                    } catch (e) {\n                                        if (e.name !== 'TypeError') {\n                                            throw e;\n                                        }\n                                        // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n                                        stats.forEach(function (stat, i) {\n                                            stats.set(i, Object.assign({}, stat, {\n                                                type: modernStatsTypes[stat.type] || stat.type\n                                            }));\n                                        });\n                                    }\n                                }\n                                return stats;\n                            })\n                            .then(onSucc, onErr);\n                    };\n                },\n\n                shimRemoveStream: function (window) {\n                    if (!window.RTCPeerConnection ||\n                        'removeStream' in window.RTCPeerConnection.prototype) {\n                        return;\n                    }\n                    window.RTCPeerConnection.prototype.removeStream = function (stream) {\n                        var pc = this;\n                        utils.deprecated('removeStream', 'removeTrack');\n                        this.getSenders().forEach(function (sender) {\n                            if (sender.track && stream.getTracks().indexOf(sender.track) !== -1) {\n                                pc.removeTrack(sender);\n                            }\n                        });\n                    };\n                }\n            };\n\n        }, {\"../utils\": 13, \"./getusermedia\": 11}],\n        11: [function (require, module, exports) {\n            /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n            /* eslint-env node */\n            'use strict';\n\n            var utils = require('../utils');\n            var logging = utils.log;\n\n// Expose public methods.\n            module.exports = function (window) {\n                var browserDetails = utils.detectBrowser(window);\n                var navigator = window && window.navigator;\n                var MediaStreamTrack = window && window.MediaStreamTrack;\n\n                var shimError_ = function (e) {\n                    return {\n                        name: {\n                            InternalError: 'NotReadableError',\n                            NotSupportedError: 'TypeError',\n                            PermissionDeniedError: 'NotAllowedError',\n                            SecurityError: 'NotAllowedError'\n                        }[e.name] || e.name,\n                        message: {\n                            'The operation is insecure.': 'The request is not allowed by the ' +\n                            'user agent or the platform in the current context.'\n                        }[e.message] || e.message,\n                        constraint: e.constraint,\n                        toString: function () {\n                            return this.name + (this.message && ': ') + this.message;\n                        }\n                    };\n                };\n\n                // getUserMedia constraints shim.\n                var getUserMedia_ = function (constraints, onSuccess, onError) {\n                    var constraintsToFF37_ = function (c) {\n                        if (typeof c !== 'object' || c.require) {\n                            return c;\n                        }\n                        var require = [];\n                        Object.keys(c).forEach(function (key) {\n                            if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n                                return;\n                            }\n                            var r = c[key] = (typeof c[key] === 'object') ?\n                                c[key] : {ideal: c[key]};\n                            if (r.min !== undefined ||\n                                r.max !== undefined || r.exact !== undefined) {\n                                require.push(key);\n                            }\n                            if (r.exact !== undefined) {\n                                if (typeof r.exact === 'number') {\n                                    r.min = r.max = r.exact;\n                                } else {\n                                    c[key] = r.exact;\n                                }\n                                delete r.exact;\n                            }\n                            if (r.ideal !== undefined) {\n                                c.advanced = c.advanced || [];\n                                var oc = {};\n                                if (typeof r.ideal === 'number') {\n                                    oc[key] = {min: r.ideal, max: r.ideal};\n                                } else {\n                                    oc[key] = r.ideal;\n                                }\n                                c.advanced.push(oc);\n                                delete r.ideal;\n                                if (!Object.keys(r).length) {\n                                    delete c[key];\n                                }\n                            }\n                        });\n                        if (require.length) {\n                            c.require = require;\n                        }\n                        return c;\n                    };\n                    constraints = JSON.parse(JSON.stringify(constraints));\n                    if (browserDetails.version < 38) {\n                        logging('spec: ' + JSON.stringify(constraints));\n                        if (constraints.audio) {\n                            constraints.audio = constraintsToFF37_(constraints.audio);\n                        }\n                        if (constraints.video) {\n                            constraints.video = constraintsToFF37_(constraints.video);\n                        }\n                        logging('ff37: ' + JSON.stringify(constraints));\n                    }\n                    return navigator.mozGetUserMedia(constraints, onSuccess, function (e) {\n                        onError(shimError_(e));\n                    });\n                };\n\n                // Returns the result of getUserMedia as a Promise.\n                var getUserMediaPromise_ = function (constraints) {\n                    return new Promise(function (resolve, reject) {\n                        getUserMedia_(constraints, resolve, reject);\n                    });\n                };\n\n                // Shim for mediaDevices on older versions.\n                if (!navigator.mediaDevices) {\n                    navigator.mediaDevices = {\n                        getUserMedia: getUserMediaPromise_,\n                        addEventListener: function () {\n                        },\n                        removeEventListener: function () {\n                        }\n                    };\n                }\n                navigator.mediaDevices.enumerateDevices =\n                    navigator.mediaDevices.enumerateDevices || function () {\n                        return new Promise(function (resolve) {\n                            var infos = [\n                                {kind: 'audioinput', deviceId: 'default', label: '', groupId: ''},\n                                {kind: 'videoinput', deviceId: 'default', label: '', groupId: ''}\n                            ];\n                            resolve(infos);\n                        });\n                    };\n\n                if (browserDetails.version < 41) {\n                    // Work around http://bugzil.la/1169665\n                    var orgEnumerateDevices =\n                        navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);\n                    navigator.mediaDevices.enumerateDevices = function () {\n                        return orgEnumerateDevices().then(undefined, function (e) {\n                            if (e.name === 'NotFoundError') {\n                                return [];\n                            }\n                            throw e;\n                        });\n                    };\n                }\n                if (browserDetails.version < 49) {\n                    var origGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n                    navigator.mediaDevices.getUserMedia = function (c) {\n                        return origGetUserMedia(c).then(function (stream) {\n                            // Work around https://bugzil.la/802326\n                            if (c.audio && !stream.getAudioTracks().length ||\n                                c.video && !stream.getVideoTracks().length) {\n                                stream.getTracks().forEach(function (track) {\n                                    track.stop();\n                                });\n                                throw new DOMException('The object can not be found here.',\n                                    'NotFoundError');\n                            }\n                            return stream;\n                        }, function (e) {\n                            return Promise.reject(shimError_(e));\n                        });\n                    };\n                }\n                if (!(browserDetails.version > 55 &&\n                    'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n                    var remap = function (obj, a, b) {\n                        if (a in obj && !(b in obj)) {\n                            obj[b] = obj[a];\n                            delete obj[a];\n                        }\n                    };\n\n                    var nativeGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n                    navigator.mediaDevices.getUserMedia = function (c) {\n                        if (typeof c === 'object' && typeof c.audio === 'object') {\n                            c = JSON.parse(JSON.stringify(c));\n                            remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n                            remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n                        }\n                        return nativeGetUserMedia(c);\n                    };\n\n                    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n                        var nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n                        MediaStreamTrack.prototype.getSettings = function () {\n                            var obj = nativeGetSettings.apply(this, arguments);\n                            remap(obj, 'mozAutoGainControl', 'autoGainControl');\n                            remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n                            return obj;\n                        };\n                    }\n\n                    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n                        var nativeApplyConstraints = MediaStreamTrack.prototype.applyConstraints;\n                        MediaStreamTrack.prototype.applyConstraints = function (c) {\n                            if (this.kind === 'audio' && typeof c === 'object') {\n                                c = JSON.parse(JSON.stringify(c));\n                                remap(c, 'autoGainControl', 'mozAutoGainControl');\n                                remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n                            }\n                            return nativeApplyConstraints.apply(this, [c]);\n                        };\n                    }\n                }\n                navigator.getUserMedia = function (constraints, onSuccess, onError) {\n                    if (browserDetails.version < 44) {\n                        return getUserMedia_(constraints, onSuccess, onError);\n                    }\n                    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n                    utils.deprecated('navigator.getUserMedia',\n                        'navigator.mediaDevices.getUserMedia');\n                    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n                };\n            };\n\n        }, {\"../utils\": 13}],\n        12: [function (require, module, exports) {\n            /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n            'use strict';\n            var utils = require('../utils');\n\n            module.exports = {\n                shimLocalStreamsAPI: function (window) {\n                    if (typeof window !== 'object' || !window.RTCPeerConnection) {\n                        return;\n                    }\n                    if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n                        window.RTCPeerConnection.prototype.getLocalStreams = function () {\n                            if (!this._localStreams) {\n                                this._localStreams = [];\n                            }\n                            return this._localStreams;\n                        };\n                    }\n                    if (!('getStreamById' in window.RTCPeerConnection.prototype)) {\n                        window.RTCPeerConnection.prototype.getStreamById = function (id) {\n                            var result = null;\n                            if (this._localStreams) {\n                                this._localStreams.forEach(function (stream) {\n                                    if (stream.id === id) {\n                                        result = stream;\n                                    }\n                                });\n                            }\n                            if (this._remoteStreams) {\n                                this._remoteStreams.forEach(function (stream) {\n                                    if (stream.id === id) {\n                                        result = stream;\n                                    }\n                                });\n                            }\n                            return result;\n                        };\n                    }\n                    if (!('addStream' in window.RTCPeerConnection.prototype)) {\n                        var _addTrack = window.RTCPeerConnection.prototype.addTrack;\n                        window.RTCPeerConnection.prototype.addStream = function (stream) {\n                            if (!this._localStreams) {\n                                this._localStreams = [];\n                            }\n                            if (this._localStreams.indexOf(stream) === -1) {\n                                this._localStreams.push(stream);\n                            }\n                            var pc = this;\n                            stream.getTracks().forEach(function (track) {\n                                _addTrack.call(pc, track, stream);\n                            });\n                        };\n\n                        window.RTCPeerConnection.prototype.addTrack = function (track, stream) {\n                            if (stream) {\n                                if (!this._localStreams) {\n                                    this._localStreams = [stream];\n                                } else if (this._localStreams.indexOf(stream) === -1) {\n                                    this._localStreams.push(stream);\n                                }\n                            }\n                            return _addTrack.call(this, track, stream);\n                        };\n                    }\n                    if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n                        window.RTCPeerConnection.prototype.removeStream = function (stream) {\n                            if (!this._localStreams) {\n                                this._localStreams = [];\n                            }\n                            var index = this._localStreams.indexOf(stream);\n                            if (index === -1) {\n                                return;\n                            }\n                            this._localStreams.splice(index, 1);\n                            var pc = this;\n                            var tracks = stream.getTracks();\n                            this.getSenders().forEach(function (sender) {\n                                if (tracks.indexOf(sender.track) !== -1) {\n                                    pc.removeTrack(sender);\n                                }\n                            });\n                        };\n                    }\n                },\n                shimRemoteStreamsAPI: function (window) {\n                    if (typeof window !== 'object' || !window.RTCPeerConnection) {\n                        return;\n                    }\n                    if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n                        window.RTCPeerConnection.prototype.getRemoteStreams = function () {\n                            return this._remoteStreams ? this._remoteStreams : [];\n                        };\n                    }\n                    if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n                        Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n                            get: function () {\n                                return this._onaddstream;\n                            },\n                            set: function (f) {\n                                var pc = this;\n                                if (this._onaddstream) {\n                                    this.removeEventListener('addstream', this._onaddstream);\n                                    this.removeEventListener('track', this._onaddstreampoly);\n                                }\n                                this.addEventListener('addstream', this._onaddstream = f);\n                                this.addEventListener('track', this._onaddstreampoly = function (e) {\n                                    e.streams.forEach(function (stream) {\n                                        if (!pc._remoteStreams) {\n                                            pc._remoteStreams = [];\n                                        }\n                                        if (pc._remoteStreams.indexOf(stream) >= 0) {\n                                            return;\n                                        }\n                                        pc._remoteStreams.push(stream);\n                                        var event = new Event('addstream');\n                                        event.stream = stream;\n                                        pc.dispatchEvent(event);\n                                    });\n                                });\n                            }\n                        });\n                    }\n                },\n                shimCallbacksAPI: function (window) {\n                    if (typeof window !== 'object' || !window.RTCPeerConnection) {\n                        return;\n                    }\n                    var prototype = window.RTCPeerConnection.prototype;\n                    var createOffer = prototype.createOffer;\n                    var createAnswer = prototype.createAnswer;\n                    var setLocalDescription = prototype.setLocalDescription;\n                    var setRemoteDescription = prototype.setRemoteDescription;\n                    var addIceCandidate = prototype.addIceCandidate;\n\n                    prototype.createOffer = function (successCallback, failureCallback) {\n                        var options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n                        var promise = createOffer.apply(this, [options]);\n                        if (!failureCallback) {\n                            return promise;\n                        }\n                        promise.then(successCallback, failureCallback);\n                        return Promise.resolve();\n                    };\n\n                    prototype.createAnswer = function (successCallback, failureCallback) {\n                        var options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n                        var promise = createAnswer.apply(this, [options]);\n                        if (!failureCallback) {\n                            return promise;\n                        }\n                        promise.then(successCallback, failureCallback);\n                        return Promise.resolve();\n                    };\n\n                    var withCallback = function (description, successCallback, failureCallback) {\n                        var promise = setLocalDescription.apply(this, [description]);\n                        if (!failureCallback) {\n                            return promise;\n                        }\n                        promise.then(successCallback, failureCallback);\n                        return Promise.resolve();\n                    };\n                    prototype.setLocalDescription = withCallback;\n\n                    withCallback = function (description, successCallback, failureCallback) {\n                        var promise = setRemoteDescription.apply(this, [description]);\n                        if (!failureCallback) {\n                            return promise;\n                        }\n                        promise.then(successCallback, failureCallback);\n                        return Promise.resolve();\n                    };\n                    prototype.setRemoteDescription = withCallback;\n\n                    withCallback = function (candidate, successCallback, failureCallback) {\n                        var promise = addIceCandidate.apply(this, [candidate]);\n                        if (!failureCallback) {\n                            return promise;\n                        }\n                        promise.then(successCallback, failureCallback);\n                        return Promise.resolve();\n                    };\n                    prototype.addIceCandidate = withCallback;\n                },\n                shimGetUserMedia: function (window) {\n                    var navigator = window && window.navigator;\n\n                    if (!navigator.getUserMedia) {\n                        if (navigator.webkitGetUserMedia) {\n                            navigator.getUserMedia = navigator.webkitGetUserMedia.bind(navigator);\n                        } else if (navigator.mediaDevices &&\n                            navigator.mediaDevices.getUserMedia) {\n                            navigator.getUserMedia = function (constraints, cb, errcb) {\n                                navigator.mediaDevices.getUserMedia(constraints)\n                                    .then(cb, errcb);\n                            }.bind(navigator);\n                        }\n                    }\n                },\n                shimRTCIceServerUrls: function (window) {\n                    // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n                    var OrigPeerConnection = window.RTCPeerConnection;\n                    window.RTCPeerConnection = function (pcConfig, pcConstraints) {\n                        if (pcConfig && pcConfig.iceServers) {\n                            var newIceServers = [];\n                            for (var i = 0; i < pcConfig.iceServers.length; i++) {\n                                var server = pcConfig.iceServers[i];\n                                if (!server.hasOwnProperty('urls') &&\n                                    server.hasOwnProperty('url')) {\n                                    utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n                                    server = JSON.parse(JSON.stringify(server));\n                                    server.urls = server.url;\n                                    delete server.url;\n                                    newIceServers.push(server);\n                                } else {\n                                    newIceServers.push(pcConfig.iceServers[i]);\n                                }\n                            }\n                            pcConfig.iceServers = newIceServers;\n                        }\n                        return new OrigPeerConnection(pcConfig, pcConstraints);\n                    };\n                    window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n                    // wrap static methods. Currently just generateCertificate.\n                    if ('generateCertificate' in window.RTCPeerConnection) {\n                        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n                            get: function () {\n                                return OrigPeerConnection.generateCertificate;\n                            }\n                        });\n                    }\n                },\n                shimTrackEventTransceiver: function (window) {\n                    // Add event.transceiver member over deprecated event.receiver\n                    if (typeof window === 'object' && window.RTCPeerConnection &&\n                        ('receiver' in window.RTCTrackEvent.prototype) &&\n                        // can't check 'transceiver' in window.RTCTrackEvent.prototype, as it is\n                        // defined for some reason even when window.RTCTransceiver is not.\n                        !window.RTCTransceiver) {\n                        Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n                            get: function () {\n                                return {receiver: this.receiver};\n                            }\n                        });\n                    }\n                },\n\n                shimCreateOfferLegacy: function (window) {\n                    var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n                    window.RTCPeerConnection.prototype.createOffer = function (offerOptions) {\n                        var pc = this;\n                        if (offerOptions) {\n                            if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n                                // support bit values\n                                offerOptions.offerToReceiveAudio = !!offerOptions.offerToReceiveAudio;\n                            }\n                            var audioTransceiver = pc.getTransceivers().find(function (transceiver) {\n                                return transceiver.sender.track &&\n                                    transceiver.sender.track.kind === 'audio';\n                            });\n                            if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n                                if (audioTransceiver.direction === 'sendrecv') {\n                                    if (audioTransceiver.setDirection) {\n                                        audioTransceiver.setDirection('sendonly');\n                                    } else {\n                                        audioTransceiver.direction = 'sendonly';\n                                    }\n                                } else if (audioTransceiver.direction === 'recvonly') {\n                                    if (audioTransceiver.setDirection) {\n                                        audioTransceiver.setDirection('inactive');\n                                    } else {\n                                        audioTransceiver.direction = 'inactive';\n                                    }\n                                }\n                            } else if (offerOptions.offerToReceiveAudio === true &&\n                                !audioTransceiver) {\n                                pc.addTransceiver('audio');\n                            }\n\n\n                            if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n                                // support bit values\n                                offerOptions.offerToReceiveVideo = !!offerOptions.offerToReceiveVideo;\n                            }\n                            var videoTransceiver = pc.getTransceivers().find(function (transceiver) {\n                                return transceiver.sender.track &&\n                                    transceiver.sender.track.kind === 'video';\n                            });\n                            if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n                                if (videoTransceiver.direction === 'sendrecv') {\n                                    videoTransceiver.setDirection('sendonly');\n                                } else if (videoTransceiver.direction === 'recvonly') {\n                                    videoTransceiver.setDirection('inactive');\n                                }\n                            } else if (offerOptions.offerToReceiveVideo === true &&\n                                !videoTransceiver) {\n                                pc.addTransceiver('video');\n                            }\n                        }\n                        return origCreateOffer.apply(pc, arguments);\n                    };\n                }\n            };\n\n        }, {\"../utils\": 13}],\n        13: [function (require, module, exports) {\n            /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n            /* eslint-env node */\n            'use strict';\n\n            var logDisabled_ = true;\n            var deprecationWarnings_ = true;\n\n            /**\n             * Extract browser version out of the provided user agent string.\n             *\n             * @param {!string} uastring userAgent string.\n             * @param {!string} expr Regular expression used as match criteria.\n             * @param {!number} pos position in the version string to be returned.\n             * @return {!number} browser version.\n             */\n            function extractVersion(uastring, expr, pos) {\n                var match = uastring.match(expr);\n                return match && match.length >= pos && parseInt(match[pos], 10);\n            }\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object.\n            function wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n                if (!window.RTCPeerConnection) {\n                    return;\n                }\n                var proto = window.RTCPeerConnection.prototype;\n                var nativeAddEventListener = proto.addEventListener;\n                proto.addEventListener = function (nativeEventName, cb) {\n                    if (nativeEventName !== eventNameToWrap) {\n                        return nativeAddEventListener.apply(this, arguments);\n                    }\n                    var wrappedCallback = function (e) {\n                        cb(wrapper(e));\n                    };\n                    this._eventMap = this._eventMap || {};\n                    this._eventMap[cb] = wrappedCallback;\n                    return nativeAddEventListener.apply(this, [nativeEventName,\n                        wrappedCallback]);\n                };\n\n                var nativeRemoveEventListener = proto.removeEventListener;\n                proto.removeEventListener = function (nativeEventName, cb) {\n                    if (nativeEventName !== eventNameToWrap || !this._eventMap\n                        || !this._eventMap[cb]) {\n                        return nativeRemoveEventListener.apply(this, arguments);\n                    }\n                    var unwrappedCb = this._eventMap[cb];\n                    delete this._eventMap[cb];\n                    return nativeRemoveEventListener.apply(this, [nativeEventName,\n                        unwrappedCb]);\n                };\n\n                Object.defineProperty(proto, 'on' + eventNameToWrap, {\n                    get: function () {\n                        return this['_on' + eventNameToWrap];\n                    },\n                    set: function (cb) {\n                        if (this['_on' + eventNameToWrap]) {\n                            this.removeEventListener(eventNameToWrap,\n                                this['_on' + eventNameToWrap]);\n                            delete this['_on' + eventNameToWrap];\n                        }\n                        if (cb) {\n                            this.addEventListener(eventNameToWrap,\n                                this['_on' + eventNameToWrap] = cb);\n                        }\n                    }\n                });\n            }\n\n// Utility methods.\n            module.exports = {\n                extractVersion: extractVersion,\n                wrapPeerConnectionEvent: wrapPeerConnectionEvent,\n                disableLog: function (bool) {\n                    if (typeof bool !== 'boolean') {\n                        return new Error('Argument type: ' + typeof bool +\n                            '. Please use a boolean.');\n                    }\n                    logDisabled_ = bool;\n                    return (bool) ? 'adapter.js logging disabled' :\n                        'adapter.js logging enabled';\n                },\n\n                /**\n                 * Disable or enable deprecation warnings\n                 * @param {!boolean} bool set to true to disable warnings.\n                 */\n                disableWarnings: function (bool) {\n                    if (typeof bool !== 'boolean') {\n                        return new Error('Argument type: ' + typeof bool +\n                            '. Please use a boolean.');\n                    }\n                    deprecationWarnings_ = !bool;\n                    return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n                },\n\n                log: function () {\n                    if (typeof window === 'object') {\n                        if (logDisabled_) {\n                            return;\n                        }\n                        if (typeof console !== 'undefined' && typeof console.log === 'function') {\n                            console.log.apply(console, arguments);\n                        }\n                    }\n                },\n\n                /**\n                 * Shows a deprecation warning suggesting the modern and spec-compatible API.\n                 */\n                deprecated: function (oldMethod, newMethod) {\n                    if (!deprecationWarnings_) {\n                        return;\n                    }\n                    console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n                        ' instead.');\n                },\n\n                /**\n                 * Browser detector.\n                 *\n                 * @return {object} result containing browser and version\n                 *     properties.\n                 */\n                detectBrowser: function (window) {\n                    var navigator = window && window.navigator;\n\n                    // Returned result object.\n                    var result = {};\n                    result.browser = null;\n                    result.version = null;\n\n                    // Fail early if it's not a browser\n                    if (typeof window === 'undefined' || !window.navigator) {\n                        result.browser = 'Not a browser.';\n                        return result;\n                    }\n\n                    if (navigator.mozGetUserMedia) { // Firefox.\n                        result.browser = 'firefox';\n                        result.version = extractVersion(navigator.userAgent,\n                            /Firefox\\/(\\d+)\\./, 1);\n                    } else if (navigator.webkitGetUserMedia) {\n                        // Chrome, Chromium, Webview, Opera.\n                        // Version matches Chrome/WebRTC version.\n                        result.browser = 'chrome';\n                        result.version = extractVersion(navigator.userAgent,\n                            /Chrom(e|ium)\\/(\\d+)\\./, 2);\n                    } else if (navigator.mediaDevices &&\n                        navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) { // Edge.\n                        result.browser = 'edge';\n                        result.version = extractVersion(navigator.userAgent,\n                            /Edge\\/(\\d+).(\\d+)$/, 2);\n                    } else if (window.RTCPeerConnection &&\n                        navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) { // Safari.\n                        result.browser = 'safari';\n                        result.version = extractVersion(navigator.userAgent,\n                            /AppleWebKit\\/(\\d+)\\./, 1);\n                    } else { // Default fallthrough: not supported.\n                        result.browser = 'Not a supported browser.';\n                        return result;\n                    }\n\n                    return result;\n                }\n            };\n\n        }, {}]\n    }, {}, [3])(3)\n});\n","import {ZegoDataReport} from \"../common/zego.datareport\";\nimport {ENUM_RETRY_STATE, ENUM_PUBLISH_STATE, VideoInfo} from \"../common/zego.entity\";\nimport {ZegoSignal} from \"../common/zego.signal\";\nimport {ENUM_PUBLISH_STATE_UPDATE, getSeq, publishErrorList} from \"../common/zego.extern\";\nimport * as adapter from \"./adapter.js\";\nimport {Logger} from \"../common/zego.logger\";\n\nexport class ZegoPublish {\n        \n        logger: Logger;\n        signal: ZegoSignal;\n        state = ENUM_PUBLISH_STATE.stop;\n        \n        sessionId = 0;\n        \n        // localVideo = null;\n        // localStream = null;\n        \n        waitingICETimeInterval = 5000;\n        waitingAnswerTimeInterval = 5000;\n        candidateInfo = [];\n        \n        waitingICETimer = null;\n        waitingAnswerTimer = null;\n        \n        qualityTimer = null;\n        qualityTimeInterval: number;\n        publishQualityList = [];\n        maxQualityListCount = 10;\n        lastPublishStats:any = {};\n        \n        reportSeq = getSeq ();\n        dataReport: ZegoDataReport;\n        \n        \n        //quality signal\n        qualityUpload = false;\n        qualityUploadInterval = 30 * 1000;\n        qualityUploadLastTime = 0;\n        qualitySeq = 0;\n        \n        //retry\n        maxRetryCount = 3;\n        currentRetryCount = 0;\n        retryState = ENUM_RETRY_STATE.didNotStart;\n        waitingServerTimerInterval = 3 * 1000;\n        waitingServerTimer = null;\n        \n        videoInfo: VideoInfo = {\n                width: 0,\n                height: 0,\n                frameRate: 0,\n                bitRate: 0\n        };\n        \n        \n        offerSeq = 0;\n        \n        \n        streamId: string;\n        localStream: MediaStream;\n        \n        sessionSeq: number;\n        \n        peerConnection: RTCPeerConnection | any;\n        qualityCount = 0;\n        closeSessionSignal = false;\n        \n        \n        constructor (log: Logger, signal: ZegoSignal, dataReport: ZegoDataReport, qualityTimeInterval: number) {\n                this.logger = log;\n                this.signal = signal;\n                this.dataReport = dataReport;\n                this.qualityTimeInterval = qualityTimeInterval;\n                dataReport.newReport (this.reportSeq);\n        }\n        \n        private publishStateUpdateError (errorCode: { code: string, msg: string }) {\n                if (this.sessionId != 0 && this.shouldSendCloseSession (errorCode)) {\n                        //send close session request\n                        this.signal.sendCloseSession (getSeq (), this.sessionId, 1);\n                        this.closeSessionSignal = true;\n                }\n                \n                this.state = ENUM_PUBLISH_STATE.stop;\n                this.onPublishStateUpdate (ENUM_PUBLISH_STATE_UPDATE.error, this.streamId, errorCode);\n                \n                this.resetPublish ();\n        }\n        \n        //////////////////////////////////////////////////////////////////////////////////////////////\n        // reset\n        /*\n         *    \"zp.rp.0\": \"ZegoPublish.resetPublish\"\n         */\n        private resetPublish () {\n                this.logger.info (\"zp.rp.0 call\");\n                \n                this.streamId = null;\n                this.state = ENUM_PUBLISH_STATE.stop;\n                \n                if (this.peerConnection != undefined || this.peerConnection != null) {\n                        this.peerConnection.close ();\n                        this.peerConnection = null;\n                }\n                \n                if (this.waitingAnswerTimer != null) {\n                        clearTimeout (this.waitingAnswerTimer);\n                        this.waitingAnswerTimer = null;\n                }\n                \n                if (this.waitingICETimer != null) {\n                        clearTimeout (this.waitingICETimer);\n                        this.waitingICETimer = null;\n                }\n                \n                this.clearPublishQualityTimer ();\n                \n                if (this.signal) {\n                        this.signal.unregisterPushCallback (\"CandidateInfoPush\", this.sessionId);\n                        this.signal.unregisterPushCallback (\"MediaDescPush\", this.sessionId);\n                        this.signal.unregisterPushCallback (\"CloseSessionPush\", this.sessionId);\n                        // this.signal.unregisterPushCallback('WebSocketDisconnect', this.sessionId);\n                }\n                \n                // this.sessionId = 0;\n                this.sessionSeq = 0;\n                this.offerSeq = 0;\n                this.candidateInfo = [];\n                \n                this.publishQualityList = [];\n                \n                this.qualityUploadLastTime = 0;\n                \n                this.currentRetryCount = 0;\n                this.retryState = ENUM_RETRY_STATE.didNotStart;\n                \n                this.clearTryPublishTimer ();\n        }\n        \n        private clearTryPublishTimer () {\n                if (this.waitingServerTimer != null) {\n                        clearTimeout (this.waitingServerTimer);\n                        this.waitingServerTimer = null;\n                }\n        }\n        \n        \n        private clearPublishQualityTimer () {\n                if (this.qualityTimer != null) {\n                        clearInterval (this.qualityTimer);\n                        this.qualityTimer = null;\n                }\n                \n                this.lastPublishStats = {};\n                this.qualityCount = 0;\n                \n                //this.dataReport.uploadReport(this.qualitySeq, \"RTCPublishQuality\");\n        }\n        \n        private shouldSendCloseSession (errorCode: { code: string, msg: string }) {\n                if (this.state != ENUM_PUBLISH_STATE.stop && this.state != ENUM_PUBLISH_STATE.waitingSessionRsp) {\n                        return true;\n                }\n                return false;\n        }\n        \n        \n        /*\n       *    \"zp.sp.0\": \"ZegoPublish.startPublish\"\n       */\n        startPublish (streamId: string, localStream: MediaStream, videoInfo: VideoInfo) {\n                this.logger.debug (\"zp.sp.0 called\");\n                \n                if (!streamId) {\n                        this.logger.error (\"zp.sp.0 streamId is null\");\n                        return;\n                }\n                \n                this.streamId = streamId;\n                this.localStream = localStream;\n                if (videoInfo) {\n                        this.videoInfo = videoInfo;\n                }\n                \n                //send to server\n                this.sessionSeq = getSeq ();\n                this.dataReport.eventStart (this.reportSeq, \"CreateSession\");\n                this.signal.createSession (this.sessionSeq, 0,0 ,streamId, (seq, sessionId, data) => {\n                        this.dataReport.eventEndWithMsg (this.reportSeq, \"CreateSession\", {\n                                sessionId: data.session_id\n                        });\n                        this.logger.info('zp.sp.0 sessionId:'+data.session_id);\n                        if (this.sessionSeq != seq) {\n                                this.logger.error (\"zp.sp.0 seq is not match.\");\n                                return;\n                        }\n                        \n                        if (data.result !== 0) {\n                                this.logger.error (\"zp.sp.0 create session failed \" + data.result);\n                                \n                                this.publishStateUpdateError (publishErrorList.CREATE_SESSION_ERROR);\n                        } else {\n                                this.sessionId = data.session_id;\n                                this.logger.debug (\"zp.sp.0 create session success \" + this.sessionId);\n                                \n                                this.onCreatePublishSessionSuccess (data);\n                        }\n                }, (err, seq) => {\n                        this.dataReport.eventEndWithMsg (this.reportSeq, \"CreateSession\", {\n                                error: err\n                        });\n                        \n                        this.publishStateUpdateError (publishErrorList.SEND_SESSION_TIMEOUT);\n                });\n                \n                this.state = ENUM_PUBLISH_STATE.waitingSessionRsp;\n                this.logger.debug (\"zp.sp.0 called success\");\n        };\n        \n        \n        //////////////////////////////////////////////////////////////////////////////////////////////\n        // create session result\n        /*\n         *    \"zp.ops.0\": \"ZegoPublish.onCreatePublishSessionSuccess\"\n         */\n        onCreatePublishSessionSuccess (data) {\n                //create offer\n                this.logger.debug (\"zp.ops.0 called\");\n                // this.state = ENUM_PUBLISH_STATE.Start;\n                \n                let urls = [];\n                if (data.turn_server) urls.push (data.turn_server);\n                if (data.stun_server) urls.push (data.stun_server);\n                \n                let configuration = {\n                        iceTransportPolicy : 'relay' as RTCIceTransportPolicy,\n                        iceServers: [{\n                                urls: urls,\n                                username: data.turn_username,\n                                credential: data.turn_auth_key\n                        }]\n                };\n                \n                this.logger.info (\"zp.ops.0 username: \" + data.turn_username);\n                this.logger.info (\"zp.ops.0 credential: \" + data.turn_auth_key);\n                \n                this.peerConnection = new RTCPeerConnection (configuration);\n                this.peerConnection.onicecandidate = (e) => {\n                        this.onIceCandidate (e);\n                };\n                \n                this.peerConnection.onsignalingstatechange = (e) => {\n                        this.onConnectionStateChange (e);\n                };\n                \n                this.peerConnection.oniceconnectionstatechange = (e) => {\n                        this.onIceConnectionStateChange (e);\n                };\n        \n                let videoTracks =[];\n                let audioTracks =[];\n                if (this.localStream) {\n                        this.localStream.getTracks ().forEach (\n                                    (track) => {\n                                            this.peerConnection.addTrack (track, this.localStream);\n                                    }\n                        );\n                        \n                        let videoTracks = this.localStream.getVideoTracks ();\n                        let audioTracks = this.localStream.getAudioTracks ();\n                        if (videoTracks.length > 0) this.logger.info (\"zp.ops.0 video device: \" + videoTracks[0].label);\n                        if (audioTracks.length > 0) this.logger.info (\"zp.ops.0 audio device: \" + audioTracks[0].label);\n                        \n                }\n                \n                let offerOptions = {\n                        offerToReceiveAudio: audioTracks.length>0?1:0,\n                        offerToReceiveVideo: videoTracks.length>0?1:0,\n                };\n        \n                this.logger.info (\"zp.ops.0 createOffer: \" + offerOptions);\n                //create offer\n                this.dataReport.eventStart (this.reportSeq, \"CreateOffer\");\n                this.peerConnection.createOffer (offerOptions).then (\n                            (desc) => {\n                                    this.dataReport.eventEnd (this.reportSeq, \"CreateOffer\");\n                                    \n                                    this.onCreateOfferSuccess (desc);\n                            },\n                            (error) => {\n                                    this.dataReport.eventEndWithMsg (this.reportSeq, \"CreateOffer\", {\n                                            error: error.toString ()\n                                    });\n                                    \n                                    this.logger.error (\"zp.ops.0 create offer error \" + error.toString ());\n                                    this.publishStateUpdateError (publishErrorList.CREATE_OFFER_ERROR);\n                            }\n                );\n                \n                //register callback\n                this.signal.registerPushCallback (\"CandidateInfoPush\", this.sessionId, (seq: number, sessionId: number, data: any) => {\n                        this.onRecvCandidateInfo (seq, sessionId, data)\n                });\n                this.signal.registerPushCallback (\"CloseSessionPush\", this.sessionId, (seq: number, sessionId: number, data: any) => {\n                        this.onRecvCloseSession (seq, sessionId, data)\n                });\n                this.signal.registerPushCallback (\"MediaDescPush\", this.sessionId, (seq: number, sessionId: number, data: any) => {\n                        this.onRecvMediaDescription (seq, sessionId, data)\n                });\n                // this.signal.registerPushCallback(\"WebSocketDisconnect\", this.sessionId, onDisconnect, this);\n                this.signal.registerPushCallback (\"SessionResetPush\", this.sessionId, (seq: number, sessionId: number, data: any) => {\n                        this.onRecvResetSession (seq, sessionId, data)\n                });\n                \n                this.logger.debug (\"zp.ops.0 call success\");\n        }\n        \n        \n        //////////////////////////////////////////////////////////////////////////////////////////////\n        // create offer result\n        /*\n         *    \"zp.oco.0\": \"ZegoPublish.onCreateOfferSuccess\"\n         */\n        onCreateOfferSuccess (desc: { sdp: any }) {\n                //this.logger.debug(\"zp.oco.0 success. before desc: \" + desc.sdp);\n                \n                //change bandwidth\n                if (this.videoInfo.bitRate != 0) desc.sdp = this.updateBandwidthRestriction (desc.sdp, this.videoInfo.bitRate);\n                \n                this.logger.debug (\"zp.oco.0 localSdp \" , desc.sdp);\n                \n                this.dataReport.eventStart (this.reportSeq, \"SetLocalDescription\");\n                this.peerConnection.setLocalDescription (desc).then (\n                            () => {\n                                    this.dataReport.eventEnd (this.reportSeq, \"SetLocalDescription\");\n                                    \n                                    this.onSetLocalDescriptionSuccess (desc);\n                            },\n                            (error) => {\n                                    this.dataReport.eventEndWithMsg (this.reportSeq, \"SetLocalDescription\", {\n                                            error: error.toString ()\n                                    });\n                                    \n                                    this.logger.error (\"zp.oco.0 error \" + error.toString ());\n                                    this.publishStateUpdateError (publishErrorList.SET_LOCAL_DESC_ERROR);\n                            }\n                );\n        }\n        \n        \n        updateBandwidthRestriction (sdp, bandwidth) {\n                let modifier = 'AS';\n                if (adapter.browserDetails.browser === 'firefox') {\n                        bandwidth = (bandwidth >>> 0) * 1000;\n                        modifier = 'TIAS';\n                }\n                if (sdp.indexOf ('b=' + modifier + ':') === -1) {\n                        // insert b= after c= line.\n                        sdp = sdp.replace (/c=IN (.*)\\r\\n/,\n                                    'c=IN $1\\r\\nb=' + modifier + ':' + bandwidth + '\\r\\n');\n                }\n                else {\n                        sdp = sdp.replace (new RegExp ('b=' + modifier + ':.*\\r\\n'),\n                                    'b=' + modifier + ':' + bandwidth + '\\r\\n');\n                }\n                \n                return sdp;\n        }\n        \n        //////////////////////////////////////////////////////////////////////////////////////////////\n        // setLocalDescription result\n        /*\n         *    \"zp.osd.0\": \"ZegoPublish.onSetLocalDescriptionSuccess\"\n         */\n        onSetLocalDescriptionSuccess (desc) {\n                this.logger.debug (\"zp.osd.0 success\");\n                \n                //send offer to other peer\n                let mediaDescription = {\n                        sdp: desc.sdp,\n                        width: this.videoInfo.width,\n                        height: this.videoInfo.height,\n                        frameRate: this.videoInfo.frameRate,\n                        video_min_kpbs: this.videoInfo.bitRate,\n                        video_max_kpbs: this.videoInfo.bitRate,\n                        audio_kpbs: 48\n                };\n                \n                this.offerSeq = getSeq ();\n                this.dataReport.eventStart (this.reportSeq, \"SendMediaDesc\");\n                this.signal.sendMediaDesc (this.offerSeq, this.sessionId, 0, mediaDescription, (seq, sessionId, data) => {\n                        if (this.offerSeq != seq || this.sessionId != sessionId) {\n                                this.logger.error (\"zp.osd.0 seq or sessionId is not equal\");\n                                return;\n                        }\n                        \n                        this.logger.debug (\"zp.osd.0 send success\");\n                        this.dataReport.eventEnd (this.reportSeq, \"SendMediaDesc\");\n                        \n                        //set timer for waiting\n                        this.waitingAnswerTimer = setTimeout (() => {\n                                if (this.state == ENUM_PUBLISH_STATE.waitingServerAnswer) {\n                                        this.logger.error (\"zp.osd.0 waiting timeout\");\n                                        this.publishStateUpdateError (publishErrorList.SERVER_MEDIA_DESC_TIMEOUT);\n                                }\n                        }, this.waitingAnswerTimeInterval);\n                        \n                        this.state = ENUM_PUBLISH_STATE.waitingServerAnswer;\n                        \n                }, (err, seq) => {\n                        this.dataReport.eventEndWithMsg (this.reportSeq, \"SendMediaDesc\", {\n                                error: err\n                        });\n                        \n                        this.publishStateUpdateError (publishErrorList.SEND_MEDIA_DESC_TIMEOUT);\n                });\n                \n                this.state = ENUM_PUBLISH_STATE.waitingOffserRsp;\n                this.logger.debug (\"zp.osd.0 call success\");\n        }\n        \n        /*\n         *    \"zp.sp.0.1\": \"ZegoPublish.stopPublish\"\n         */\n        stopPublish () {\n                this.logger.debug (\"zp.sp.0.1 called\");\n                \n                //close session\n                if (this.sessionId && !this.closeSessionSignal) {\n                        this.signal.sendCloseSession(getSeq(), this.sessionId, 0);\n                }\n                \n                this.dataReport.eventEndWithMsg (this.reportSeq, \"PublishState\", {\n                        \"state\": this.state + ''\n                });\n                \n                this.dataReport.addEvent (this.reportSeq, \"StopPublish\");\n                \n                this.dataReport.addMsgExt (this.reportSeq, {\n                        \"stream\": this.streamId,\n                        \"sessionId\": this.sessionId\n                });\n                \n                this.dataReport.uploadReport (this.reportSeq, \"RTCPublishStream\");\n                \n                this.resetPublish ();\n        };\n        \n        \n        onPublishStateUpdate (type, streamId, error?) {\n        };\n        \n        onPublishQualityUpdate (streamId, quality) {\n        };\n        \n        /*\n         *    \"zp.od.0\": \"ZegoPublish.onDisconnect\"\n         */\n        onDisconnect () {\n                this.logger.info (\"zp.od.0 call\");\n                \n                // if (this.sessionId !== sessionId) {\n                //     this.logger.info(\"zp.od.0 session is not same\");\n                //     return;\n                // }\n                \n                this.logger.info (\"zp.od.0 websocket disconnect\");\n                this.dataReport.addEvent (this.reportSeq, \"OnDisconnect\");\n                \n                this.publishStateUpdateError (publishErrorList.WEBSOCKET_ERROR);\n        };\n        \n        //////////////////////////////////////////////////////////////////////////////////////////////\n        // send candidate Info\n        /*\n         *    \"zp.sci.0\": \"ZegoPublish.sendCandidateInfo\"\n         */\n        sendCandidateInfo (candidateInfo: any[]) {\n                this.logger.debug (\"zp.sci.0 called\");\n                candidateInfo = candidateInfo.filter (function (item) {\n                        if (item.candidate.indexOf ('relay') > 0) {\n                                return true;\n                        }\n                        return false;\n                });\n                \n                if (!candidateInfo || candidateInfo.length < 1) {\n                        this.logger.info (\"zp.sci.0 cancelled\");\n                        return;\n                }\n                \n                this.dataReport.eventStart (this.reportSeq, \"SendIceCandidate\");\n                this.signal.sendCandidateInfo (getSeq (), this.sessionId, candidateInfo, (seq, sessionId, data) => {\n                        this.logger.debug (\"zp.sci.0 send success\");\n                        this.dataReport.eventEnd (this.reportSeq, \"SendIceCandidate\");\n                }, (err, seq) => {\n                        this.logger.error (\"zp.sci.0 failed to send: \" + err.toString ());\n                        \n                        this.dataReport.eventEndWithMsg (this.reportSeq, \"SendIceCandidate\", {\n                                error: err\n                        });\n                        \n                        this.publishStateUpdateError (publishErrorList.SEND_CANDIDATE_TIMEOUT);\n                });\n        }\n        \n        \n        /*\n        *    \"zp.oics.0\": \"ZegoPublish.onIceConnectionStateChange\"\n        */\n        onIceConnectionStateChange (event: any) {\n                \n                if (this.state == ENUM_PUBLISH_STATE.stop || this.peerConnection == null) {\n                        return;\n                }\n                \n                this.logger.info (\"zp.oics.0 stateChanged \" + this.peerConnection.iceConnectionState);\n                \n                if (this.peerConnection.iceConnectionState === \"connected\") {\n                        \n                        this.logger.info (\"zp.oics.0 connected state \" + this.state);\n                        \n                        this.dataReport.eventEnd (this.reportSeq, \"IceConnected\");\n                        \n                        if (this.state != ENUM_PUBLISH_STATE.publishing) {\n                                this.onPublishStateUpdate (ENUM_PUBLISH_STATE_UPDATE.start, this.streamId);\n                        }\n                        \n                        this.state = ENUM_PUBLISH_STATE.publishing;\n                        if (this.retryState != ENUM_RETRY_STATE.didNotStart) {\n                                this.retryState = ENUM_RETRY_STATE.finished;\n                                this.currentRetryCount = 0;\n                        }\n                        \n                        //publish started\n                        this.dataReport.eventStart (this.reportSeq, \"PublishState\");\n                        \n                        //start quality timeInterval\n                        this.setPublishQualityTimer ();\n                }\n                else if (this.peerConnection.iceConnectionState === \"closed\") {\n                        \n                        this.dataReport.addEvent (this.reportSeq, \"IceClosed\");\n                        \n                        this.checkPublishConnectionFailedState (this.peerConnection.iceConnectionState);\n                        \n                }\n                else if (this.peerConnection.iceConnectionState === \"failed\") {\n                        this.dataReport.addEvent (this.reportSeq, \"IceFailed\");\n                        \n                        this.checkPublishConnectionFailedState (this.peerConnection.iceConnectionState);\n                }\n        }\n        \n        \n        //////////////////////////////////////////////////////////////////////////////////////////////\n        // onIceCandidate callback\n        /*\n         *    \"zp.oic.0\": \"ZegoPublish.onIceCandidate\"\n         */\n        onIceCandidate (event: any) {\n                \n                if (!event.candidate) {\n                        return;\n                }\n                \n                this.logger.info (\"zp.oic.0 candidate\" + event.candidate.candidate);\n        \n                if (this.state < ENUM_PUBLISH_STATE.waitingServerICE || this.state == ENUM_PUBLISH_STATE.stop) {\n                        //save candidate Info\n                        \n                        this.candidateInfo.push ({\n                                candidate: event.candidate.candidate,\n                                sdpMid: event.candidate.sdpMid,\n                                sdpMLineIndex: event.candidate.sdpMLineIndex\n                        });\n                } else {\n                        let candidate = {\n                                candidate: event.candidate.candidate,\n                                sdpMid: event.candidate.sdpMid,\n                                sdpMLineIndex: event.candidate.sdpMLineIndex\n                        };\n                        \n                        this.sendCandidateInfo ([candidate]);\n                }\n        }\n        \n        //////////////////////////////////////////////////////////////////////////////////////////////\n        // onIceStateChange callback\n        /*\n         *    \"zp.ocs.0\": \"ZegoPublish.onConnectionStateChange\"\n         */\n        onConnectionStateChange (event) {\n                this.logger.info (\"zp.ocs.0 called \"+event.target.signalingState);\n        }\n        \n        \n        //////////////////////////////////////////////////////////////////////////////////////////////\n        // server push SDP (setRemoteDesription)\n        /*\n         *    \"zp.ormd.0\": \"ZegoPublish.onRecvMediaDescription\"\n         */\n        onRecvMediaDescription (seq: number, sessionId: number, data: any) {\n                this.logger.debug (\"zp.ormd.0 received\");\n                if (this.state != ENUM_PUBLISH_STATE.waitingServerAnswer) {\n                        this.logger.info (\"zp.ormd.0 current state \" + this.state + \" not allowed\");\n                        return;\n                }\n                \n                //clear timer\n                if (this.waitingAnswerTimer != null) {\n                        clearTimeout (this.waitingAnswerTimer);\n                        this.waitingAnswerTimer = null;\n                }\n                \n                this.dataReport.addEvent (this.reportSeq, \"RecvMediaDesc\");\n                \n                this.signal.sendMediaDescAck (seq, this.sessionId, 0);\n                \n                //not answer\n                if (data.type == 1) {\n                        this.onGetRemoteOfferSucceses (data.sdp);\n                } else {\n                        //server send error\n                        this.publishStateUpdateError (publishErrorList.SERVER_MEDIA_DESC_ERROR);\n                }\n        }\n        \n        //////////////////////////////////////////////////////////////////////////////////////////////\n        // server push offer (setRemoteDescription)\n        /*\n         *    \"zp.oro.0\": \"ZegoPublish.onGetRemoteOfferSucceses\"\n         */\n        onGetRemoteOfferSucceses (desc: RTCSdpType) {\n                this.logger.debug (\"zp.oro.0 remoteSdp:\",desc);\n                \n                let answerDescription: RTCSessionDescription = {\n                        type: \"answer\",\n                        sdp: desc,\n                        toJSON: () => {\n                        }\n                };\n                \n                this.dataReport.eventStart (this.reportSeq, \"SetRemoteDescription\");\n                \n                this.peerConnection.setRemoteDescription (new RTCSessionDescription (answerDescription)).then (() => {\n                        this.logger.debug (\"zp.oro.0 set success\");\n                        this.dataReport.eventEnd (this.reportSeq, \"SetRemoteDescription\");\n                }, (error) => {\n                        this.logger.error (\"zp.oro.0 failed: \" + error.toString ());\n                        this.dataReport.eventEndWithMsg (this.reportSeq, \"SetRemoteDescription\", {\n                                error: error.toString ()\n                        });\n                        \n                        this.publishStateUpdateError (publishErrorList.SET_REMOTE_DESC_ERROR);\n                });\n                \n                this.sendCandidateInfo (this.candidateInfo);\n                this.candidateInfo = [];\n                \n                this.state = ENUM_PUBLISH_STATE.waitingServerICE;\n                \n                //setTimer\n                this.waitingICETimer = setTimeout (() => {\n                        if (this.state == ENUM_PUBLISH_STATE.waitingServerICE) {\n                                this.logger.error (\"zp.orod.0 waiting server timeout\");\n                                this.publishStateUpdateError (publishErrorList.SERVER_CANDIDATE_TIMEOUT);\n                        }\n                }, this.waitingICETimeInterval);\n                \n                this.logger.debug (\"zp.oro.0 call success\");\n        }\n        \n        \n        //////////////////////////////////////////////////////////////////////////////////////////////\n        // server push ICE (addICECandidate)\n        /*\n         *    \"zp.oci.0\": \"ZegoPublish.onRecvCandidateInfo\"\n         */\n        onRecvCandidateInfo (seq: number, sessionId: number, data: any) {\n                this.logger.debug (\"zp.oci.0 received \" + data.infos.length);\n                if (this.state != ENUM_PUBLISH_STATE.waitingServerICE) {\n                        this.logger.info (\"zp.oci.0 current state \" + this.state + \" not allowed\");\n                        return;\n                }\n                \n                if (this.waitingICETimer != null) {\n                        clearTimeout (this.waitingICETimer);\n                        this.waitingICETimer = null;\n                }\n                \n                this.dataReport.addEvent (this.reportSeq, \"RecvIceCandidate\");\n                \n                this.signal.sendCandidateInfoAck (seq, this.sessionId, 0);\n                \n                for (let i = 0; i < data.infos.length; i++) {\n                        let ice = {\n                                sdpMid: data.infos[i].sdpMid,\n                                sdpMLineIndex: data.infos[i].sdpMLineIndex,\n                                candidate: data.infos[i].candidate\n                        };\n                        \n                        this.logger.debug (\"zp.orci.0 candidate \" + ice.candidate);\n                        \n                        this.peerConnection.addIceCandidate (new RTCIceCandidate (ice)).then (() => {\n                                this.logger.debug (\"zp.oci.0 add success\");\n                        }, (error) => {\n                                this.logger.error (\"zp.oci.0 add error \" + error.toString ());\n                                this.publishStateUpdateError (publishErrorList.SERVER_CANDIDATE_ERROR);\n                        });\n                }\n                \n                this.state = ENUM_PUBLISH_STATE.connecting;\n                \n                this.dataReport.eventStart (this.reportSeq, \"IceConnected\");\n        }\n        \n        \n        //////////////////////////////////////////////////////////////////////////////////////////////\n        // server push closeSession\n        /*\n         *    \"zp.orcs.0\": \"ZegoPublish.onRecvCloseSession\"\n         */\n        onRecvCloseSession (seq: number, sessionId: number, data: any) {\n                this.logger.info (\"zp.orcs.0 reason: \" + data.reason);\n                \n                this.dataReport.addEvent (this.reportSeq, \"RecvCloseSession\");\n                \n                this.signal.sendCloseSessionAck (seq, this.sessionId, 0);\n                \n                let error = JSON.parse(JSON.stringify(publishErrorList.SESSION_CLOSED));\n                error.msg += data.reason;\n                this.publishStateUpdateError (error);\n        }\n        \n        //////////////////////////////////////////////////////////////////////////////////////////////\n        // server push resetSession\n        /*\n         *    \"zp.orrs.0\": \"ZegoPublish.onRecvResetSession\"\n         */\n        onRecvResetSession (seq: number, sessionId: number, data: any) {\n                this.logger.info (\"zp.orrs.0 received \");\n                \n                if (sessionId != this.sessionId) {\n                        this.logger.error (\"zp.orrs.0 cannot find session\");\n                        return;\n                }\n                \n                this.dataReport.addEvent (this.reportSeq, \"RecvResetSession\");\n                \n                //check should retry\n                if (this.shouldRetryPublish ()) {\n                        this.startRetryPublish ();\n                }\n        }\n        \n        //////////////////////////////////////////////////////////////////////////////////////////////\n        // retry publish\n        /*\n         *    \"zp.srp.0.0\": \"ZegoPublish.shouldRetryPublish\"\n         */\n        shouldRetryPublish () {\n                if (this.retryState == ENUM_RETRY_STATE.didNotStart && this.state != ENUM_PUBLISH_STATE.publishing) {\n                        this.logger.info (\"zp.srp.0.0 connection didn't success\");\n                        return false;\n                }\n                \n                if (this.retryState == ENUM_RETRY_STATE.retrying) {\n                        this.logger.info (\"zp.srp.0.0 already retrying\");\n                        return false;\n                }\n                \n                if (this.currentRetryCount > this.maxRetryCount) {\n                        this.logger.info (\"zp.srp.0.0 beyond max\");\n                        return false;\n                }\n                \n                this.logger.debug (\"zp.srp.1.0 call success\");\n                return true;\n        }\n        \n        /*\n         *    \"zp.srp.0\": \"ZegoPublish.startRetryPublish\"\n         */\n        startRetryPublish () {\n                this.logger.debug (\"zp.srp.0 call\");\n                \n                let streamId = this.streamId;\n                if (!streamId) {\n                        this.logger.info (\"zp.srp.0 no streamid\");\n                        return;\n                }\n                \n                this.resetPublish ();\n                \n                this.tryStartPublish (streamId);\n        }\n        \n        /*\n         *    \"zp.tsp.0\": \"ZegoPublish.tryStartPublish\"\n         */\n        tryStartPublish ( streamId) {\n                \n                this.logger.debug (\"zp.tsp.0 call\");\n                \n                this.clearTryPublishTimer ();\n                \n                this.streamId = streamId;\n                if (this.currentRetryCount > this.maxRetryCount) {\n                        this.logger.info (\"zp.tsp.0 beyond max limit\");\n                        //callback error\n                        this.publishStateUpdateError (publishErrorList.WEBSOCKET_ERROR);\n                        return;\n                }\n                \n                this.retryState = ENUM_RETRY_STATE.retrying;\n                this.currentRetryCount += 1;\n                \n                if (this.signal.isServerConnected ()) {\n                        this.logger.debug (\"zp.tsp.0 signal connected\");\n                        \n                        this.startPublish (streamId,this.localStream,this.videoInfo);\n                }\n                else {\n                        //setTimer\n                        this.logger.debug (\"zp.tsp.0 signal server not connected\");\n                        \n                        this.waitingAnswerTimer = setTimeout (() => {\n                                this.tryStartPublish (streamId);\n                        }, this.waitingAnswerTimeInterval);\n                }\n        }\n        \n        \n        checkPublishConnectionFailedState (connectionState) {\n                let state = null;\n                if (connectionState == \"failed\") {\n                        state = publishErrorList.MEDIA_CONNECTION_FAILED;\n                }\n                else if (connectionState == \"closed\") {\n                        state = publishErrorList.MEDIA_CONNECTION_CLOSED;\n                }\n                \n                if (state == null) {\n                        return;\n                }\n                \n                if (this.state != ENUM_PUBLISH_STATE.publishing && this.retryState == ENUM_PUBLISH_STATE.didNotStart) {\n                        this.logger.info (\"zp.oics.0  state \" + this.state + \" retryState \" + this.retryState + \" connectionState \" + connectionState);\n                        \n                        this.publishStateUpdateError (state);\n                }\n                else {\n                        if (this.shouldRetryPublish ()) {\n                                this.onPublishStateUpdate (ENUM_PUBLISH_STATE_UPDATE.retry, this.streamId);\n                                this.startRetryPublish ();\n                        }\n                        else {\n                                this.publishStateUpdateError (state);\n                        }\n                }\n        }\n        \n        //////////////////////////////////////////////////////////////////////////////////////////////\n        // quality timer\n        /*\n         *    \"zp.spq.0\": \"ZegoPublish.setPublishQualityTimer\"\n         */\n        setPublishQualityTimer () {\n                if (this.qualityTimer != null) {\n                        return;\n                }\n                \n                this.logger.debug (\"zp.spq.0 called\");\n                \n                this.clearPublishQualityTimer ();\n                \n                this.qualityTimer = setInterval (() => {\n                        \n                        if (this.peerConnection) {\n                                this.peerConnection.getStats (null).then ((results) => {\n                                        this.getPublishStats (results);\n                                }, (error) => {\n                                        this.logger.info (\"zp.spq.0 getStats error \" + error.toString ());\n                                });\n                        }\n                        \n                }, this.qualityTimeInterval);\n                \n                this.lastPublishStats = {\n                        time: 0,\n                        audioBytesSent: 0,\n                        videoBytesSent: 0,\n                        framesEncoded: 0,\n                        framesSent: 0\n                };\n                \n                this.qualitySeq = getSeq();\n                this.qualityCount = 0;\n                this.dataReport.newReport (this.qualitySeq);\n        }\n        \n        /*\n         *    \"zp.gps.0\": \"ZegoPublish.getPublishStats\"\n         */\n        getPublishStats (results) {\n                if (!results) {\n                        return;\n                }\n                \n                let publishData = {\n                        audioBitrate: 0,\n                        videoBitrate: 0,\n                        videoFPS: 0,\n                        nackCount: 0,\n                        pliCount: 0,\n                        sliCount: 0,\n                        frameHeight: 0,\n                        frameWidth: 0,\n                        videoTransferFPS: 0,\n                        totalRoundTripTime: 0,\n                        currentRoundTripTime: 0\n                };\n                let time = this.lastPublishStats.time;\n                results.forEach ((result) => {\n                        if ((result.type == \"outbound-rtp\" || (result.type == \"ssrc\" && result.bytesSent != undefined)) && result.mediaType == \"audio\") {\n                                //audio\n                                if (time != 0) {\n                                        publishData.audioBitrate = 8 * (result.bytesSent - this.lastPublishStats.audioBytesSent) / (result.timestamp - time);\n                                }\n                                \n                                if (publishData.audioBitrate < 0) {\n                                        publishData.audioBitrate = 0;\n                                }\n                                \n                                this.lastPublishStats.audioBytesSent = result.bytesSent;\n                                this.lastPublishStats.time = result.timestamp;\n                        }\n                        else if ((result.type == \"outbound-rtp\" || (result.type == \"ssrc\" && result.bytesSent != undefined)) && result.mediaType == \"video\") {\n                                //video\n                                if (time != 0) {\n                                        publishData.videoBitrate = 8 * (result.bytesSent - this.lastPublishStats.videoBytesSent) / (result.timestamp - time);\n                                        publishData.videoFPS = 1000 * (result.framesEncoded - this.lastPublishStats.framesEncoded) / (result.timestamp - time);\n                                }\n                                \n                                if (publishData.videoBitrate < 0) {\n                                        publishData.videoBitrate = 0;\n                                }\n                                if (publishData.videoFPS < 0) {\n                                        publishData.videoFPS = 0;\n                                }\n                                \n                                publishData.nackCount = result.nackCount;\n                                publishData.pliCount = result.pliCount;\n                                publishData.sliCount = result.sliCount;\n                                \n                                this.lastPublishStats.videoBytesSent = result.bytesSent;\n                                this.lastPublishStats.framesEncoded = result.framesEncoded;\n                                this.lastPublishStats.time = result.timestamp;\n                        }\n                        //safari don't have this type\n                        else if (result.type == \"track\" && (result.kind == \"video\" || result.id.indexOf (\"video\") >= 0)) {\n                                publishData.frameHeight = result.frameHeight;\n                                publishData.frameWidth = result.frameWidth;\n                                \n                                if (time != 0) {\n                                        publishData.videoTransferFPS = 1000 * (result.framesSent - this.lastPublishStats.framesSent) / (result.timestamp - time);\n                                }\n                                \n                                if (publishData.videoTransferFPS < 0) {\n                                        publishData.videoTransferFPS = 0;\n                                }\n                                \n                                this.lastPublishStats.framesSent = result.framesSent;\n                        }\n                        else if (result.type == \"candidate-pair\") {\n                                if (result.totalRoundTripTime != undefined) {\n                                        publishData.totalRoundTripTime = result.totalRoundTripTime;\n                                }\n                                \n                                if (result.currentRoundTripTime != undefined) {\n                                        publishData.currentRoundTripTime = result.currentRoundTripTime;\n                                }\n                        }\n                });\n                \n                // this.logger.debug(\"zp.gps.0 audio: \" + publishData.audioBitrate + \" video: \" + publishData.videoBitrate +\n                //  \" FPS: \" + publishData.videoFPS + \" transfer: \" + publishData.videoTransferFPS);\n                \n                // this.dataReport.addEvent(this.qualitySeq, \"PublishQuality\", publishData);\n                // this.qualityCount += 1;\n                // if (this.qualityCount > this.maxQualityListCount) {\n                //     this.dataReport.uploadReport(this.qualitySeq, \"RTCPublishQuality\");\n                //     this.qualityCount = 0;\n                //     this.qualitySeq = getSeq();\n                //     this.dataReport.newReport(this.qualitySeq);\n                // }\n                \n                //upload quality\n                this.uploadPublishQuality (publishData);\n                \n                if (time != 0) {\n                        this.onPublishQualityUpdate (this.streamId, publishData);\n                }\n        }\n        \n        \n        /*\n         *    \"zp.upq.0\": \"ZegoPublish.uploadPublishQuality\"\n         */\n        uploadPublishQuality (publishData) {\n                if (!this.qualityUpload) {\n                        return;\n                }\n                \n                let timeStamp = Date.parse (new Date () + '');\n                if (this.qualityUploadLastTime == 0 || timeStamp - this.qualityUploadLastTime >= this.qualityUploadInterval) {\n                        this.logger.debug (\"zp.upq.0 upload\");\n                        \n                        publishData[\"stream_type\"] = \"publish\";\n                        publishData[\"stream_id\"] = this.streamId;\n                        publishData[\"timeStamp\"] = timeStamp / 1000;\n                        \n                        this.signal.QualityReport (getSeq(), this.sessionId, publishData, (seq, sessionId, data) => {\n                                if (data.report !== undefined) {\n                                        this.qualityUpload = data.report;\n                                        this.qualityUploadInterval = data.report_interval_ms;\n                                }\n                        }, (err, seq) => {\n                                this.logger.info (\"zp.upq.0 upload failed \" + err);\n                        });\n                        \n                        this.qualityUploadLastTime = timeStamp;\n                }\n        }\n        \n        \n}\n","import {ENUM_RESOLUTION_TYPE, MediaStreamConstraints} from \"../common/zego.entity\";\nimport {Logger} from \"../common/zego.logger\";\n\nexport class ZegoPreview {\n        logger: Logger;\n        \n        localVideo = null;\n        localStream: MediaStream = null;\n        videoInfo = {};\n        \n        previewSuc = false;\n        \n        constructor (private log: Logger) {\n                this.logger = log;\n        }\n        \n        \n       \n        \n        /*\n         *    \"zp.gmsc.2\": \"getMediaStreamConstraints\"\n         */\n        \n        getMediaStreamConstraints (mediaStreamConfig: MediaStreamConstraints) {\n                \n                let mediaStreamConstraints = {\n                        audio: null,\n                        video: null\n                };\n                mediaStreamConstraints['audio'] = false;\n                mediaStreamConstraints['video'] = false;\n                \n                //audio\n                if (mediaStreamConfig.audio) {\n                        if (mediaStreamConfig.audioInput) {\n                                mediaStreamConstraints.audio = {\n                                        deviceId: {\n                                                exact: mediaStreamConfig.audioInput\n                                        }\n                                };\n                        }\n                        else {\n                                mediaStreamConstraints.audio = true;\n                        }\n                }\n                \n                //video\n                if (mediaStreamConfig.video) {\n                        let width = 640;\n                        let height = 480;\n                        let frameRate = 15;\n                        let bitRate = 800;\n                        \n                        //videoQuality\n                        //1 QVGA\n                        if (mediaStreamConfig.videoQuality === 1) {\n                                width = ENUM_RESOLUTION_TYPE.LOW.width;\n                                height = ENUM_RESOLUTION_TYPE.LOW.height;\n                                frameRate = ENUM_RESOLUTION_TYPE.LOW.frameRate;\n                                bitRate = ENUM_RESOLUTION_TYPE.LOW.bitRate;\n                        }\n                        //2 VGA\n                        else if (mediaStreamConfig.videoQuality === 2) {\n                                width = ENUM_RESOLUTION_TYPE.MEDIUM.width;\n                                height = ENUM_RESOLUTION_TYPE.MEDIUM.height;\n                                frameRate = ENUM_RESOLUTION_TYPE.MEDIUM.frameRate;\n                                bitRate = ENUM_RESOLUTION_TYPE.MEDIUM.bitRate;\n                        }\n                        //3 HD\n                        else if (mediaStreamConfig.videoQuality === 3) {\n                                width = ENUM_RESOLUTION_TYPE.HIGH.width;\n                                height = ENUM_RESOLUTION_TYPE.HIGH.height;\n                                frameRate = ENUM_RESOLUTION_TYPE.HIGH.frameRate;\n                                bitRate = ENUM_RESOLUTION_TYPE.HIGH.bitRate;\n                        }\n                        //custom\n                        else if (mediaStreamConfig.videoQuality === 4) {\n                                width = mediaStreamConfig.width;\n                                height = mediaStreamConfig.height;\n                                frameRate = mediaStreamConfig.frameRate;\n                                bitRate = mediaStreamConfig.bitRate||800;\n                        }\n                        else {\n                                this.logger.info (\"zp.gmsc.2 user default\");\n                        }\n                        \n                        //horizontal\n                        if (mediaStreamConfig.horizontal === true) {\n                                let temp = height;\n                                height = width;\n                                width = temp;\n                        }\n                        \n                        mediaStreamConstraints.video = {\n                                width: width,\n                                height: height,\n                                frameRate: frameRate,\n                                bitRate: bitRate\n                        };\n                        \n                        //facingMode\n                        if (mediaStreamConfig.facingMode != undefined) {\n                                mediaStreamConstraints.video.facingMode = mediaStreamConfig.facingMode;\n                        }\n                        else if (mediaStreamConfig.videoInput != undefined) {\n                                mediaStreamConstraints.video.deviceId = {\n                                        exact: mediaStreamConfig.videoInput\n                                };\n                        }\n                        \n                        this.logger.info (\"zp.gmsc.2 width: \" + width + \" height: \" + height + \" rate: \" + frameRate);\n                }\n                \n                return mediaStreamConstraints;\n        }\n        \n        /*\n         *    \"zp.sv.2\": \"startPreview\"\n         */\n        \n        \n        startPreview (localVideo: HTMLElement, mediaStreamConfig: MediaStreamConstraints, successCallback: Function, errorCallback: Function) {\n                this.logger.debug (\"zp.sv.2 called\");\n                this.localVideo = localVideo;\n                \n                if (navigator.mediaDevices === undefined || navigator.mediaDevices.getUserMedia == undefined) {\n                        if (errorCallback) {\n                                errorCallback (\"browser don't support\");\n                        }\n                        return;\n                }\n                \n                \n                //external media stream\n                if (mediaStreamConfig.externalMediaStream instanceof MediaStream) {\n                        this.logger.debug (\"zp.sv.2 use external media stream\");\n                        \n                        this.localStream = mediaStreamConfig.externalMediaStream;\n                        \n                        this.videoInfo = {\n                                width: mediaStreamConfig.width,\n                                height: mediaStreamConfig.height,\n                                frameRate: mediaStreamConfig.frameRate,\n                                bitRate: mediaStreamConfig.bitRate\n                        };\n                        \n                        if (successCallback) {\n                                successCallback ();\n                        }\n                        \n                        return;\n                } else if (mediaStreamConfig.externalCapture) {\n                        const result = this.captureStream (localVideo);\n                        if (result) {\n                                if (successCallback) {\n                                        successCallback ();\n                                }\n                        } else {\n                                if (errorCallback) {\n                                        errorCallback (\"browser don't support\");\n                                }\n                        }\n                        \n                        return;\n                }\n                \n                const mediaStreamConstraints = this.getMediaStreamConstraints (mediaStreamConfig);\n                this.videoInfo = mediaStreamConstraints.video;\n                \n                \n                navigator.getUserMedia (mediaStreamConstraints, stream => {\n                        this.logger.info (\"zp.sv.2 success\");\n                        \n                        if (!this.localVideo) {\n                                this.logger.info (\"zp.sv.2 no localVideo\");\n                                if (errorCallback) {\n                                        errorCallback (\"no localVideo\");\n                                }\n                                return;\n                        }\n                        \n                        this.localVideo.srcObject = stream;\n                        this.localStream = stream;\n                        this.previewSuc = true;\n                        if (successCallback) {\n                                successCallback ();\n                        }\n                }, error => {\n                        this.logger.info (\"zp.sv.2 failed\");\n                        if (errorCallback) {\n                                errorCallback (error.name);\n                        }\n                });\n        };\n        \n        \n        /*\n         *    \"zp.cs.2\": \"captureStream\"\n         */\n        captureStream (localVideo: HTMLElement) {\n                if (!localVideo) {\n                        this.logger.info (\"zp.cs.2 no local video\");\n                        return false;\n                }\n                \n                if (localVideo['captureStream']) {\n                        this.localStream = localVideo['captureStream']();\n                        this.logger.debug (\"zp.cs.2 captureStream\");\n                }\n                else if (localVideo['mozCaptureStream']) {\n                        this.localStream = localVideo['mozCaptureStream'] ();\n                        this.logger.debug (\"zp.cs.2 mozCaptureStream\");\n                }\n                else {\n                        this.logger.info (\"zp.cs.2 don't support\");\n                        return false;\n                }\n                \n                this.videoInfo = {\n                        width: localVideo['videoWidth'],\n                        height: localVideo['videoHeight'],\n                        frameRate: 0,\n                        bitRate: 0\n                };\n                this.logger.debug (\"zp.cs.2 called success\");\n                return true;\n        }\n        \n        /*\n         *    \"zp.sv.2.1\": \"stopPreview\"\n         */\n        stopPreview () {\n                this.logger.info (\"zp.sv.2.1 called\");\n                \n                if (!this.localStream) {\n                        return;\n                }\n                \n                this.localStream.getTracks ().forEach (track => {\n                        track.stop ();\n                });\n                \n                this.localStream = null;\n                \n                this.localVideo.srcObject = null;\n                this.localVideo = null;\n                \n                this.videoInfo = {};\n        };\n        \n        /*\n         *    \"zp.em.2\": \"enableMicrophone\"\n         */\n        enableMicrophone = (enable: boolean) => {\n                if (!this.localStream) {\n                        this.logger.error (\"zp.em.2 no localStream\");\n                        return false;\n                }\n                \n                this.localStream.getAudioTracks ().forEach (\n                            (track) => {\n                                    track.enabled = enable;\n                            }\n                );\n                \n                this.logger.debug (\"zp.em.2 call success\");\n                return true;\n        };\n        \n        /*\n         *    \"zp.ec.2\": \"enableCamera\"\n         */\n        enableCamera = (enable: boolean) => {\n                if (!this.localStream) {\n                        this.logger.error (\"zp.ec.2 no localStream\");\n                        return false;\n                }\n                \n                this.localStream.getVideoTracks ().forEach (\n                            (track) => {\n                                    track.enabled = enable;\n                            }\n                );\n                \n                this.logger.debug (\"zp.ec.2 call success\");\n                return true;\n        };\n        \n        /*\n         *    \"zp.sad.2\": \"setAudioDestination\"\n         */\n        setAudioDestination = audioOutput => {\n                if (!this.localVideo) {\n                        this.logger.error (\"zp.sad.2 no localVideo\");\n                        return false;\n                }\n                \n                if (this.localVideo.sinkId !== 'undefined') {\n                        this.localVideo.setSinkId (audioOutput).then (() => {\n                                this.logger.info (\"zp.sad.2 success device: \" + audioOutput);\n                                // _this.audioOutput = audioOutput;\n                        }).catch (error => {\n                                this.logger.info (\"zp.sad.2 \" + error.name);\n                        });\n                        return true;\n                }\n                else {\n                        this.logger.error (\"zp.sad.2 browser does not suppport\");\n                        return false;\n                }\n        }\n        \n        \n}\n","\nimport {DataStatistics} from \"./zego.entity\";\nimport {Logger} from \"./zego.logger\";\n\nexport  class ZegoDataReport  {\n        logger:Logger;\n        dataStatistics:DataStatistics = {};\n\n        constructor(private log:Logger){\n                this.logger = log; \n        }\n\n\n        newReport(seq:number) {\n                this.dataStatistics[seq] = {\n                        abs_time: Date.now(),\n                        time_consumed: 0,\n                        error: 0,\n                        events: [],\n                };\n        };\n\n        addMsgExt(seq:number, msg_ext) {\n                if (!this.dataStatistics[seq]) {\n                        console.warn(`${seq} not exist`);\n                        return;\n                }\n\n                this.dataStatistics[seq].msg_ext = msg_ext;\n        };\n\n        /*\n         *    \"zd.es.0\": \"ZegoDataReport.eventStart\"\n         */\n        eventStart (seq, event_name) {\n                if (!this.dataStatistics[seq]) {\n                        this.logger.warn(\"zd.es.0 no seq match\");\n                        return;\n                }else if (this.dataStatistics[seq].events == undefined) {\n                        this.logger.warn(\"zd.es.0 no events\");\n                        return;\n                }\n\n                this.dataStatistics[seq].events.push({\n                        event: event_name,\n                        abs_time: Date.now(),\n                        time_consumed: 0\n                });\n        };\n\n        /*\n         *    \"zd.ee.0\": \"ZegoDataReport.eventStart\"\n         */\n        eventEnd (seq, event_name,extInfo?:any) {\n                if (!this.dataStatistics[seq]) {\n                        this.logger.info(\"zd.ee.0 no seq match\");\n                        return;\n                }\n\n                let events = this.dataStatistics[seq].events;\n                if (!events||events.length===0) {\n                        this.logger.info(\"zd.ee.0 no events\");\n                        return;\n                }\n\n                for (let i = events.length - 1; i >= 0; i--) {\n                        if (events[i].event == event_name && events[i].time_consumed) {\n                                events[i].time_consumed = Date.now() - events[i].abs_time;\n                                break;\n                        }\n                }\n        };\n\n        eventEndWithMsg (seq:number, event_name:string, msg_ext:{[index:string]:any}) {\n                if (!this.dataStatistics[seq]) {\n                        this.logger.warn(\"zd.ee.0 no seq match\");\n                        return;\n                }\n\n                let events = this.dataStatistics[seq].events;\n                if (!events) {\n                        this.logger.warn(\"zd.ee.0 no events\");\n                        return;\n                }\n\n                for (let i = events.length - 1; i >= 0; i--) {\n                        if (events[i].event == event_name && events[i].time_consumed ) {\n                                events[i].time_consumed = Date.now() - events[i].abs_time;\n\n                                if (events[i].msg_ext == undefined) {\n                                        events[i].msg_ext = {};\n                                }\n                                events[i].msg_ext = {...msg_ext};\n                                break;\n                        }\n                }\n        };\n\n        /*\n         *    \"zd.aei.0\": \"ZegoDataReport.addEventInfo\"\n         */\n        addEventInfo (seq:number, event_name:string, key:string, value:string){\n                if (!this.dataStatistics[seq]) {\n                        this.logger.warn(\"zd.aei.0 no seq match\");\n                        return;\n                }\n\n                let events = this.dataStatistics[seq].events;\n                if (events == undefined) {\n                        this.logger.warn(\"zd.aei.0 no events\");\n                        return;\n                }\n\n                for (let i = events.length - 1; i >= 0; i--) {\n                        if (events[i].event == event_name && events[i].time_consumed != undefined) {\n                                if (events[i].event == event_name && events[i].time_consumed != undefined) {\n                                        if (events[i].msg_ext == undefined) {\n                                                events[i].msg_ext = {};\n                                        }\n\n                                        events[i].msg_ext[key] = value;\n                                        break;\n                                }\n                        }\n                }\n        };\n\n        /*\n         *    \"zd.ae.0\": \"ZegoDataReport.addEvent\"\n         */\n        addEvent (seq:number, event_name:string, msg_ext?:{[index:string]:string}) {\n                if (!this.dataStatistics[seq]) {\n                        this.logger.warn(\"zd.ae.0 no seq match\");\n                        return;\n                }\n\n                if (!this.dataStatistics[seq].events ) {\n                        return;\n                }\n\n                if (msg_ext) {\n                        this.dataStatistics[seq].events.push({\n                                event: event_name,\n                                abs_time: Date.now(),\n                                msg_ext: msg_ext\n                        });\n                }\n                else {\n                        this.dataStatistics[seq].events.push({\n                                event: event_name,\n                                abs_time: Date.now(),\n                        });\n                }\n        };\n\n        uploadReport(seq:number, itemType:string) {\n                var reportInfo = this.dataStatistics[seq];\n                if (reportInfo == undefined) {\n                        return;\n                }\n\n                reportInfo.itemtype = itemType;\n                reportInfo.time_consumed = Date.now() - reportInfo.abs_time;\n\n                this.logger.report(reportInfo);\n\n                delete this.dataStatistics[seq];\n        };\n}","import {ZegoDataReport} from \"../common/zego.datareport\";\nimport {ZegoPreview} from \"./zego.preview\";\nimport {ZegoPublish} from \"./zego.publish\";\nimport {\n        ENUM_PLAY_STATE_UPDATE,\n        ENUM_PUBLISH_STATE_UPDATE,\n        playErrorList,\n        publishErrorList\n} from \"../common/zego.extern\";\nimport {ENUM_SIGNAL_STATE, MediaStreamConstraints, PlayerInfo, PlayOption, SignalInfo} from \"../common/zego.entity\";\nimport {ZegoSignal} from \"../common/zego.signal\";\nimport {ZegoPlayWeb} from \"./zego.play.web\";\nimport {ZegoStreamCenter} from \"../common/ZegoStreamCenter\";\nimport {LoggerWeb} from \"./zego.logger.webrtc\";\n\nexport class ZegoStreamCenterWeb extends ZegoStreamCenter {\n        playerList: { [index: string]: PlayerInfo } = {};\n        publisherList = {};\n        \n        logger: LoggerWeb;\n        dataReport: ZegoDataReport;\n        \n        testEnvironment = false;\n        \n        //由streamcenter统一管理每个signal的心跳逻辑\n        heartbeatTimer = null;\n        heartbeatInterval = 10 * 1000;\n        \n        //质量回调时间间隔,默认3s\n        qualityTimerInterval = 3 * 1000;\n        \n        maxRetryCount = 5;\n        \n        previewVideoList: ZegoPreview[] = [];\n        \n        signalList: { [index: string]: SignalInfo } = {};\n        \n        \n        appid: number;\n        userid: string;\n        token: string;\n        \n        \n        constructor (log: LoggerWeb) {\n                super (log);\n                this.logger = log;\n                this.dataReport = new ZegoDataReport (this.logger);\n        }\n        \n        \n        onSignalDisconnected (server) {\n        };\n        \n        /*\n         *    \"zsc.qmc.0\": \"ZegoStreamCenter.setQualityMonitorCycle\"\n         */\n        setQualityMonitorCycle (timeInMs: number) {\n                this.logger.debug (\"zsc.qmc.0 timeInterval \" + timeInMs);\n                \n                this.qualityTimerInterval = timeInMs;\n        };\n        \n        /*\n         *    \"zsc.ssi.0\": \"ZegoStreamCenter.setSessionInfo\"\n         */\n        setSessionInfo (appid: number, userid: string, token: string, testEnvironment: boolean) {\n                this.logger.debug (\"zsc.ssi.0 called\");\n                \n                // this.signal.setSessionInfo(appid, userid, serverUrl);\n                this.appid = appid;\n                this.userid = userid;\n                this.token = token;\n                this.testEnvironment = testEnvironment;\n        };\n        \n        onPlayStateUpdate (type, streamid, error) {\n        };\n        \n        onPlayQualityUpdate (streamid, streamQuality) {\n        };\n        \n        onPublishStateUpdate (type, streamid, error) {\n        };\n        \n        onPublishQualityUpdate (streamid, streamQuality) {\n        };\n        \n        \n        /*\n         *    \"zsc.uhb.0\": \"ZegoStreamCenter.onUpdateHeartBeartIntervalHandle\"\n         */\n        onUpdateHeartBeartIntervalHandle (interval: number) {\n                if (interval != this.heartbeatInterval) {\n                        this.logger.debug (\"zsc.uhb.0 update \" + interval);\n                        \n                        if (this.heartbeatTimer) {\n                                clearTimeout (this.heartbeatTimer);\n                                this.heartbeatTimer = null;\n                        }\n                        \n                        this.heartbeatInterval = interval;\n                        \n                        this.startSignalHeartbeat ();\n                }\n        };\n        \n        \n        /*\n         *    \"zsc.em.0\": \"ZegoStreamCenter.enableMicrophone\"\n         */\n        enableMicrophone (localVideo: HTMLElement, enable: boolean) {\n                let preview = this.checkPreivew (localVideo);\n                if (!preview) {\n                        this.logger.info (\"zsc.em.0 no preview\");\n                        return false;\n                }\n                \n                return preview.enableMicrophone (enable);\n        };\n        \n        /*\n         *    \"zsc.ec.0\": \"ZegoStreamCenter.enableCamera\"\n         */\n        enableCamera (localVideo: HTMLElement, enable: boolean) {\n                let preview = this.checkPreivew (localVideo);\n                if (!preview) {\n                        this.logger.error (\"zsc.ec.0 no preview\");\n                        return false;\n                }\n                \n                return preview.enableCamera (enable);\n        };\n        \n        /*\n         *    \"zsc.sp.0\": \"ZegoStreamCenter.startPreview\"\n         */\n        startPreview (localVideo: HTMLElement, mediaStreamConstraints: MediaStreamConstraints, success: Function, error: Function): boolean {\n                if (!localVideo) {\n                        this.logger.error (\"zsc.sp.0 localVideo null\");\n                        return false;\n                }\n                \n                let preview = this.checkPreivew (localVideo);\n                \n                if (preview) {\n                        this.logger.warn (\"zsc.sp.0 localvideo alredy exist\");\n                        return true;\n                }\n                \n                preview = new ZegoPreview (this.logger);\n                this.previewVideoList.push (preview);\n                preview.startPreview (localVideo, mediaStreamConstraints, success, error);\n                \n                this.logger.debug (\"zsc.sp.0 call success\");\n                return true;\n        };\n        \n        /*\n         *    \"zsc.sp.1\": \"ZegoStreamCenter.stopPreview\"\n         */\n        stopPreview (localVideo: HTMLElement): boolean {\n                \n                if (!localVideo) {\n                        this.logger.warn (\"zsc.sp.0 localVideo null\");\n                        return false;\n                }\n                \n                for (let streamid in this.publisherList) {\n                        if (this.publisherList[streamid].localVideo === localVideo) {\n                                this.publisherList[streamid].localVideo = null;\n                        }\n                }\n                \n                let preview = this.checkPreivew (localVideo);\n                if (!preview) {\n                        this.logger.warn (\"zsc.sp.0 no preview\");\n                        return false;\n                }\n                if (preview.previewSuc) {\n                        preview.stopPreview ();\n                        this.removePreview (preview);\n                }\n                \n                \n                return true;\n        };\n        \n        /*\n         *    \"zsc.pss.0\": \"ZegoStreamCenter.setPublishStateStart\"\n         */\n        setPublishStateStart (streamid, localVideo) {\n                let totalStreamId = this.getTotalStreamId (streamid);\n                let publish = this.publisherList[totalStreamId];\n                if (publish) {\n                        this.logger.error (\"zsc.pss.0 publisher already exist\");\n                        return false;\n                }\n                \n                let publisher = new ZegoPublish (this.logger, null, this.dataReport, this.qualityTimerInterval);\n                publisher.onPublishStateUpdate = (type, _streamid, error) => {\n                        const publish = this.publisherList[_streamid];\n                        if (publish) {\n                                this.onPublishStateUpdate (type, publish.streamId, error);\n                        }\n                        else {\n                                this.logger.error (\"zsc.psuh.0 cannot find publish \" + streamid);\n                        }\n                        \n                };\n                publisher.onPublishQualityUpdate = (_streamid, streamQuality) => {\n                        const publish = this.publisherList[_streamid];\n                        if (publish) {\n                                this.onPublishQualityUpdate (publish.streamId, streamQuality)\n                        }\n                        else {\n                                this.logger.error (\"zsc.psuh.0 cannot find publish \" + streamid);\n                        }\n                        \n                };\n                \n                this.publisherList[totalStreamId] = {\n                        localVideo: localVideo,\n                        publisher: publisher,\n                        serverUrls: [],\n                        retryCount: 0,\n                        streamId: streamid,\n                };\n                \n                this.dataReport.eventStart (publisher.reportSeq, \"GetSignalUrl\");\n                \n                return true;\n        };\n        \n        /*\n       *    \"zsc.gts.0\": \"ZegoStreamCenter.getTotalStreamId\"\n       */\n        getTotalStreamId (streamid) {\n                if (this.testEnvironment) {\n                        var testStreamId = \"zegotest-\" + this.appid + \"-\" + streamid;\n                        this.logger.info (\"zsc.gts.0 test streamid \" + testStreamId);\n                        return testStreamId;\n                }\n                \n                return streamid;\n        }\n        \n        /*\n         *    \"zsc.sps.0\": \"ZegoStreamCenter.startPublishingStream\"\n         */\n        startPublishingStream (streamid: string, serverUrls: string[], preferPublishSourceType?: number) {\n                \n                this.logger.debug (\"zsc.sps.0 call\");\n                \n                let totalStreamid = this.getTotalStreamId (streamid);\n                let publish = this.publisherList[totalStreamid];\n                if (!publish) {\n                        this.logger.error (\"zsc.sps.0 publisher don't exist\");\n                        return false;\n                }\n                \n                let publisher = publish.publisher;\n                this.dataReport.eventEndWithMsg (publisher.reportSeq, \"GetSignalUrl\", {\n                        urls: serverUrls\n                });\n                \n                if (!serverUrls || serverUrls.length === 0) {\n                        this.onPublishStateUpdate (ENUM_PUBLISH_STATE_UPDATE.error, streamid, publishErrorList.DISPATCH_ERROR);\n                        \n                        this.logger.info (\"zsc.sps.0 server don't have signal url\");\n                        return false;\n                }\n                \n                let serverUrl = serverUrls[0];\n                publish.serverUrls = [...publish.serverUrls, ...serverUrls];\n                \n                return this.connectPublishServer (totalStreamid, serverUrl);\n        };\n        \n        \n        updateWaitingList (signalInfo: SignalInfo, isPublish: boolean, streamId: string, success: Function, error: Function) {\n                if (isPublish) {\n                        signalInfo.publishWaitingList.push ({\n                                streamId: streamId,\n                                success: success,\n                                error: error\n                        });\n                } else {\n                        signalInfo.playWaitingList.push ({\n                                streamId: streamId,\n                                success: success,\n                                error: error\n                        });\n                }\n        }\n        \n        \n        /*\n         *    \"zsc.ps.0\": \"ZegoStreamCenter.publishStream\"\n         */\n        publishStream (streamid) {\n                let publisher: ZegoPublish = this.publisherList[streamid].publisher;\n                if (!publisher) {\n                        this.logger.info (\"zsc.ps.0 publisher don't exist\");\n                        return;\n                }\n                \n                let localStream = null;\n                let videoInfo = null;\n                let preview = this.checkPreivew (this.publisherList[streamid].localVideo);\n                if (preview) {\n                        localStream = preview.localStream;\n                        videoInfo = preview.videoInfo;\n                }\n                \n                if (!localStream) {\n                        this.logger.info (\"zsc.ps.0 no localStream\");\n                }\n                \n                this.logger.debug (\"zsc.ps.0 call success\");\n                publisher.startPublish (streamid, localStream, videoInfo);\n        }\n        \n        connectPublishServer (streamId: string, serverUrl: string) {\n                \n                let publish = this.publisherList[streamId];\n                if (!publish) {\n                        this.logger.error (\"zsc.cps.0 publisher don't exist\");\n                        return false;\n                }\n                \n                this.dataReport.eventStart (publish.publisher.reportSeq, \"ConnectServer\");\n                \n                this.connetWithReuseSignalServer (streamId, true, serverUrl, (streamid: string, signalInfo: SignalInfo) => {\n                        \n                        //check streamid exist\n                        let checkPublish = this.publisherList[streamid];\n                        if (!checkPublish) {\n                                this.logger.info (\"zsc.cps.0 after connect publisher don't exist\");\n                                return;\n                        }\n                        \n                        let checkPublisher = checkPublish.publisher;\n                        if (!checkPublisher) {\n                                this.logger.info (\"zsc.cps.1 check publisher don't exist\");\n                                return;\n                        }\n                        \n                        this.dataReport.eventEndWithMsg (checkPublisher.reportSeq, \"ConnectServer\", {\n                                result: 0,\n                                server: serverUrl\n                        });\n                        \n                        let tokenInfo = signalInfo.tokenInfo;\n                        this.logger.info (\"zsc.cps.0 update token success\");\n                        \n                        if (tokenInfo && tokenInfo.report) {\n                                checkPublisher.qualityUpload = tokenInfo.report;\n                                checkPublisher.qualityUploadInterval = tokenInfo.report_interval;\n                        }\n                        \n                        checkPublisher.signal = signalInfo.signal;\n                        \n                        checkPublish.retryCount = 0;\n                        this.publishStream (streamid);\n                        \n                        this.getTokenSuccess ();\n                        \n                }, (streamid, result) => {\n                        this.logger.error (\"zsc.cps.0 update token failed \" + result);\n                        \n                        //check streamid exist\n                        let checkPublish = this.publisherList[streamid];\n                        if (!checkPublish) {\n                                this.logger.info (\"zsc.cps.0 after connect publisher don't exist\");\n                                return;\n                        }\n                        \n                        if (this.shouldRetry (checkPublish, result)) {\n                                this.logger.info (\"zsc.cps.1 retry connect\");\n                                \n                                let retryServerUrl = checkPublish.serverUrls[0];\n                                checkPublish.serverUrls.splice (0, 1);\n                                \n                                checkPublish.retryCount += 1;\n                                this.connectPublishServer (streamid, retryServerUrl);\n                        }\n                        else {\n                                this.onPublishStateUpdate (ENUM_PUBLISH_STATE_UPDATE.error, streamid, publishErrorList.TOKEN_ERROR);\n                        }\n                });\n                \n                return true;\n        }\n        \n        shouldRetry (stream: { serverUrls: string[], retryCount: number }, errorCode: number) {\n                if (stream.serverUrls.length == 0) {\n                        return false;\n                }\n                \n                if (stream.retryCount >= this.maxRetryCount) {\n                        return false;\n                }\n                \n                if (errorCode != 3) {\n                        return false;\n                }\n                \n                return true;\n        }\n        \n        /*\n         *    \"zsc.gts.0\": \"ZegoStreamCenter.getTokenSuccess\"\n         */\n        getTokenSuccess () {\n                this.logger.debug (\"zsc.gts.0 call\");\n        }\n        \n        /*\n         *    \"zsc.sps.0.1\": \"ZegoStreamCenter.stopPublishingStream\"\n         */\n        stopPublishingStream (streamid: string) {\n                \n                let totalStreamId = this.getTotalStreamId (streamid);\n                let publish = this.publisherList[totalStreamId];\n                \n                if (!publish) {\n                        this.logger.warn (\"zsc.sps.0.1 publisher don't exist\");\n                        return;\n                }\n                \n                if (publish.publisher) {\n                        publish.publisher.stopPublish ();\n                        delete publish.publisher;\n                }\n                \n                //update signal\n                this.removeStreamFromSignal (true, totalStreamId);\n                this.stopSignalHeartbeat ();\n                \n                delete this.publisherList[totalStreamId];\n                \n                this.logger.debug (\"zsc.sps.0.1 call success\");\n        };\n        \n        \n        /*\n         *    \"zsc.psao.1\": \"ZegoStreamCenter.setPlayStreamAudioOutput\"\n         */\n        setPlayStreamAudioOutput (streamid: string, audioOutput: string) {\n                let totalStreamId = this.getTotalStreamId (streamid);\n                if (audioOutput != undefined && audioOutput.length != 0) {\n                        this.logger.debug (\"zsc.psao.1 device \" + audioOutput);\n                        let play = this.playerList[totalStreamId];\n                        if (!play) {\n                                this.logger.info (\"zsc.psao.1 play don't exist\");\n                                return false;\n                        }\n                        \n                        if (!play.player) {\n                                this.logger.info (\"zsc.psao.1 player don't exist\");\n                                return false;\n                        }\n                        \n                        return play.player.setAudioDestination (audioOutput);\n                }\n                \n                return false;\n        };\n        \n        /*\n         *    \"zsc.psao.0\": \"ZegoStreamCenter.setPublishStreamAudioOutput\"\n         */\n        setPublishStreamAudioOutput (localVideo: HTMLElement, audioOutput: string): boolean {\n                \n                if (audioOutput != undefined && audioOutput.length != 0 && localVideo) {\n                        this.logger.debug (\"zsc.psao.0 device \" + audioOutput);\n                        \n                        let preview = this.checkPreivew (localVideo);\n                        if (preview) {\n                                preview.setAudioDestination (audioOutput);\n                        }\n                        else {\n                                this.logger.info (\"zsc.psao.0 no preview\");\n                        }\n                }\n                \n                return false;\n        };\n        \n        \n        /*\n          *    \"zsc.crss.0\": \"ZegoStreamCenter.connetWithReuseSignalServer\"\n          */\n        connetWithReuseSignalServer (streamId: string, isPublish: boolean, serverUrl: string, success: Function, error: Function) {\n                this.logger.debug (\"zsc.crss.0 begin \" + serverUrl);\n                \n                let signalInfo = null;\n                if (this.signalList[serverUrl]) {\n                        signalInfo = this.signalList[serverUrl];\n                        //already connected\n                        if (signalInfo.state == ENUM_SIGNAL_STATE.connected) {\n                                this.logger.debug (\"zsc.crss.0 already connected \" + serverUrl + \" streamId: \" + streamId);\n                                \n                                if (isPublish) {\n                                        signalInfo.publishConnectedList.push (streamId);\n                                } else {\n                                        signalInfo.playConnectedList.push (streamId);\n                                }\n                                \n                                success (streamId, signalInfo);\n                        } else if (signalInfo.state == ENUM_SIGNAL_STATE.connecting) { //isConnecting\n                                this.logger.debug (\"zsc.crss.0 signal is connecting \" + serverUrl + \" streamId: \" + streamId);\n                                this.updateWaitingList (signalInfo, isPublish, streamId, success, error);\n                        }\n                } else {\n                        //no connect\n                        this.logger.debug (\"zsc.crss.0 new signal \" + serverUrl + \" streamId: \" + streamId);\n                        \n                        let signal = new ZegoSignal (this.logger);\n                        signal.setSessionInfo (this.appid, this.userid);\n                        signal.onUpdateHeartBeartInterval = this.onUpdateHeartBeartIntervalHandle;\n                        signal.onDisconnect = this.onDisconnectHandle;\n                        \n                        this.signalList[serverUrl] = {\n                                signal: signal,\n                                state: ENUM_SIGNAL_STATE.connecting,\n                                publishWaitingList: [],\n                                playWaitingList: [],\n                                publishConnectedList: [],\n                                playConnectedList: [],\n                                tokenInfo: null\n                        };\n                        \n                        this.updateWaitingList (this.signalList[serverUrl], isPublish, streamId, success, error);\n                        \n                        signal.connectServer (this.token, serverUrl, (result, server, tokenInfo) => {\n                                signalInfo = this.signalList[serverUrl];\n                                \n                                let i = 0;\n                                let publishCallback;\n                                let playCallback;\n                                if (result != 0) {\n                                        //connected failed, notify and delete\n                                        this.logger.debug (\"zsc.crss.0 connect failed \" + server);\n                                        \n                                        for (i = 0; i < signalInfo.publishWaitingList.length; i++) {\n                                                publishCallback = signalInfo.publishWaitingList[i];\n                                                if (publishCallback.error) {\n                                                        publishCallback.error (publishCallback.streamId, result);\n                                                }\n                                        }\n                                        \n                                        for (i = 0; i < signalInfo.playWaitingList.length; i++) {\n                                                playCallback = signalInfo.playWaitingList[i];\n                                                if (playCallback.error) {\n                                                        playCallback.error (playCallback.streamId, result);\n                                                }\n                                        }\n                                        \n                                        delete this.signalList[serverUrl];\n                                } else {\n                                        //connected success, notify and update state\n                                        this.logger.debug (\"zsc.crss.0 connected success \" + server);\n                                        \n                                        signalInfo.state = ENUM_SIGNAL_STATE.connected;\n                                        signalInfo.tokenInfo = tokenInfo;\n                                        \n                                        for (i = 0; i < signalInfo.publishWaitingList.length; i++) {\n                                                publishCallback = signalInfo.publishWaitingList[i];\n                                                if (publishCallback.success) {\n                                                        publishCallback.success (publishCallback.streamId, signalInfo);\n                                                }\n                                                \n                                                signalInfo.publishConnectedList.push (publishCallback.streamId);\n                                        }\n                                        \n                                        for (i = 0; i < signalInfo.playWaitingList.length; i++) {\n                                                playCallback = signalInfo.playWaitingList[i];\n                                                if (playCallback.success) {\n                                                        playCallback.success (playCallback.streamId, signalInfo);\n                                                }\n                                                \n                                                signalInfo.playConnectedList.push (playCallback.streamId);\n                                        }\n                                        \n                                        signalInfo.publishWaitingList = [];\n                                        signalInfo.playWaitingList = [];\n                                        \n                                        if (this.heartbeatTimer == null) this.startSignalHeartbeat ();\n                                }\n                        });\n                }\n        }\n        \n        /*\n         *    \"zsc.pss.1\": \"ZegoStreamCenter.setPlayStateStart\"\n         */\n        setPlayStateStart (streamid: string, remoteVideo: HTMLElement, audioOutput: string, playOption: PlayOption) {\n                let totalStreamId = this.getTotalStreamId (streamid);\n                let play = this.playerList[totalStreamId];\n                if (play) {\n                        this.logger.warn (\"zsc.pss.1 player already exist\");\n                        return false;\n                }\n                \n                let player = new ZegoPlayWeb (this.logger, null, this.dataReport, this.qualityTimerInterval);\n                player.onPlayStateUpdate = this.onPlayStateUpdate;\n                player.onPlayQualityUpdate = this.onPlayQualityUpdate;\n                player.onVideoSizeChanged = this.onVideoSizeChanged;\n                \n                this.playerList[totalStreamId] = {\n                        player: player,\n                        remoteVideo: remoteVideo,\n                        audioOutput: audioOutput,\n                        signal: null,\n                        serverUrls: [],\n                        retryCount: 0,\n                        playOption: playOption\n                };\n                \n                this.dataReport.eventStart (player.reportSeq, \"GetSignalUrl\");\n                \n                return true;\n        };\n        \n        /*\n         *    \"zsc.sps.1\": \"ZegoStreamCenter.startPlayingStream\"\n         */\n        startPlayingStream (streamid: string, serverUrls: string[], currentPlaySourceType?: number): boolean {\n                this.logger.debug (\"zsc.sps.1 start play called\");\n                let totalStreamId = this.getTotalStreamId (streamid);\n                let play = this.playerList[totalStreamId];\n                if (!play) {\n                        this.logger.error (\"zsc.sps.1 player don't exist\");\n                        return false;\n                }\n                \n                let player = play.player;\n                this.dataReport.eventEndWithMsg (player.reportSeq, \"GetSignalUrl\", {\n                        urls: serverUrls\n                });\n                \n                if (serverUrls.length == 0) {\n                        this.onPlayStateUpdate (ENUM_PLAY_STATE_UPDATE.error, streamid, playErrorList.DISPATCH_ERROR);\n                        \n                        this.logger.info (\"zsc.sps.1 server don't have signal url\");\n                        return false;\n                }\n                \n                play.serverUrls = [...play.serverUrls, ...serverUrls];\n                \n                return this.connectPlayServer (totalStreamId, serverUrls[0]);\n        };\n        \n        \n        /*\n         *    \"zsc.cps.1\": \"ZegoStreamCenter.connectPlayServer\"\n         */\n        private connectPlayServer (streamId: string, serverUrl: string): boolean {\n                let play = this.playerList[streamId];\n                if (!play) {\n                        this.logger.error (\"zsc.cps.1 player don't exist\");\n                        return false;\n                }\n                \n                this.dataReport.eventStart (play.player.reportSeq, \"ConnectServer\");\n                this.connetWithReuseSignalServer (streamId, false, serverUrl, (streamid: string, signalInfo: SignalInfo) => {\n                        //check streamid exist\n                        let checkPlay = this.playerList[streamid];\n                        if (!checkPlay) {\n                                this.logger.error (\"zsc.cps.1 after connect player don't exist\");\n                                return;\n                        }\n                        \n                        let checkPlayer = checkPlay.player;\n                        if (!checkPlayer) {\n                                this.logger.error (\"zsc.cps.1 checkplayer don't exist\");\n                                return;\n                        }\n                        \n                        this.dataReport.eventEndWithMsg (checkPlayer.reportSeq, \"ConnectServer\", {\n                                result: 0,\n                                server: serverUrl\n                        });\n                        \n                        let tokenInfo = signalInfo.tokenInfo;\n                        this.logger.info (\"zsc.cps.1 update token success\");\n                        \n                        if (tokenInfo && tokenInfo.report) {\n                                checkPlayer.qualityUpload = tokenInfo.report;\n                                checkPlayer.qualityUploadInterval = tokenInfo.report_interval;\n                        }\n                        \n                        checkPlayer.signal = signalInfo.signal;\n                        \n                        checkPlay.retryCount = 0;\n                        this.playStream (streamid);\n                        \n                        this.getTokenSuccess ();\n                }, (streamid, result) => {\n                        let checkPlay = this.playerList[streamid];\n                        if (!checkPlay) {\n                                this.logger.error (\"zsc.cps.1 after connect player don't exist\");\n                                return;\n                        }\n                        \n                        if (this.shouldRetry (checkPlay, result)) {\n                                this.logger.info (\"zsc.cps.1 retry connect\");\n                                \n                                let retryServerUrl = checkPlay.serverUrls[0];\n                                checkPlay.serverUrls.splice (0, 1);\n                                \n                                checkPlay.retryCount += 1;\n                                this.connectPlayServer (streamid, retryServerUrl);\n                        }\n                        else {\n                                this.onPlayStateUpdate (ENUM_PLAY_STATE_UPDATE.error, streamid, playErrorList.TOKEN_ERROR);\n                        }\n                        \n                });\n                \n                return true;\n        }\n        \n        \n        /*\n         *    \"zsc.ps.1\": \"ZegoStreamCenter.playStream\"\n         */\n        private playStream (streamid) {\n                const player: ZegoPlayWeb = this.playerList[streamid].player;\n                if (!player) {\n                        this.logger.warn (\"zsc.ps.1 player don't exist\");\n                        return;\n                }\n                \n                this.logger.debug (\"zsc.ps.1 call success\");\n                player.startPlay (streamid, this.playerList[streamid].remoteVideo, this.playerList[streamid].audioOutput, this.playerList[streamid].playOption);\n        }\n        \n        \n        /*\n         *    \"zsc.rsfs.0\": \"ZegoStreamCenter.removeStreamFromSignal\"\n         */\n        private removeStreamFromSignal (isPublish, streamId) {\n                \n                let deleteSignal = [];\n                for (let serverUrl in this.signalList) {\n                        let signalInfo = this.signalList[serverUrl];\n                        if (isPublish) {\n                                for (let i = 0; i < signalInfo.publishConnectedList.length; i++) {\n                                        if (signalInfo.publishConnectedList[i] === streamId) {\n                                                this.logger.debug (\"zsc.rsfs.0 found from publish\");\n                                                signalInfo.publishConnectedList.splice (i, 1);\n                                                break;\n                                        }\n                                }\n                        }\n                        else {\n                                for (let j = 0; j < signalInfo.playConnectedList.length; j++) {\n                                        if (signalInfo.playConnectedList[j] === streamId) {\n                                                this.logger.debug (\"zsc.rsfs.0 found from play\");\n                                                signalInfo.playConnectedList.splice (j, 1);\n                                                break;\n                                        }\n                                }\n                        }\n                        \n                        if (signalInfo.publishConnectedList.length == 0 && signalInfo.playConnectedList.length == 0) {\n                                signalInfo.signal.disconnectServer ();\n                                deleteSignal.push (serverUrl);\n                        }\n                }\n                \n                for (let k = 0; k < deleteSignal.length; k++) {\n                        delete this.signalList[deleteSignal[k]];\n                }\n        }\n        \n        \n        /*\n         *    \"zsc.ssh.1\": \"ZegoStreamCenter.stopSignalHeartbeat\"\n         */\n        private stopSignalHeartbeat () {\n                this.logger.debug (\"zsc.ssh.1 call\");\n                \n                let count = 0;\n                for (let url in this.signalList) {\n                        count += 1;\n                }\n                \n                if (this.heartbeatTimer && count == 0) {\n                        \n                        this.logger.info (\"zsc.ssh.1 stop\");\n                        \n                        clearTimeout (this.heartbeatTimer);\n                        \n                        this.heartbeatTimer = null;\n                }\n        }\n        \n        \n        /*\n         *    \"zsc.sps.1.1\": \"ZegoStreamCenter.stopPlayingStream\"\n         */\n        stopPlayingStream (streamid) {\n                let totalStreamId = this.getTotalStreamId (streamid);\n                let player = this.playerList[totalStreamId];\n                if (!player) {\n                        this.logger.info (\"zsc.sps.1.1 player don't exist\");\n                        return;\n                }\n                \n                if (player.player) {\n                        player.player.stopPlay ();\n                        delete player.player;\n                }\n                \n                //update signal\n                this.removeStreamFromSignal (false, totalStreamId);\n                this.stopSignalHeartbeat ();\n                \n                delete this.playerList[totalStreamId];\n                \n                this.logger.debug (\"zsc.sps.1.1 call success\");\n        };\n        \n        reset () {\n                \n                for (let publishStreamId in this.publisherList) {\n                        if (this.publisherList[publishStreamId].publisher) {\n                                this.publisherList[publishStreamId].publisher.stopPublish ();\n                        }\n                }\n                \n                for (let playStreamId in this.playerList) {\n                        if (this.playerList[playStreamId].player) {\n                                this.playerList[playStreamId].player.stopPlay ();\n                        }\n                }\n                \n                for (let serverUrl in this.signalList) {\n                        if (this.signalList[serverUrl].signal) {\n                                this.signalList[serverUrl].signal.disconnectServer ();\n                        }\n                }\n                \n                this.playerList = {};\n                this.publisherList = {};\n                this.signalList = {};\n                \n                if (this.heartbeatTimer) {\n                        clearTimeout (this.heartbeatTimer);\n                        this.heartbeatTimer = null;\n                }\n        };\n        \n        checkMessageTimeout = () => {\n                for (let serverUrl in this.signalList) {\n                        if (this.signalList[serverUrl].signal) {\n                                this.signalList[serverUrl].signal.checkMessageTimeout ();\n                        }\n                }\n        };\n        \n        getAllInUseUrl = () => {\n                let serverUrls = [];\n                \n                for (let serverUrl in this.signalList) {\n                        serverUrls.push (serverUrl);\n                }\n                \n                return serverUrls;\n        };\n        \n        /*\n         *    \"zsc.od.0\": \"ZegoStreamCenter.onDisconnectHandle\"\n         */\n        onDisconnectHandle = (server) => {\n                this.logger.info (\"zsc.od.0 call\");\n                \n                if (this.signalList[server]) {\n                        let signalInfo = this.signalList[server];\n                        \n                        for (let i = 0; i < signalInfo.publishConnectedList.length; i++) {\n                                let publish = this.publisherList[signalInfo.publishConnectedList[i]];\n                                if (publish && publish.publisher) {\n                                        publish.publisher.onDisconnect ();\n                                }\n                        }\n                        \n                        for (let i = 0; i < signalInfo.playConnectedList.length; i++) {\n                                let play = this.playerList[signalInfo.playConnectedList[i]];\n                                if (play && play.player) {\n                                        play.player.onDisconnect ();\n                                }\n                        }\n                        \n                        delete this.signalList[server];\n                        \n                        this.stopSignalHeartbeat ();\n                }\n        };\n        \n        \n        startSignalHeartbeat () {\n                this.logger.debug (\"zsc.ssh.0 call\");\n                \n                if (this.heartbeatTimer) {\n                        clearTimeout (this.heartbeatTimer);\n                        this.heartbeatTimer = null;\n                }\n                \n                this.heartbeatTimer = setTimeout (() => {\n                        this.checkSignalHeartbeat ();\n                }, this.heartbeatInterval);\n        }\n        \n        checkSignalHeartbeat () {\n                this.logger.debug (\"zsc.csh.0 call\");\n                \n                for (let streamUrl in this.signalList) {\n                        if (this.signalList[streamUrl].signal) {\n                                this.signalList[streamUrl].signal.sendHeartbeat ();\n                        }\n                }\n                \n                if (this.heartbeatTimer) this.startSignalHeartbeat ();\n        }\n        \n        checkPreivew (localVideo: HTMLElement) {\n                for (let i = 0; i < this.previewVideoList.length; i++) {\n                        if (this.previewVideoList[i].localVideo === localVideo) {\n                                return this.previewVideoList[i];\n                        }\n                }\n                \n                return null;\n        }\n        \n        removePreview (preview: ZegoPreview) {\n                for (let i = 0; i < this.previewVideoList.length; i++) {\n                        if (this.previewVideoList[i] === preview) {\n                                this.previewVideoList.splice (i, 1);\n                                break;\n                        }\n                }\n        }\n        \n        onPlayerStreamUrlUpdate (streamid: string, url: string, type: string) {\n        \n        }\n        \n        onVideoSizeChanged (streamId: string, videoWidth: number, videoHeight: number) {\n        \n        }\n        \n}\n","import {ENUM_REMOTE_TYPE, ENUM_LOG_LEVEL} from \"./zego.entity\";\nimport {ZegoWebSocket} from \"../wechatMini/zego.webSocket\";\n\nexport const D = ['00', '01', '02', '03', '04', '05', '06', '07', '08', '09'];\n\nexport abstract class Logger {\n        \n        appid: number;\n        roomid: string;\n        sessionid: string;\n        userid: string;\n        userName: string;\n        version: string;\n        logType: ENUM_REMOTE_TYPE;\n        logLevel: ENUM_LOG_LEVEL;\n        logRemoteLevel: ENUM_LOG_LEVEL;\n        \n        websocket: WebSocket | ZegoWebSocket;\n        url: string;\n        logUploadTimer = null;\n        logUploadInterval = 1000 * 10;\n        \n        timeInterval: number;\n        \n        logCache = [];\n        logCacheSend = [];\n        logCacheMax = 100;\n        \n        abstract openWebSocketLogServer (url: string);\n        \n        abstract SendHttpsLog ();\n        \n        constructor () {\n        }\n        \n        \n        setLogLevel (logLevel: ENUM_LOG_LEVEL) {\n                if (this.logLevel < ENUM_LOG_LEVEL.debug || this.logLevel > ENUM_LOG_LEVEL.report) {\n                        this.logLevel = ENUM_LOG_LEVEL.disable;\n                } else {\n                        this.logLevel = logLevel;\n                }\n        }\n        \n        setRemoteLogLevel (logLevel: ENUM_LOG_LEVEL) {\n                if (this.logRemoteLevel < ENUM_LOG_LEVEL.debug || this.logRemoteLevel > ENUM_LOG_LEVEL.report) {\n                        this.logRemoteLevel = ENUM_LOG_LEVEL.disable;\n                } else {\n                        this.logRemoteLevel = logLevel;\n                }\n        }\n        \n        \n        setSessionInfo (appid: number, roomid: string, sessionid: string, userid: string, userName: string, version: string) {\n                this.appid = appid;\n                this.roomid = roomid;\n                this.sessionid = sessionid;\n                this.userid = userid;\n                this.userName = userName;\n                this.version = version;\n        };\n        \n        openLogServer (url: string) {\n                if (url.startsWith (\"wss:\")) {\n                        this.logType = ENUM_REMOTE_TYPE.websocket;\n                        this.openWebSocketLogServer (url);\n                } else if (url.startsWith (\"https:\")) {\n                        this.logType = ENUM_REMOTE_TYPE.https;\n                        this.openHttpsLogServer (url);\n                } else {\n                        this.logType = ENUM_REMOTE_TYPE.disable;\n                }\n        }\n        \n        stopLogServer () {\n                if (this.logType == ENUM_REMOTE_TYPE.websocket) {\n                        this.stopWebSocketServer ();\n                }\n                else if (this.logType == ENUM_REMOTE_TYPE.https) {\n                        //send last data\n                        this.SendHttpsLog ();\n                        this.stopHttpsServer ();\n                }\n                \n                this.logType = ENUM_REMOTE_TYPE.disable;\n        };\n        \n        \n        stopWebSocketServer () {\n                if (this.websocket) {\n                        this.websocket.onclose = null;\n                        this.websocket.onerror = null;\n                        this.websocket.close ();\n                        this.websocket = null;\n                }\n        }\n        \n        openHttpsLogServer (url: string) {\n                this.url = url;\n                if (!url) {\n                        return;\n                }\n                \n                this.stopHttpsServer ();\n                \n                //start timer\n                if (!this.logUploadTimer) {\n                        this.logUploadTimer = setInterval (() => {\n                                this.SendHttpsLog ();\n                        }, this.logUploadInterval);\n                }\n                \n        }\n        \n        stopHttpsServer () {\n                //stop timer\n                if (this.logUploadTimer) {\n                        clearInterval (this.logUploadTimer);\n                        this.logUploadTimer = null;\n                }\n        }\n        \n        \n        report (dataItem: any) {\n                const log = this.logReportParamList (ENUM_LOG_LEVEL.report, dataItem);\n                if (this.logLevel !== ENUM_LOG_LEVEL.disable && this.logLevel <= ENUM_LOG_LEVEL.report) {\n                        console.debug.apply (console, log);\n                }\n                \n                \n                //report 立即上报\n                this.RemoteLog (ENUM_LOG_LEVEL.report, log, true);\n        }\n        \n        debug (...values) {\n                let log = this.logParamList (ENUM_LOG_LEVEL.debug, values.join (''));\n                if (this.logLevel !== ENUM_LOG_LEVEL.disable && this.logLevel <= ENUM_LOG_LEVEL.debug) {\n                        console.debug.apply (console, log);\n                }\n                \n                this.log (ENUM_LOG_LEVEL.debug, log);\n        }\n        \n        info (...values) {\n                let log = this.logParamList (ENUM_LOG_LEVEL.info, values.join (''));\n                if (this.logLevel !== ENUM_LOG_LEVEL.disable && this.logLevel <= ENUM_LOG_LEVEL.info) {\n                        console.info.apply (console, log);\n                }\n                \n                this.log (ENUM_LOG_LEVEL.info, log);\n        }\n        \n        warn (...values) {\n                let log = this.logParamList (ENUM_LOG_LEVEL.warn, values.join (''));\n                if (this.logLevel !== ENUM_LOG_LEVEL.disable && this.logLevel <= ENUM_LOG_LEVEL.warn) {\n                        console.warn.apply (console, log);\n                }\n                \n                this.log (ENUM_LOG_LEVEL.warn, log);\n        }\n        \n        error (...values) {\n                let log = this.logParamList (ENUM_LOG_LEVEL.error, values.join (''));\n                if (this.logLevel !== ENUM_LOG_LEVEL.disable && this.logLevel <= ENUM_LOG_LEVEL.error) {\n                        console.error.apply (console, log);\n                }\n                \n                this.log (ENUM_LOG_LEVEL.error, log);\n        }\n        \n        log (level: ENUM_LOG_LEVEL, log: any) {\n                \n                if (this.logLevel !== ENUM_LOG_LEVEL.disable && this.logLevel <= level) {\n                        this.logCache.push (log);\n                        while (this.logCache.length > this.logCacheMax) {\n                                this.logCache.shift ();\n                        }\n                }\n                \n                if (this.logRemoteLevel !== ENUM_LOG_LEVEL.disable && this.logRemoteLevel <= level) {\n                        this.RemoteLog (level, log);\n                }\n        };\n        \n        RemoteLog (level: ENUM_LOG_LEVEL, log: any, force = false) {\n                \n                if (this.url == \"\") {\n                        return;\n                }\n                \n                if (this.logType == ENUM_REMOTE_TYPE.websocket) {\n                        this.RemoteWebSocketLog (level, log);\n                }\n                else if (this.logType == ENUM_REMOTE_TYPE.https) {\n                        this.RemoteHttpsLog (level, log, force);\n                }\n        };\n        \n        RemoteWebSocketLog (level: ENUM_LOG_LEVEL, log: any) {\n                if (this.websocket == null || this.websocket.readyState == 2 || this.websocket.readyState == 3) {\n                        let url = this.url;\n                        this.url = \"\";\n                        this.openLogServer (url);\n                        if (this.logCacheSend.length < this.logCacheMax) {\n                                this.logCacheSend.push (log);\n                        }\n                }\n                else if (this.websocket.readyState == 0) {\n                        if (this.logCacheSend.length < this.logCacheMax) {\n                                this.logCacheSend.push (log);\n                        }\n                }\n                else if (this.websocket.readyState == 1) {\n                        if (this.logCacheSend.length > 0) {\n                                let logBefore = \"\";\n                                for (let i = 0; i < this.logCacheSend.length; i++) {\n                                        logBefore = logBefore + this.logCacheSend[i] + \"\\n\";\n                                }\n                                log = logBefore + log;\n                                this.logCacheSend = [];\n                        }\n                        this.websocket.send(log);\n                }\n                else {\n                        console.warn (\"wrong socket state:\" + this.websocket.readyState);\n                        if (this.logCacheSend.length < this.logCacheMax) {\n                                this.logCacheSend.push (log);\n                        }\n                }\n        }\n        \n        RemoteHttpsLog (level: ENUM_LOG_LEVEL, log: any, force: boolean) {\n                this.logCacheSend.push (log);\n                if (this.logCacheSend.length >= this.logCacheMax || force === true) {\n                        this.SendHttpsLog ();\n                }\n        }\n        \n        logParamList (level: ENUM_LOG_LEVEL, logInfo: string) {\n                \n                let t = new Date ();\n                let stringTime = (t.getFullYear ()) + \"/\";\n                stringTime += (D[t.getMonth () + 1] || t.getMonth () + 1) + \"/\";\n                stringTime += (D[t.getDate ()] || t.getDate ()) + \" \";\n                stringTime += (D[t.getHours ()] || t.getHours ()) + \":\";\n                stringTime += (D[t.getMinutes ()] || t.getMinutes ()) + \":\";\n                stringTime += (D[t.getSeconds ()] || t.getSeconds ());\n                stringTime += \".\" + t.getTime () % 1000;\n                \n                //get first space from logInfo\n                let action = logInfo.substr (0, logInfo.indexOf (' '));\n                if (action.length == 0) {\n                        action = logInfo;\n                }\n                \n                let content = logInfo.substr (logInfo.indexOf (' ') + 1);\n                if (content.length == 0) {\n                        content = \"\";\n                }\n                \n                let s = {\n                        \"time\": stringTime,\n                        \"level\": level,\n                        \"action\": action,\n                        \"content\": content,\n                        \"appid\": this.appid,\n                        \"roomid\": this.roomid,\n                        \"userid\": this.userid,\n                        \"userName\": this.userName,\n                        \"sessionid\": this.sessionid\n                };\n                \n                return [JSON.stringify (s)];\n        }\n        \n        abstract logReportParamList (level: ENUM_LOG_LEVEL, logInfo: string);\n}\n\n\n\n","import {D, Logger} from \"../common/zego.logger\";\nimport {ENUM_LOG_LEVEL} from \"../common/zego.entity\";\n\nexport class LoggerWeb extends Logger {\n        \n        openWebSocketLogServer (url: string) {\n                if (this.url != url) {\n                        this.url = url;\n                        this.stopWebSocketServer ();\n                        if (!url) return;\n                        \n                        this.websocket = new WebSocket (url);\n                        \n                        \n                        this.websocket.onopen = function (evt) {\n                        \n                        };\n                        this.websocket.onclose = function (evt) {\n                        \n                        };\n                        this.websocket.onmessage = function (evt) {\n                        \n                        };\n                        this.websocket.onerror = function (err) {\n                                console.error (`open log websocket error:${err}`);\n                        };\n                }\n                \n        }\n        \n        SendHttpsLog () {\n                if (this.logCacheSend.length == 0) {\n                        return;\n                }\n                let uploadData = this.logCacheSend.join (\"\\n\");\n                \n                //console.log(\"url \" + this.url);\n                //console.log(uploadData);\n                let xmlhttp = new XMLHttpRequest ();\n                xmlhttp.onreadystatechange = () => {\n                        if (xmlhttp.readyState == 4) {\n                                if (xmlhttp.status == 200) {\n                                        if (xmlhttp.responseText.length == 0) {\n                                                return;\n                                        }\n                                        \n                                        try {\n                                                let json = JSON.parse (xmlhttp.responseText);\n                                                let interval = json.interval;\n                                                if (typeof interval === \"number\" && this.logUploadInterval !== interval) {\n                                                        this.timeInterval = interval;\n                                                        this.openHttpsLogServer (this.url);\n                                                }\n                                        }\n                                        catch (e) {\n                                                console.log (\"send result failed \" + e);\n                                        }\n                                        \n                                }\n                                else {\n                                        console.log (\"send failed \" + xmlhttp.status);\n                                }\n                        }\n                };\n                \n                xmlhttp.open (\"POST\", this.url, true);\n                xmlhttp.send (uploadData);\n                \n                \n                this.logCacheSend = [];\n        }\n        \n        logReportParamList (level: ENUM_LOG_LEVEL, logInfo: string) {\n                \n                const t = new Date ();\n                let stringTime = t.getFullYear () + \"/\";\n                stringTime += (D[t.getMonth () + 1] || t.getMonth () + 1) + \"/\";\n                stringTime += (D[t.getDate ()] || t.getDate ()) + \" \";\n                stringTime += (D[t.getHours ()] || t.getHours ()) + \":\";\n                stringTime += (D[t.getMinutes ()] || t.getMinutes ()) + \":\";\n                stringTime += (D[t.getSeconds ()] || t.getSeconds ());\n                stringTime += \".\" + t.getTime () % 1000;\n                \n                logInfo[\"time\"] = stringTime;\n                logInfo[\"level\"] = level;\n                \n                \n                logInfo[\"console\"] = \"rtc\";\n                \n                \n                logInfo[\"appid\"] = this.appid;\n                logInfo[\"roomid\"] = this.roomid;\n                logInfo[\"userid\"] = this.userid;\n                logInfo[\"id_name\"] = this.userid;\n                logInfo[\"userName\"] = this.userName;\n                logInfo[\"sessionid\"] = this.sessionid;\n                logInfo[\"version\"] = this.version;\n                \n                return [JSON.stringify (logInfo)];\n        }\n}","import {\n        DeviceInfo,\n        ENUM_PLAY_STATE_UPDATE,\n        ENUM_PUBLISH_STATE_UPDATE, ENUM_PUBLISH_STREAM_STATE,\n        ENUM_STREAM_SUB_CMD,\n        MediaStreamConstraints, PlayOption,\n        sdkErrorList\n} from \"../common/zego.entity\";\nimport {playErrorList, publishErrorList} from \"../common/zego.extern\";\nimport {LoggerWeb} from \"./zego.logger.webrtc\";\nimport {ZegoStreamCenterWeb} from \"./zego.streamCenter.web\";\nimport {ClientUtil} from \"../common/client-util\";\nimport {BaseCenter} from \"../common/clientBase/index\";\n\nexport  class ZegoClient extends BaseCenter {\n        \n        streamCenter:ZegoStreamCenterWeb;\n        \n        constructor () {\n                const log = new LoggerWeb();\n                const streamCenter = new ZegoStreamCenterWeb(log);\n                super (log,streamCenter);\n                \n                window.addEventListener ('message', event => {\n                        const {data: {type, streamId, canRequestAudioTrack}, origin} = event;\n                        if (type === 'SS_DIALOG_SUCCESS') { //user chose a stream\n                                this.screenStreamFrom (streamId, canRequestAudioTrack, ClientUtil.actionSuccessCallback ('screenShare', this.stateCenter.callbackList));\n                        }\n                });\n        }\n        \n        static screenShotReady: boolean = false;\n        \n        getSocket (server: string) {\n                return new WebSocket (server);\n        }\n        \n       \n        enableCamera (localVideo: HTMLElement, enable: boolean) {\n                this.logger.debug (\"zc.p.ec.0 call\");\n                \n                if (typeof enable !== \"boolean\") {\n                        this.logger.error (\"zc.p.ec.0 argument is not bool\");\n                        return false;\n                }\n                \n                return this.streamCenter.enableCamera (localVideo, enable);\n        }\n        \n        enableMicrophone (localVideo: HTMLElement, enable: boolean) {\n                this.logger.debug (\"zc.p.em.0 call\");\n                \n                if (typeof enable !== \"boolean\") {\n                        this.logger.error (\"zc.p.em.0 argument is not bool\");\n                        return false;\n                }\n                \n                return this.streamCenter.enableMicrophone (localVideo, enable);\n        }\n        \n        setLocalAudioOutput (localVideo: HTMLElement, audioOutput: string): boolean {\n                this.logger.debug (\"zc.p.psao.1 call\");\n                \n                return this.streamCenter.setPublishStreamAudioOutput (localVideo, audioOutput);\n        }\n        \n        setPlayAudioOutput (streamid: string, audioOutput: string): boolean {\n                this.logger.debug (\"zc.p.psao.1 call\");\n                \n                return this.streamCenter.setPlayStreamAudioOutput (streamid, audioOutput);\n        }\n        \n        setCustomSignalUrl (signalUrl: string) {\n                this.logger.debug (\"zc.p.scs.0 call: \" + signalUrl);\n                \n                if (!signalUrl || signalUrl.length == 0) {\n                        this.logger.error (\"zc.p.scs.0 param error\");\n                        return false;\n                }\n                \n                if (signalUrl.indexOf (\"wss://\") != 0) {\n                        this.logger.error (\"zc.p.scs.0 url is not correct\");\n                        return false;\n                }\n                \n                this.stateCenter.customUrl = signalUrl;\n        };\n        \n        setQualityMonitorCycle (timeInMs: number) {\n                if (typeof timeInMs === \"number\" && timeInMs >= 1000) {\n                        this.streamCenter.setQualityMonitorCycle (timeInMs);\n                }\n        }\n        \n        /*\n        *    \"zc.p.sps.0\": \"ZegoClient.startPlayingStream\",  // 播放流\n        */\n        startPlayingStream (streamid: string, remoteVideo: HTMLElement, audioOutput?: string,playOption?:PlayOption): boolean {\n                this.logger.debug (\"zc.p.sps.0 call\");\n                \n                if (!streamid || streamid === \"\") {\n                        this.logger.error (\"zc.p.sps.0 param error\");\n                        return false;\n                }\n                \n                if (!remoteVideo) {\n                        this.logger.error (\"zc.p.sps.0 don't have remoteVideo\");\n                        return false;\n                }\n                \n                if (this.stateCenter.customUrl) {\n                        if (!this.streamCenter.setPlayStateStart (streamid, remoteVideo, audioOutput,playOption)) {\n                                this.logger.error (\"zc.p.sps.0 cannot start play\");\n                                return false;\n                        }\n                        \n                        return this.streamCenter.startPlayingStream (streamid, [this.stateCenter.customUrl]);\n                }\n                \n                \n                if (!this.stateCenter.isLogin ()) {\n                        this.logger.error (\"zc.p.sps.0 not login\");\n                        return false;\n                }\n                \n                let found = false;\n                for (let i = 0; i < this.stateCenter.streamList.length; i++) {\n                        if (this.stateCenter.streamList[i].stream_id === streamid) {\n                                // 根据传入的流id判断当前的流列表中是否存在该流\n                                found = true;\n                                break;\n                        }\n                }\n                \n                if (found == false) {\n                        this.logger.info (\"zc.p.sps.0 cannot find stream\");\n                        // return false;\n                }\n                \n                if (!this.streamCenter.setPlayStateStart (streamid, remoteVideo, audioOutput,playOption)) {\n                        this.logger.info (\"zc.p.sps.0 cannot start play\");\n                        return false;\n                }\n                \n                //send request\n                let body = {\n                        stream_id: streamid,\n                        ptype: \"pull\",\n                        signals: this.streamCenter.getAllInUseUrl ()\n                };\n                \n                this.socketCenter.registerRouter ('webrtc_url', msg => {\n                        this.handleFetchWebRtcUrlRsp (msg)\n                });\n                this.socketCenter.sendMessage (\"webrtc_url\", body, undefined, (err, seq) => {\n                        if (err == sdkErrorList.SEND_MSG_TIMEOUT) {\n                                this.onPlayStateUpdate (ENUM_PLAY_STATE_UPDATE.error, streamid, playErrorList.DISPATCH_TIMEOUT);\n                        }\n                        else {\n                                this.onPlayStateUpdate (ENUM_PLAY_STATE_UPDATE.error, streamid, playErrorList.DISPATCH_ERROR);\n                        }\n                        \n                        this.streamCenter.stopPlayingStream (streamid);\n                });\n                \n                return true;\n        };\n        \n        \n        /*\n        *    \"zc.p.sps.0.1\": \"ZegoClient.stopPlayingStream\",停止拉流\n        */\n        stopPlayingStream (streamid: string) {\n                \n                this.logger.debug (\"zc.p.sps.1.0 call\");\n                \n                if (!streamid || streamid === \"\") {\n                        this.logger.info (\"zc.p.sps.1.0 param error\");\n                        return false;\n                }\n                \n                this.streamCenter.stopPlayingStream (streamid);\n                \n                for (let seq in this.stateCenter.streamUrlMap) {\n                        if (this.stateCenter.streamUrlMap[seq] === streamid) {\n                                delete this.stateCenter.streamUrlMap[seq];\n                                break;\n                        }\n                }\n                \n                this.logger.debug (\"zc.p.sps.1.0 call success\");\n                return true;\n        };\n        \n        \n        /*\n         *    \"zc.p.sp.0\": \"ZegoClient.startPreview\", 开始预览\n         */\n        startPreview (localVideo: HTMLElement, mediaStreamConstraints: MediaStreamConstraints, success: Function, error: Function): boolean {\n                this.logger.debug (\"zc.p.sp.0 call\");\n                \n                if (!localVideo) {\n                        this.logger.error (\"zc.p.sp.0 no localVideo\");\n                        return false;\n                }\n                \n                return this.streamCenter.startPreview (localVideo, mediaStreamConstraints, success, error);\n        };\n        \n        /*\n        *    \"zc.p.sp.1\": \"ZegoClient.stopPreview\",结束预览\n        */\n        stopPreview (localVideo: HTMLElement): boolean {\n                \n                this.logger.debug (\"zc.p.sp.1 call\");\n                \n                if (!localVideo) {\n                        this.logger.info (\"zc.p.sp.1 param error\");\n                        return false;\n                }\n                \n                return this.streamCenter.stopPreview (localVideo);\n        };\n        \n        \n        /*\n        *    \"zc.p.sps.1\": \"ZegoClient.startPublishingStream\",开始推流\n        */\n        startPublishingStream (streamid: string, localVideo: HTMLElement, extraInfo?: any) {\n                \n                this.logger.debug (\"zc.p.sps.1 call\");\n                \n                if (!streamid) {\n                        this.logger.error (\"zc.p.sps.1 param error\");\n                        return false;\n                }\n                \n                if (this.stateCenter.customUrl && this.stateCenter.customUrl.length != 0) {\n                        this.stateCenter.publishStreamList[streamid] = {\n                                state: ENUM_PUBLISH_STREAM_STATE.tryPublish,\n                                extra_info: extraInfo\n                        };\n                        \n                        if (!this.streamCenter.setPublishStateStart (streamid, localVideo)) {\n                                this.logger.info (\"zc.p.sps.1 cannot start publish\");\n                                return false;\n                        }\n                        \n                        return this.streamCenter.startPublishingStream (streamid, [this.stateCenter.customUrl]);\n                }\n                \n                if (!this.stateCenter.isLogin ()) {\n                        this.logger.error (\"zc.p.sps.1 not login\");\n                        return false;\n                }\n                \n                this.stateCenter.publishStreamList[streamid] = {\n                        state: ENUM_PUBLISH_STREAM_STATE.tryPublish,\n                        extra_info: extraInfo\n                };\n                \n                if (!this.streamCenter.setPublishStateStart (streamid, localVideo)) {\n                        this.logger.error (\"zc.p.sps.1 cannot start publish\");\n                        return false;\n                }\n                \n                this.logger.info (\"zc.p.sps.1 start publish\");\n                \n                const body = {\n                        stream_id: streamid,\n                        ptype: \"push\",\n                        signals: this.streamCenter.getAllInUseUrl ()\n                };\n                \n                this.socketCenter.registerRouter ('webrtc_url', msg => {\n                        this.handleFetchWebRtcUrlRsp (msg)\n                });\n                this.socketCenter.sendMessage (\"webrtc_url\", body, undefined, (err, seq) => {\n                        if (err == sdkErrorList.SEND_MSG_TIMEOUT) {\n                                this.onPublishStateUpdate (ENUM_PUBLISH_STATE_UPDATE.error, streamid, publishErrorList.DISPATCH_TIMEOUT);\n                        } else {\n                                this.onPublishStateUpdate (ENUM_PUBLISH_STATE_UPDATE.error, streamid, publishErrorList.DISPATCH_ERROR);\n                        }\n                        \n                        this.streamCenter.stopPublishingStream (streamid);\n                });\n                \n                return true;\n        };\n        \n        \n        //结束推流\n        stopPublishingStream (streamid: string): boolean {\n                \n                this.logger.debug (\"zc.p.sps.1.1 call\");\n                \n                if (!streamid) {\n                        this.logger.info (\"zc.p.sps.1.1 param error\");\n                        return false;\n                }\n                \n                this.streamCenter.stopPublishingStream (streamid);\n                \n                if (this.stateCenter.publishStreamList[streamid]) {\n                        if (this.stateCenter.publishStreamList[streamid].state >= ENUM_PUBLISH_STREAM_STATE.update_info) {\n                                this.streamHandler.updateStreamInfo (streamid, ENUM_STREAM_SUB_CMD.liveEnd);\n                        }\n                        delete this.stateCenter.publishStreamList[streamid];\n                }\n                \n                return true;\n        };\n        \n        startScreenShotChrome (callBack: (suc: boolean, stream: MediaStream) => void) {\n                \n                if (!ZegoClient.screenShotReady) {\n                        this.logger.error (`zc.b.ss Please install the extension:1. Go to chrome://extensions  2. Check: \"Enable Developer mode   3. Click: \"Load the unpacked extension... 4. Choose \"extension\" folder from the repository 5. Reload this page\n                                      `);\n                        return false;\n                } else {\n                        window.postMessage ({type: 'SS_UI_REQUEST', text: 'start'}, '*');\n                        // listen for messages from the content-script\n                        ClientUtil.registerCallback ('screenShare',\n                                    {success: callBack}, this.stateCenter.callbackList);\n                        \n                        \n                }\n        }\n        \n        startScreenShotFirFox (mediaSource: 'screen' | 'application' | 'window', audio, callBack: (suc: boolean, stream: MediaStream) => void) {\n                const config = {\n                        video: {},\n                        audio: audio\n                };\n                config.video['mediaSource'] = mediaSource;\n                \n                navigator.mediaDevices\n                .getUserMedia (config)\n                .then (stream => {\n                        this.stateCenter.screenShotStream = stream;\n                        callBack (true, stream);\n                }).catch (err => {\n                        this.logger.error ('zc.b.ssf ' + err);\n                        callBack (false, null);\n                });\n                \n        }\n        \n        stopScreenShot () {\n                this.stateCenter.screenShotStream.getTracks ().forEach (track => {\n                        track.stop ();\n                });\n                window.postMessage ({type: 'SS_UI_CANCEL', text: 'start'}, '*');\n        }\n        \n        // web独有\n        WebrtcOnPublishStateUpdateHandle (type: 0 | 1 | 2, streamid: string, error: { code: string, msg: string }) {\n                if (this.stateCenter.publishStreamList[streamid].state == ENUM_PUBLISH_STREAM_STATE.publishing) {\n                        this.onPublishStateUpdate (type, streamid, error);\n                }\n        };\n        \n        // web独有\n        setCDNInfo (streamInfo: { urls_flv: string, urls_hls: string, urls_rtmp: string },\n                    streamItem: { urls_flv: string, urls_m3u8: string, urls_rtmp: string }) {\n                streamInfo.urls_flv = streamItem.urls_flv;\n                streamInfo.urls_hls = streamItem.urls_m3u8;\n                streamInfo.urls_rtmp = streamItem.urls_rtmp;\n        };\n        \n        screenStreamFrom (streamId: string,canRequestAudioTrack:boolean,callBack:Function) {\n                \n                \n                const config = {};\n                config['audio'] = {\n                        mandatory: {\n                                chromeMediaSource: 'desktop',\n                                chromeMediaSourceId: streamId\n                        }\n                };\n                config['video'] = {\n                        mandatory : {\n                                chromeMediaSource: 'desktop',\n                                chromeMediaSourceId: streamId,\n                                maxWidth: window.screen.width,\n                                maxHeight: window.screen.height\n                        }\n                };\n                \n                !canRequestAudioTrack && (config['audio'] = false);\n                navigator.mediaDevices\n                .getUserMedia (config)\n                .then (stream => {\n                        this.stateCenter.screenShotStream = stream;\n                        callBack(true,stream);\n                }).catch (err => {\n                        this.logger.error ('zc.b.ssf ' + err);\n                        callBack(false,null);\n                });\n        }\n        \n        static  isSupportWebrtc(){\n                return ClientUtil.isSupportWebrtc();\n        }\n        \n        static  isSupportH264(sucCall,errCall){\n                  ClientUtil.isSupportH264(sucCall,errCall);\n        }\n        \n        \n        \n        enumDevices(deviceInfoCallback, error){\n                ZegoClient.enumDevices(deviceInfoCallback, error);\n        }\n        \n        static enumDevices (deviceInfoCallback, error) {\n                if (navigator.mediaDevices === undefined || navigator.mediaDevices.enumerateDevices === undefined) {\n                        if (error) {\n                                error (\"browser don't support enumerate devices\");\n                        }\n                        return;\n                }\n                \n                navigator.mediaDevices.enumerateDevices ().then (deviceInfos => {\n                        let microphone = [];\n                        let speaker = [];\n                        let camera = [];\n                        \n                        for (let i = 0; i < deviceInfos.length; i++) {\n                                let deviceInfo = deviceInfos[i];\n                                if (deviceInfo.kind === 'audioinput') {\n                                        microphone.push ({\n                                                label: deviceInfo.label,\n                                                deviceId: deviceInfo.deviceId\n                                        });\n                                }\n                                if (deviceInfo.kind === 'audiooutput') {\n                                        speaker.push ({\n                                                label: deviceInfo.label,\n                                                deviceId: deviceInfo.deviceId\n                                        });\n                                }\n                                if (deviceInfo.kind === 'videoinput') {\n                                        camera.push ({\n                                                label: deviceInfo.label,\n                                                deviceId: deviceInfo.deviceId\n                                        });\n                                }\n                        }\n                        \n                        if (deviceInfoCallback) {\n                                deviceInfoCallback ({\n                                        microphones: microphone,\n                                        speakers: speaker,\n                                        cameras: camera\n                                });\n                        }\n                        \n                }).catch (err => {\n                        if (error) {\n                                error (err);\n                        }\n                });\n        };\n        \n        \n}\n\n// listen for messages from the content-script\nwindow.addEventListener ('message', event => {\n        const {data: {type, streamId}, origin} = event;\n        \n        // NOTE: you should discard foreign events\n        if (origin !== window.location.origin) {\n                console.warn (\n                            'ScreenStream: you should discard foreign event from origin:',\n                            origin\n                );\n                // return;\n        }\n        \n        // content-script will send a 'SS_PING' msg if extension is installed\n        if (type === 'SS_PING') {\n                ZegoClient.screenShotReady = true;\n        }\n        \n        \n});\n"],"sourceRoot":""}